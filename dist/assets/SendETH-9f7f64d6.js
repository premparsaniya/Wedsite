import{r as o,a as c,j as t}from"./jsx-runtime-89a93595.js";import{a as H,aD as j,aE as k,ar as I,Q as m}from"./EmojiBoard-d3fa8393.js";import{W}from"./web3.min-cf08a409.js";import{I as G}from"./index-85cf4fcf.js";import{A as B,T as h}from"./AvailableBalanceCard-60a2d250.js";import"./index-9f68e806.js";const M=()=>{const{state:{myWallet:{isMainNet:x,address:l,privateKey:d}}}=o.useContext(H),i=new W(x===!0?j:k),[a,g]=o.useState(""),[n,p]=o.useState(""),[b,f]=o.useState(!1),[u,N]=o.useState("0"),[T,y]=o.useState(),[v,w]=o.useState("0"),S=async()=>{var r;const e=d&&l&&i.eth.accounts.signTransaction({from:l,to:a,value:i.utils.toWei(n,"ether"),nonce:T,gas:21e3,gasPrice:v},d);e&&i.eth.sendSignedTransaction(((r=await e)==null?void 0:r.rawTransaction)||"").then(({transactionHash:s})=>{console.log("transactionHash",s)}).catch(s=>{console.error("err:::",s)})};function C(){var e,r,s;if(((e=a==null?void 0:a.trim())==null?void 0:e.length)===0){m.error("Please enter address",{position:"top-center"});return}if(((r=a==null?void 0:a.trim())==null?void 0:r.length)!==42){m.error("Please enter valid address",{position:"top-center"});return}if(((s=n==null?void 0:n.trim())==null?void 0:s.length)===0){m.error("Please enter amount",{position:"top-center"});return}if(parseFloat(n)<=0){m.error("Please enter valid amount",{position:"top-center"});return}f(!0)}const F=()=>f(!1);o.useEffect(()=>{(d||l)===null||(A(),P())},[l,x]);async function P(){return l?await i.eth.getTransactionCount(l).then(e=>(y(e),e)):void 0}async function A(){return await i.eth.getGasPrice().then(e=>{w(e);let r=i.utils.fromWei(e,"ether"),s=parseFloat(r)*21e3;return console.log("gasFees::::",s),N(s.toFixed(12)),s})}let E=parseFloat(n)+parseFloat(u);return c("div",{className:"flex flex-col items-center min-h-screen py-20 bg-white min-w-screen px-3.5",children:[t(B,{}),t("span",{className:"font-lato font-bold text-xl text-center text-black mx-[2%] mt-[2%] mb-2",children:"Please fill in the form to send ETH"}),t(h,{pHolder:"Address",val:a,onChangeT:g}),t(h,{pHolder:"Amount",val:n,onChangeT:e=>{if(e==="--"||e==="-"||e===""){p("");return}else{if(parseFloat(e)<0){p("");return}p(e)}},rLabel:"ETH",type:"number"}),t(I,{title:"Send ETH",className:"mt-8 px-[7%] text-base",onP:C}),c(G,{visible:b,onClose:F,saveBtnTxt:"Send",onSave:S,title:"Confirm Transaction",subClass:"w-[100%] mx-1 sm:mx-10 ",children:[c("div",{className:"flex justify-between border-t-[1px] border-gray-300 px-4 pt-2",children:[t("span",{className:"text-sm text-gray-600 md:text-base",children:"Amount"}),t("span",{className:"block text-[14px] md:text-lg font-lato",children:n})]}),c("div",{className:"flex justify-between px-4 pt-2 border-gray-300",children:[t("span",{className:"text-sm text-gray-600 md:text-base Estimated gas fee",children:"Estimated gas fee"}),t("span",{className:"block text-[14px] md:text-lg font-lato",children:u})]}),c("div",{className:"flex justify-between px-4 pt-4 border-t-[1px] border-black mt-4",children:[t("span",{className:"text-sm text-agray-600 md:text-base",children:"Total"}),t("span",{className:"block text-[14px] md:text-lg font-lato",children:E.toFixed(12)})]})]})]})};export{M as default};
//# sourceMappingURL=SendETH-9f7f64d6.js.map
