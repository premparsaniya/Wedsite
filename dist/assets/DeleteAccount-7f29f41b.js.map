{"version":3,"file":"DeleteAccount-7f29f41b.js","sources":["../../src/pages/DeleteAccount.tsx"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { App_state, LogoutUser, LogoutUserPost } from \"~/reduxState\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport PopUp from \"../components/PopUp\";\r\nimport { BTN } from \"~/components\";\r\nimport { AppContext, resetUser } from \"~/context\";\r\n\r\nconst DeleteAccount = () => {\r\n  const { user } = useSelector((s: App_state) => s.UserLogin);\r\n  const token = user?.token;\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const { dispatch: disp } = useContext(AppContext);\r\n\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [popup, setPopup] = useState<boolean>(false);\r\n\r\n  const openDeletePopup = () => setPopup(!popup);\r\n  const CloseDeletePopup = () => setPopup(!popup);\r\n\r\n  const handleDeleteAccountBtn = () => {\r\n    const obj = {\r\n      method: \"delete_user\",\r\n      user_id: user?.data?.user_id,\r\n    };\r\n    setLoading(true);\r\n    fetch(`${import.meta.env.VITE_PUBLIC_URL}user`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        accept: \"application/json\",\r\n        contentType: \"application/json\",\r\n        version: \"1.0.0\",\r\n        token: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(obj),\r\n    }).then((res) => {\r\n      res.json().then((response) => {\r\n        if (response.status === 1) {\r\n          setLoading(false);\r\n          setPopup(!popup);\r\n          toast.success(\"account deleted successfully...\", {\r\n            position: \"top-center\",\r\n            autoClose: 1000,\r\n          });\r\n          dispatch(LogoutUser());\r\n          dispatch(LogoutUserPost());\r\n          navigate(\"/\");\r\n          resetUser(disp);\r\n        } else {\r\n          // console.log(\"else\", response);\r\n        }\r\n      });\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"edup-content\">\r\n        {popup && (\r\n          <PopUp\r\n            message=\"Are you sure want to Delete your account ?\"\r\n            btnMsg=\"Delete\"\r\n            functionHandle={handleDeleteAccountBtn}\r\n            closePopup={CloseDeletePopup}\r\n            loading={loading}\r\n          />\r\n        )}\r\n        <div className=\"delete-ac-content\">\r\n          <div className=\"text-center delete-ac-content-inner\">\r\n            <span style={{ color: \"#857e7e\", fontSize: \"1.5rem\" }}>\r\n              \"you want to delete account? once you delete the account you can\r\n              not access your account again\"\r\n            </span>\r\n          </div>\r\n          <div className=\"mx-auto mt-8 \">\r\n            <BTN\r\n              className=\"px-32\"\r\n              onP={openDeletePopup}\r\n              title=\" Delete Account\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DeleteAccount;\r\n"],"names":["DeleteAccount","user","useSelector","s","token","navigate","useNavigate","dispatch","useDispatch","disp","useContext","AppContext","loading","setLoading","useState","popup","setPopup","jsx","Fragment","jsxs","PopUp","obj","_a","res","response","toast","LogoutUser","LogoutUserPost","resetUser","BTN"],"mappings":"gNASA,MAAMA,EAAgB,IAAM,CAC1B,KAAM,CAAE,KAAAC,CAAK,EAAIC,EAAaC,GAAiBA,EAAE,SAAS,EACpDC,EAAQH,GAAA,YAAAA,EAAM,MACdI,EAAWC,IACXC,EAAWC,IACX,CAAE,SAAUC,CAAK,EAAIC,aAAWC,CAAU,EAE1C,CAACC,EAASC,CAAU,EAAIC,WAAkB,EAAK,EAC/C,CAACC,EAAOC,CAAQ,EAAIF,WAAkB,EAAK,EAuCjD,OAEIG,EAAAC,EAAA,CAAA,SAAAC,EAAC,MAAI,CAAA,UAAU,eACZ,SAAA,CACCJ,GAAAE,EAACG,EAAA,CACC,QAAQ,6CACR,OAAO,SACP,eAzCqB,IAAM,OACnC,MAAMC,EAAM,CACV,OAAQ,cACR,SAASC,EAAArB,GAAA,YAAAA,EAAM,OAAN,YAAAqB,EAAY,OAAA,EAEvBT,EAAW,EAAI,EACT,MAAA,yCAA0C,CAC9C,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,YAAa,mBACb,QAAS,QACT,MAAO,UAAUT,GACnB,EACA,KAAM,KAAK,UAAUiB,CAAG,CAAA,CACzB,EAAE,KAAME,GAAQ,CACfA,EAAI,KAAK,EAAE,KAAMC,GAAa,CACxBA,EAAS,SAAW,IACtBX,EAAW,EAAK,EAChBG,EAAS,CAACD,CAAK,EACfU,EAAM,QAAQ,kCAAmC,CAC/C,SAAU,aACV,UAAW,GAAA,CACZ,EACDlB,EAASmB,GAAY,EACrBnB,EAASoB,GAAgB,EACzBtB,EAAS,GAAG,EACZuB,EAAUnB,CAAI,EAGhB,CACD,CAAA,CACF,CAAA,EAUO,WA5Ce,IAAMO,EAAS,CAACD,CAAK,EA6CpC,QAAAH,CAAA,CACF,EAEFO,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAF,EAAC,MAAI,CAAA,UAAU,sCACb,SAAAA,EAAC,OAAK,CAAA,MAAO,CAAE,MAAO,UAAW,SAAU,QAAS,EAAG,0GAGvD,CAAA,EACF,EACAA,EAAC,MAAI,CAAA,UAAU,gBACb,SAAAA,EAACY,EAAA,CACC,UAAU,QACV,IA3DY,IAAMb,EAAS,CAACD,CAAK,EA4DjC,MAAM,iBAAA,CAAA,EAEV,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ"}