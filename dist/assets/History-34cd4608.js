import{r as p,a as e,j as a}from"./jsx-runtime-89a93595.js";import{a as T,aF as F,aU as H,l as M,aV as N,z as k,aG as g,aH as D,aW as V}from"./EmojiBoard-d3fa8393.js";import{I as z}from"./index-85cf4fcf.js";import{W as d}from"./web3.min-cf08a409.js";const A="/assets/receive_icon-e8f16046.svg",Y="/assets/sent_icon-ce6e8634.svg",P=()=>{const{state:{myWallet:t},dispatch:y}=p.useContext(T),{address:c,isMainNet:l,privateKey:v}=t,[r,w]=p.useState([]),[S,C]=p.useState(!0),[$,b]=p.useState(!1),u=()=>b(!1),[n,i]=p.useState({});p.useEffect(()=>{(v||c)===null?F({myWallet:t,dispatch:y}):j()},[c]);const j=async()=>{c&&H({wAddress:c,pg:1,offset:1e3,isMainNet:l}).then(({data:s,err:o})=>{o===null&&(s==null?void 0:s.status)==="1"?w((s==null?void 0:s.result)||[]):console.error(o)}).catch(s=>console.error(s)).finally(()=>C(!1))},h=s=>s==="Confirmed"?"text-green-400":s==="Failed"?"text-rose-500":s==="Pending"?"text-lime-300":"text-black",x=s=>s==="1"?"Confirmed":s==="0"?"Failed":s===""||s===null?"Pending":"Unknown",_=s=>{i(s),b(!0),l&&V(s==null?void 0:s.hash,l).then(({data:o,err:f})=>{if(f===null&&(o==null?void 0:o.status)==="1"){const E=(o==null?void 0:o.result)||{status:""};i({...s,...E})}else console.error(f)}).catch(o=>console.error(o))};return e("div",{className:"flex flex-col items-center flex-1 min-h-screen py-16 min-w-screen",children:[a("span",{className:"block text-4xl font-semibold text-center text-black font-lato",children:"History"}),S?a(M,{isLoading:!0,colClass:"text-black",size:10,className:"mt-[15%]"}):(r==null?void 0:r.length)===0?a("span",{className:"block text-lg font-semibold text-center text-black font-lato mt-[15%]",children:"No NFTs found!"}):r==null?void 0:r.map((s,o)=>{const f=`${(s==null?void 0:s.from)===c?"Sent":"Received"} ${l?s==null?void 0:s.tokenSymbol:"ETH"}`;return e("button",{onClick:()=>_({...s,_title:f}),className:`flex flex-row items-center justify-center w-[100%] sm:w-[92%] lg:max-w-[70%] p-1 md:p-4 mx-[4%] ${(r==null?void 0:r.length)-1===o?"":"border-b-2 border-zinc-100"}`,children:[a("img",{src:(s==null?void 0:s.from)===c?Y:A,alt:"NFT",className:"min-w-[50px] h-[50px]"}),e("div",{className:"flex flex-col justify-between w-[100%] px-4 min-h-[60px]",children:[e("div",{className:"flex flex-row items-center justify-between w-[100%]",children:[a("span",{className:"block text-[14px] font-semibold text-black lg:text-xl font-lato",children:l?s!=null&&s.tokenSymbol?f:"--":f}),a("span",{className:"block text-[14px] font-semibold text-black md:text-xl font-lato",children:s!=null&&s.value?`${t!=null&&t.isMainNet?N(s==null?void 0:s.value,s==null?void 0:s.tokenDecimal):d.utils.fromWei(s==null?void 0:s.value,"ether")} ${l?s==null?void 0:s.tokenSymbol:"ETH"}`:"--"})]}),e("div",{className:"flex flex-row items-center justify-between w-[100%]",children:[a("span",{className:`block text-[14px] md:text-lg font-lato ${h(x(l?s==null?void 0:s.status:s==null?void 0:s.txreceipt_status))}`,children:l?s!=null&&s.status?`${x(s==null?void 0:s.status)} `:"--":s!=null&&s.txreceipt_status?`${x(s==null?void 0:s.txreceipt_status)} `:"--"},o),a("span",{className:"block text-[14px] md:text-lg text-zinc-700 font-lato",children:s!=null&&s.timeStamp?k.unix(s==null?void 0:s.timeStamp).fromNow():"--"})]})]})]},o)}),e(z,{visible:$,onClose:u,hideClose:!0,saveBtnTxt:"Close",onSave:u,title:n==null?void 0:n._title,subClass:"w-[100%] mx-1 sm:mx-10 ",children:[e("div",{className:"flex justify-between border-t-[1px] border-gray-300 px-4 pt-4",children:[a("span",{className:"text-sm text-gray-600 md:text-base",children:"Status"}),a("span",{className:"text-sm text-gray-600 md:text-base",children:"Date"})]}),e("div",{className:"flex justify-between px-4 pt-2",children:[a("span",{className:`block text-[14px] md:text-lg font-lato ${h(x(l?n==null?void 0:n.status:n==null?void 0:n.txreceipt_status))}`,children:l?n!=null&&n.status?`${x(n==null?void 0:n.status)} `:"--":n!=null&&n.txreceipt_status?`${x(n==null?void 0:n.txreceipt_status)} `:"--"}),a("span",{className:"block text-[14px] md:text-lg font-lato text-black",children:n!=null&&n.timeStamp?k.unix(n==null?void 0:n.timeStamp).format("MMM DD YYYY [at] hh:mm A"):"--"})]}),e("div",{className:"flex justify-between px-4 pt-4 border-t-[1px] border-black mt-4",children:[a("span",{className:"text-sm text-gray-600 md:text-base",children:"From"}),a("span",{className:"text-sm text-gray-600 md:text-base",children:"To"})]}),e("div",{className:"flex justify-between px-4",children:[a("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all mr-[3%] text-left select-none cursor-copy",onClick:()=>g(n==null?void 0:n.from),children:n!=null&&n.from?n==null?void 0:n.from:"--"}),a("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all ml-[3%] text-right select-none cursor-copy",onClick:()=>g(n==null?void 0:n.to),children:n!=null&&n.to?n==null?void 0:n.to:"--"})]}),a("div",{className:"flex justify-between px-4 pt-4 border-t-[1px] border-black mt-4",children:a("span",{className:"text-sm text-agray-600 md:text-base",children:"NONCE"})}),a("div",{className:"flex justify-between px-4",children:a("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all",children:(n==null?void 0:n.nonce)||"--"})}),a("div",{className:"self-center",children:a("button",{className:"transparent-secondary-btn",onClick:()=>{D(`https://${t!=null&&t.isMainNet?"etherscan.io":"ropsten.etherscan.io"}/tx/${n==null?void 0:n.hash}`)},children:"View on EtherScan"})}),e("div",{className:"flex justify-between p-3 mt-5 border-2 border-black rounded-xl",children:[a("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all",children:"Amount"}),a("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all",children:n!=null&&n.value?`${t!=null&&t.isMainNet?N(n==null?void 0:n.value,n==null?void 0:n.tokenDecimal):d.utils.fromWei(n==null?void 0:n.value,"ether")} ${l?n==null?void 0:n.tokenSymbol:"ETH"}`:"--"})]})]})]})};export{P as default};
//# sourceMappingURL=History-34cd4608.js.map
