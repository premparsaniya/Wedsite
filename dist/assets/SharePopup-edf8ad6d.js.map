{"version":3,"file":"SharePopup-edf8ad6d.js","sources":["../../src/components/SharePopup.tsx"],"sourcesContent":["import { FC, ReactNode, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { App_state } from \"~/reduxState\";\r\nimport PopUp from \"./PopUp\";\r\nimport ReportPostBox from \"./ReportPostBox\";\r\n\r\ninterface Props {\r\n  visible: boolean;\r\n  onClose: (b: boolean) => void;\r\n  closeBtnTxt?: string;\r\n  className?: string;\r\n  subClass?: string;\r\n  value: any;\r\n}\r\n\r\nconst SharePopup: FC<Props> = ({\r\n  visible,\r\n  onClose,\r\n  closeBtnTxt,\r\n  className = \"\",\r\n  subClass = \"\",\r\n  value,\r\n}) => {\r\n\r\n  const { user } = useSelector((state: App_state) => state.UserLogin);\r\n\r\n  const token = user?.token;\r\n  const navigate = useNavigate()\r\n  const [loading, setLoading] = useState<boolean>(false)\r\n  const [report, setReport] = useState<boolean>(false);\r\n  const [blockUser, setBlockUser] = useState<boolean>(false)\r\n\r\n  const handleReportPost = () => {\r\n    setReport(!report)\r\n  }\r\n  const handleBlockUserPopup = () => {\r\n    setBlockUser(!blockUser)\r\n  }\r\n\r\n  const handleBlockUser = () => {\r\n    const obj = {\r\n      method: \"block_user\",\r\n      blocked_user: value?.user_id,\r\n    };\r\n    setLoading(true)\r\n    fetch(`${import.meta.env.VITE_PUBLIC_URL}user`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        accept: \"application/json\",\r\n        contentType: \"application/json\",\r\n        version: \"1.0.0\",\r\n        token: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(obj),\r\n    }).then((res) => {\r\n      res.json().then((response) => {\r\n        if (response.status === 1) {\r\n          setLoading(false)\r\n          setBlockUser(!blockUser)\r\n          onClose(false)\r\n          navigate(\"/\")\r\n          toast.success(\"user blocked successfully...\", { position: \"top-center\", autoClose: 1000 });\r\n        } else {\r\n          // console.log(\"else\", response);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  return visible ? (\r\n    <>\r\n      <div\r\n        className={\r\n          className +\r\n          \"fixed text-black flex items-center justify-center overflow-auto z-40 bg-black bg-opacity-40 left-0 right-0 top-0 bottom-0 transition-all duration-300\"\r\n        }\r\n      >\r\n        <div\r\n          className={\r\n            subClass +\r\n            \" bg-white rounded-xl shadow-2xl p-6  sm:w-8/12 xs:w-8/12 mx-10 flex justify-center flex-col\"\r\n          }\r\n        >\r\n          <div className=\"p-3 mb-3 \">\r\n            <div className=\"text-center font-bold text-md cursor-pointer\">\r\n              share profile\r\n            </div>\r\n            <div className=\"flex  items-center justify-center\">\r\n              <div className=\"border border-gray-400 border-xs my-3 w-full\" />\r\n            </div>\r\n            <div className=\"text-center font-bold text-md cursor-pointer\" onClick={handleBlockUserPopup}>\r\n              Block user\r\n            </div>\r\n            {/* <div className=\"flex  items-center justify-center\">\r\n              <div className=\"border border-gray-400 border-xs my-3 w-full\" />\r\n            </div>\r\n            <div className=\"text-center font-bold text-md cursor-pointer\" onClick={handleReportPost}>\r\n              Report user\r\n            </div> */}\r\n          </div>\r\n          <div className=\"flex  items-center justify-center\">\r\n            <button\r\n              onClick={() => onClose(false)}\r\n              className=\"secondary-btn hover:text-white hover:bg-black w-[60%] px-5\"\r\n            >\r\n              {closeBtnTxt || \"Close\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {\r\n        report && <ReportPostBox postPopup={undefined} setPostPopup={onClose} value={value} setReport={setReport} report={report} />\r\n      }\r\n      {\r\n        blockUser && < PopUp message=\"Are you sure want to block this user ?\" btnMsg={\"Block\"} functionHandle={handleBlockUser} closePopup={handleBlockUserPopup} loading={loading} />\r\n      }\r\n    </>) : null;\r\n};\r\n\r\nexport default SharePopup;\r\n"],"names":["SharePopup","visible","onClose","closeBtnTxt","className","subClass","value","user","useSelector","state","token","navigate","useNavigate","loading","setLoading","useState","report","setReport","blockUser","setBlockUser","handleBlockUserPopup","handleBlockUser","obj","res","response","toast","jsxs","Fragment","jsx","ReportPostBox","PopUp"],"mappings":"6KAiBA,MAAMA,EAAwB,CAAC,CAC7B,QAAAC,EACA,QAAAC,EACA,YAAAC,EACA,UAAAC,EAAY,GACZ,SAAAC,EAAW,GACX,MAAAC,CACF,IAAM,CAEJ,KAAM,CAAE,KAAAC,CAAK,EAAIC,EAAaC,GAAqBA,EAAM,SAAS,EAE5DC,EAAQH,GAAA,YAAAA,EAAM,MACdI,EAAWC,IACX,CAACC,EAASC,CAAU,EAAIC,WAAkB,EAAK,EAC/C,CAACC,EAAQC,CAAS,EAAIF,WAAkB,EAAK,EAC7C,CAACG,EAAWC,CAAY,EAAIJ,WAAkB,EAAK,EAKnDK,EAAuB,IAAM,CACjCD,EAAa,CAACD,CAAS,CAAA,EAGnBG,EAAkB,IAAM,CAC5B,MAAMC,EAAM,CACV,OAAQ,aACR,aAAchB,GAAA,YAAAA,EAAO,OAAA,EAEvBQ,EAAW,EAAI,EACT,MAAA,yCAA0C,CAC9C,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,YAAa,mBACb,QAAS,QACT,MAAO,UAAUJ,GACnB,EACA,KAAM,KAAK,UAAUY,CAAG,CAAA,CACzB,EAAE,KAAMC,GAAQ,CACfA,EAAI,KAAK,EAAE,KAAMC,GAAa,CACxBA,EAAS,SAAW,IACtBV,EAAW,EAAK,EAChBK,EAAa,CAACD,CAAS,EACvBhB,EAAQ,EAAK,EACbS,EAAS,GAAG,EACZc,EAAM,QAAQ,+BAAgC,CAAE,SAAU,aAAc,UAAW,IAAM,EAG3F,CACD,CAAA,CACF,CAAA,EAGH,OAAOxB,EAEHyB,EAAAC,EAAA,CAAA,SAAA,CAAAC,EAAC,MAAA,CACC,UACExB,EACA,wJAGF,SAAAsB,EAAC,MAAA,CACC,UACErB,EACA,8FAGF,SAAA,CAACqB,EAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAACE,EAAA,MAAA,CAAI,UAAU,+CAA+C,SAE9D,gBAAA,EACAA,EAAC,OAAI,UAAU,oCACb,WAAC,MAAI,CAAA,UAAU,+CAA+C,CAChE,CAAA,IACC,MAAI,CAAA,UAAU,+CAA+C,QAASR,EAAsB,SAE7F,aAAA,CAAA,EAOF,EACAQ,EAAC,MAAI,CAAA,UAAU,oCACb,SAAAA,EAAC,SAAA,CACC,QAAS,IAAM1B,EAAQ,EAAK,EAC5B,UAAU,6DAET,SAAeC,GAAA,OAAA,CAAA,EAEpB,CAAA,CAAA,CACF,CAAA,CACF,EAEEa,KAAWa,EAAc,CAAA,UAAW,OAAW,aAAc3B,EAAS,MAAAI,EAAc,UAAAW,EAAsB,OAAAD,CAAgB,CAAA,EAG1HE,GAAeU,EAAAE,EAAA,CAAM,QAAQ,yCAAyC,OAAQ,QAAS,eAAgBT,EAAiB,WAAYD,EAAsB,QAAAP,CAAkB,CAAA,CAAA,CAEhL,CAAA,EAAO,IACX"}