{"version":3,"file":"AvailableBalanceCard-df6bca73.js","sources":["../../src/components/TxtInput.tsx","../../src/components/AvailableBalanceCard.tsx"],"sourcesContent":["import { HTMLInputTypeAttribute, InputHTMLAttributes } from \"react\";\n\ninterface Props extends InputHTMLAttributes<HTMLInputElement> {\n    pHolder: string;\n    rIc?: JSX.Element;\n    rLabel?: string;\n    val: string;\n    onChangeT: (s: string) => void;\n    maxLength?: number;\n    props?: HTMLInputTypeAttribute;\n};\n\nconst TxtInput = ({ pHolder, rIc, rLabel, val, onChangeT, maxLength = 150, ...props}: Props) => {\n    return (\n        <div className=\"flex w-full flex-wrap items-stretch mb-3 max-w-md flex-row bg-neutral-100 focus:bg-neutral-200 rounded-lg overflow-hidden\">\n            <input placeholder={pHolder} value={val} onChange={(e) => onChangeT(e.target.value)} maxLength={maxLength} {...props}\n                className=\"px-3 py-3  flex-grow placeholder-neutral-400 text-black text-base border-0 outline-none focus:outline-non ring-0 pr-10 bg-transparent autofill:bg-transparent\"\n            />\n            <span className=\"font-normal text-center text-slate-700 bg-transparent text-base items-center justify-center pr-[2%] py-3\">\n                {rLabel}\n                {rIc}\n            </span>\n        </div>\n    )\n}\n\nexport default TxtInput;","import { useContext, useEffect, useState } from 'react';\nimport { AppContext } from \"~/context\";\nimport Web3 from \"web3\";\nimport { goerlyTestNetURL, mainNetURL, USDbalanceOfEth } from \"~/utils\";\nimport { getWallet, tokenValueFromWei } from \"~/functions\";\nconst { VITE_STATE_COIN_CONTRACT_ADDRESS, VITE_STATE_COIN_CONTRACT_ABI } = import.meta.env;\nimport { ethers } from \"ethers\";\n\nconst AvailableBalanceCard = () => {\n    const { state: { myWallet: { isMainNet, address, privateKey } } } = useContext(AppContext);\n    const { state: { myWallet }, dispatch } = useContext(AppContext);\n    const web3 = new Web3(isMainNet === true ? mainNetURL : goerlyTestNetURL);\n\n    const [stateEthVal, setStateEthVal] = useState<string>(\"0\");\n    const [stateEthUsdVal, setStateEthUsdVal] = useState<string>(\"0\");\n    const [stateBalance, setStateBalance] = useState<string>(\"0\");\n\n    useEffect(() => {\n        async function getStateBalance() {\n            const myContract = new web3.eth.Contract(JSON.parse(VITE_STATE_COIN_CONTRACT_ABI), VITE_STATE_COIN_CONTRACT_ADDRESS)\n            const balance = await myContract.methods.balanceOf(address).call();\n            setStateBalance(tokenValueFromWei(balance, \"18\"));\n        };\n\n        const getETHBalanceUSD = async () => {\n            await fetch(USDbalanceOfEth).then((res) => res.json()).then((res) => {\n                // console.log(\"resETHBalance:\", JSON.stringify(res, null, 2));\n                if (res?.status === \"1\") {\n                    // setStateEthUsdVal(res?.result?.ethusd || \"0\");\n                    getETHBalance(res?.result?.ethusd === \"\" ? \"0\" : res?.result?.ethusd || \"0\")\n                } else setStateEthUsdVal(\"0\");\n            }).catch(() => setStateEthUsdVal(\"0\"));\n        };\n\n        async function getETHBalance(usd: string) {\n            // get ETH Balance from web3 & ethers\n            const balance = await web3.eth.getBalance(address ?? \"\");\n            const balanceETH = ethers.utils.formatEther(balance);\n            setStateEthVal(balanceETH);\n            let toUSD = Number(balanceETH === \"\" ? \"0\" : balanceETH || \"0\") * Number(usd);\n            setStateEthUsdVal(toUSD.toFixed(2)); // console.log(\"balanceETH:\", balanceETH);\n        };\n        if ((privateKey === null) || (address === null)) getWallet({ myWallet, dispatch })\n        else { isMainNet && getStateBalance(); getETHBalanceUSD(); };\n    }, [address, isMainNet]);\n\n    return (\n        <div className=\"bg-black border border-gray-200 shadow-md rounded-xl max-w-lg w-full p-3.5\">\n            <span className=\"mb-2 text-lg text-center text-white font-lato\">Available Balance: </span>\n            <span className=\"mb-2 text-lg font-semibold text-center text-white font-lato\">$ {stateEthUsdVal}</span>\n            <section className=\"flex flex-col justify-center\">\n                <div className=\"flex flex-row my-2 text-2xl font-normal text-white font-lato\">\n                    {\"STATE \"}\n                    <h3 className=\"mx-3 text-2xl font-bold text-white font-lato\">{stateBalance}</h3>\n                </div>\n                <div className=\"flex flex-row text-2xl font-normal text-white font-lato\">\n                    {\"ETH \"}\n                    <h3 className=\"mx-3 text-2xl font-bold text-white font-lato\">{stateEthVal}</h3>\n                </div>\n            </section>\n        </div>\n    )\n};\n\nexport default AvailableBalanceCard;"],"names":["TxtInput","pHolder","rIc","rLabel","val","onChangeT","maxLength","props","jsxs","jsx","e","VITE_STATE_COIN_CONTRACT_ADDRESS","VITE_STATE_COIN_CONTRACT_ABI","AvailableBalanceCard","isMainNet","address","privateKey","useContext","AppContext","myWallet","dispatch","web3","Web3","mainNetURL","goerlyTestNetURL","stateEthVal","setStateEthVal","useState","stateEthUsdVal","setStateEthUsdVal","stateBalance","setStateBalance","useEffect","getStateBalance","balance","tokenValueFromWei","getETHBalanceUSD","USDbalanceOfEth","res","getETHBalance","_a","_b","usd","balanceETH","ethers.utils.formatEther","toUSD","getWallet"],"mappings":"oOAYM,MAAAA,EAAW,CAAC,CAAE,QAAAC,EAAS,IAAAC,EAAK,OAAAC,EAAQ,IAAAC,EAAK,UAAAC,EAAW,UAAAC,EAAY,OAAQC,CAAA,IAEtEC,EAAC,MAAI,CAAA,UAAU,4HACX,SAAA,CAAAC,EAAC,QAAA,CAAM,YAAaR,EAAS,MAAOG,EAAK,SAAWM,GAAML,EAAUK,EAAE,OAAO,KAAK,EAAG,UAAAJ,EAAuB,GAAGC,EAC3G,UAAU,+JAAA,CACd,EACAC,EAAC,OAAK,CAAA,UAAU,2GACX,SAAA,CAAAL,EACAD,CAAA,EACL,CACJ,CAAA,CAAA,ECjBF,CAAE,iCAAAS,EAAkC,6BAAAC,GAAiC,6hWAGrEC,EAAuB,IAAM,CAC/B,KAAM,CAAE,MAAO,CAAE,SAAU,CAAE,UAAAC,EAAW,QAAAC,EAAS,WAAAC,EAAa,CAAA,EAAMC,EAAA,WAAWC,CAAU,EACnF,CAAE,MAAO,CAAE,SAAAC,CAAA,EAAY,SAAAC,GAAaH,EAAAA,WAAWC,CAAU,EACzDG,EAAO,IAAIC,EAAKR,IAAc,GAAOS,EAAaC,CAAgB,EAElE,CAACC,EAAaC,CAAc,EAAIC,WAAiB,GAAG,EACpD,CAACC,EAAgBC,CAAiB,EAAIF,WAAiB,GAAG,EAC1D,CAACG,EAAcC,CAAe,EAAIJ,WAAiB,GAAG,EAE5DK,OAAAA,EAAAA,UAAU,IAAM,CACZ,eAAeC,GAAkB,CAE7B,MAAMC,EAAU,MADG,IAAIb,EAAK,IAAI,SAAS,KAAK,MAAMT,CAA4B,EAAGD,CAAgC,EAClF,QAAQ,UAAUI,CAAO,EAAE,OAC5CgB,EAAAI,EAAkBD,EAAS,IAAI,CAAC,CACpD,CAEA,MAAME,EAAmB,SAAY,CACjC,MAAM,MAAMC,CAAe,EAAE,KAAMC,GAAQA,EAAI,KAAM,CAAA,EAAE,KAAMA,GAAQ,UAE7DA,GAAA,YAAAA,EAAK,UAAW,IAEFC,IAAAC,EAAAF,GAAA,YAAAA,EAAK,SAAL,YAAAE,EAAa,UAAW,GAAK,MAAMC,EAAAH,GAAA,YAAAA,EAAK,SAAL,YAAAG,EAAa,SAAU,GAAG,EACxEZ,EAAkB,GAAG,CAC/B,CAAA,EAAE,MAAM,IAAMA,EAAkB,GAAG,CAAC,CAAA,EAGzC,eAAeU,EAAcG,EAAa,CAEtC,MAAMR,EAAU,MAAMb,EAAK,IAAI,WAAWN,GAAW,EAAE,EACjD4B,EAAaC,EAAyBV,CAAO,EACnDR,EAAeiB,CAAU,EACrB,IAAAE,EAAQ,OAAOF,IAAe,GAAK,IAAMA,GAAc,GAAG,EAAI,OAAOD,CAAG,EAC1Db,EAAAgB,EAAM,QAAQ,CAAC,CAAC,CACtC,CACK7B,IAAe,MAAUD,IAAY,KAAiB+B,EAAA,CAAE,SAAA3B,EAAU,SAAAC,CAAA,CAAU,GAC1EN,GAAamB,EAAgB,EAAoBG,IAAI,EAC7D,CAACrB,EAASD,CAAS,CAAC,EAGnBN,EAAC,MAAI,CAAA,UAAU,6EACX,SAAA,CAACC,EAAA,OAAA,CAAK,UAAU,gDAAgD,SAAmB,sBAAA,EACnFD,EAAC,OAAK,CAAA,UAAU,8DAA8D,SAAA,CAAA,KAAGoB,CAAA,EAAe,EAChGpB,EAAC,UAAQ,CAAA,UAAU,+BACf,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,+DACV,SAAA,CAAA,SACAC,EAAA,KAAA,CAAG,UAAU,+CAAgD,SAAaqB,EAAA,CAAA,EAC/E,EACAtB,EAAC,MAAI,CAAA,UAAU,0DACV,SAAA,CAAA,OACAC,EAAA,KAAA,CAAG,UAAU,+CAAgD,SAAYgB,EAAA,CAAA,EAC9E,CAAA,EACJ,CACJ,CAAA,CAAA,CAER"}