{"version":3,"file":"Messages-be590c9f.js","sources":["../../src/assets/svg/MSG_ICON.svg","../../src/assets/svg/emoji_icon.svg","../../src/assets/svg/play.svg","../../src/assets/svg/ADD_ICON.svg","../../src/pages/Messages.tsx"],"sourcesContent":["export default \"__VITE_ASSET__b9a6175f__\"","export default \"__VITE_ASSET__ce365ea9__\"","export default \"__VITE_ASSET__455d0c18__\"","export default \"__VITE_ASSET__d3b400df__\"","import { Fragment, useEffect, useRef, useState } from \"react\";\nimport { db, ref, set, onValue, push, child, getStorage, storageRef, uploadString, getDownloadURL, update, orderByKey } from \"~/utils\";\nimport { ADD_ICON, BACK_ICON, BLACK_LOGO, CLOSE_ICON, DEF_USER, EMOJI_ICON, MSG_ICON, PLAY_ICON, WHITE_MORE_ICON } from \"~/assets\";\nimport { EmojiBoard, Loading, Modal, SpinningLoader, UserListPopup } from \"~/components\";\nimport { useSelector } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport moment from \"moment\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport EmojiPicker from \"emoji-picker-react\";\nimport { limitToFirst, limitToLast, orderByChild, query } from \"firebase/database\";\nimport PostDetails from \"~/pages/PostDetails\";\n\nfunction Messages() {\n  const storage = getStorage();\n  const navigate = useNavigate();\n  const { chatroomId } = useParams()\n  const { user } = useSelector((state: any) => state.UserLogin);\n  const token = user?.token;\n  const [chatRoom, setChatRoom] = useState<boolean>(true);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [handleState, setHandleState] = useState<boolean>(false);\n  const [handleUserListPopup, setHandleUserListPopup] = useState<boolean>(false);\n  const [chatData, setChatData] = useState<any[]>([]);\n  const [msgData, setMsgData] = useState<any[]>([]);\n  const [userData, setUserData] = useState<any>(null);\n  const [newUserData, setNewUserData] = useState<any>(null);\n  const [textMsg, setTextMsg] = useState<string>(\"\")\n  const [uploading, setUploading] = useState<boolean>(false);\n  const [reactionPopup, setReactionPopup] = useState<boolean>(false);\n  const [reactionId, setReactionId] = useState<string>(\"\")\n  // const [reactionTitle, setReactionTitle] = useState<any>(\"\")\n  const [editMsgToggle, setEditMsgToggle] = useState<boolean>(false);\n  const [editMsgId, setEditMsgId] = useState<string>(\"\")\n  const [editReaction, setEditReaction] = useState<any[]>([])\n  const [previewClickToggle, setPreviewClickToggle] = useState<boolean>(false);\n  const [toggleDetails, setToggleDetails] = useState<boolean>(false);\n  const [previewUrl, setPreviewUrl] = useState<any>(null)\n  const [newFileUrl, setNewFileUrl] = useState<any>(\"\")\n  const [newThumbnail, setNewThumbnail] = useState<any>(\"\")\n  const [newItem, setNewItem] = useState<any>()\n  const [fileTypeForN, setFileTypeForN] = useState<string>(\"\")\n  const [selectedEmoji, setSelectedEmoji] = useState<string>(\"\");\n\n  const [toggleEmojiBtn, setToggleEmojiBtn] = useState<boolean>(false);\n\n  const msgListRef = ref(db, `messages/${userData?.chatRoomId}`);\n  const newMsgRef = push(msgListRef);\n  let uniqueId = newMsgRef.key\n\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  // ------------ for scroll ----------\n  useEffect(() => {\n    bottomRef.current?.scrollIntoView({ behavior: \"auto\" });\n  }, [msgData]);\n\n  useEffect(() => {\n    getChatHistoryData()\n  }, [chatroomId]);\n\n  useEffect(() => {\n    if (chatroomId) {\n      const dbRef = ref(db, `messages/${chatroomId}`);\n      onValue(dbRef, (snapshot) => {\n        let msgArr: any[] = []\n        snapshot.forEach((childSnapshot) => {\n          const childKey = childSnapshot.key;\n          const childData = childSnapshot.val();\n          msgArr.push(childData)\n        });\n        // setChildKey(item.chatRoomId)\n        setMsgData(msgArr)\n      });\n    }\n  }, [chatroomId])\n\n  // ---------------- send chat push API for generate notification -------------------\n\n  const sendChatPush = () => {\n    const obj = {\n      method: \"send_chat_push\",\n      chat_message: (fileTypeForN === \"\" ? textMsg : fileTypeForN),\n      receiver_id: userData?.opp_userId,\n      sender_user_name: user?.data?.name,\n      user_id: user?.data?.user_id,\n    };\n    fetch(`${import.meta.env.VITE_API_URL}user`, {\n      method: \"POST\",\n      headers: {\n        accept: \"application/json\",\n        contentType: \"application/json\",\n        version: \"1.0.0\",\n        token: `Bearer ${token}`,\n      },\n      body: JSON.stringify(obj),\n    }).then((res) => {\n      res.json().then((response) => {\n        if (response.status === 1) {          \n        } else {\n          // console.log(\"else\", response);\n        }\n      });\n    });\n  }\n  // ------------ generate unique id ----------------------\n  function getUniqueChatId(otherUserId: string) {\n    let intUserId = parseInt(user?.data?.user_id)\n    let intOtherUserId = parseInt(otherUserId)    \n    let result = (intUserId * intOtherUserId)    \n    return result.toString()\n  }\n  // ------------- text input onChange ---------------------\n  // const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>, emoji?: any) => {\n  //   setTextMsg(e.target.value + emoji)\n  // };\n\n  const addEmoji = (emoji: any) => {\n    setTextMsg(textMsg + emoji);\n  };\n\n  // ----------------- file input onChange --------------------\n\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      setUploading(true);\n      const reader = new FileReader();\n      // check before / string is video or image in file type\n      let isVid = e.target.files[0].type.split(\"/\")[0] === \"video\"\n\n      const fileType = e?.target?.files[0].type;\n      const thumbnail64 = isVid ? (await generateVideoThumbnailBase64(e.target.files[0])) as string : \"\";\n      reader.addEventListener('load', () => {\n        sendFile(thumbnail64, reader.result, fileType)\n      });\n      reader.readAsDataURL(e.target.files[0]);\n    }\n  }\n  // ------------------- generate video base64 thumbnail ---------------\n  const generateVideoThumbnailBase64 = (file: any) => {\n    return new Promise((resolve, reject) => {\n      const canvas = document.createElement(\"canvas\");\n      const video = document.createElement(\"video\");\n\n      // this is important\n      video.autoplay = true;\n      video.muted = true;\n      video.src = URL.createObjectURL(file);\n\n      video.onloadeddata = () => {\n        let ctx = canvas.getContext(\"2d\");\n\n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n\n        ctx?.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n        video.pause();\n        return resolve(canvas.toDataURL(\"image/jpg\"));\n      };\n    });\n  };\n\n  function uploadThumbnail(vidUri: string, thumbBase64: string, fileType: string) {\n    const newStorageRef = storageRef(storage, `videos/${uniqueId}.jpeg`);\n\n    uploadString(newStorageRef, thumbBase64, 'data_url').then((snapshot) => {\n      getDownloadURL(storageRef(storage, `videos/${uniqueId}.jpeg`))\n        .then((url) => {          \n          sendMsg(url, vidUri, fileType);\n          toast.success(\"Video uploaded successful\", { position: \"top-center\" });\n        })\n        .catch((error) => {\n          // Handle any errors          \n          toast.error(\"thumbnail error\", { position: \"top-center\" });\n        });\n    })\n  }\n  // --------------------- send file function -------------------\n  // fileType === \"video/mp4\" ? thumbnail :\n  const sendFile = (thumbBase64: string, img: string | ArrayBuffer | null, fileType: string) => {\n    // setFileTypeForN(fileType === \"image/jpeg\" ? \"image\" : \"video\")\n    if (img === null) { setUploading(false); return; }\n    const newStorageRef = storageRef(storage, fileType === \"image/jpeg\" ? `images/${uniqueId}.jpeg` : `videos/${uniqueId}.mp4`);\n\n    uploadString(newStorageRef, img as string, 'data_url').then((snapshot) => {\n\n      getDownloadURL(storageRef(storage, fileType === \"image/jpeg\" ? `images/${uniqueId}.jpeg` : `videos/${uniqueId}.mp4`))\n        .then((url) => {          \n          // uploadThumbnail(url, thumbBase64, fileType);\n          if (fileType === \"image/jpeg\") {\n            sendMsg(\"\", url, fileType); setUploading(false);\n            toast.success(\"Image uploaded successful\", { position: \"top-center\" });\n            sendChatPush()\n          } else { uploadThumbnail(url, thumbBase64, fileType) };\n        })\n        .catch((error) => {\n          // Handle any errors\n          setUploading(false); console.error(error);\n          toast.error(\"Error while uploading file\", { position: \"top-center\" });\n        });\n    })\n  };\n\n  // ---------------- user list popup handle ----------------\n  const handleUserList = () => {\n    setHandleUserListPopup(!handleUserListPopup)\n  }\n\n  // --------------------- go chat click --------------------\n  const goChat = (item: any) => {\n\n    let generateId = getUniqueChatId(item?.user_id)\n    const msgListRef = ref(db, `chathistory/${user?.data?.user_id}`);\n    const newMsgRef = child(msgListRef, generateId);\n\n    onValue(newMsgRef, (snapshot) => {\n      if (!snapshot.exists()) {\n\n        let chatHistoryObj = {\n          chatHistoryId: generateId,\n          chatRoomId: generateId,\n          createdAt: `${Date.now().toString()}`,\n          last_message: \"\",\n          opp_userChatHistoryId: generateId,\n          opp_userId: item?.user_id,\n          opp_username: item?.name,\n          opp_userprofile: item?.photo,\n        }\n        set(newMsgRef, chatHistoryObj);\n\n        // ---------------- opp user set chat history ---------------\n\n        const oppMsgListRef = ref(db, `chathistory/${item?.user_id}`);\n        const oopNewMsgRef = child(oppMsgListRef, generateId);\n\n        let oppChatHistoryObj = {\n          chatHistoryId: generateId,\n          chatRoomId: generateId,\n          createdAt: `${Date.now().toString()}`,\n          last_message: \"\",\n          opp_userChatHistoryId: generateId,\n          opp_userId: user?.data?.user_id,\n          opp_username: user?.data?.name,\n          opp_userprofile: user?.data?.photo,\n        }\n        set(oopNewMsgRef, oppChatHistoryObj);\n\n      }\n    });\n\n    // let chatHistoryObj = {\n    //   chatHistoryId: generateId,\n    //   chatRoomId: generateId,\n    //   createdAt: `${Date.now().toString()}`,\n    //   last_message: \"\" || `${msgData[msgData.length - 1]?.text || msgData[msgData.length - 1]?.messageType}`,\n    //   opp_userChatHistoryId: generateId,\n    //   opp_userId: item?.user_id,\n    //   opp_username: item?.name,\n    //   opp_userprofile: item?.photo,\n    // }\n    // set(newMsgRef, chatHistoryObj);\n    // setHandleUserListPopup(false)\n    // setChatRoom(false)\n    // setHandleState(true);\n    // setNewUserData(item)\n\n    // ---------------- opp user set chat history ---------------\n\n    // const oppMsgListRef = ref(db, `chathistory/${item?.user_id}`);\n    // const oopNewMsgRef = child(oppMsgListRef, generateId);\n\n    // let oppChatHistoryObj = {\n    //   chatHistoryId: generateId,\n    //   chatRoomId: generateId,\n    //   createdAt: `${Date.now().toString()}`,\n    //   last_message: \"\" || `${msgData[msgData.length - 1]?.text || msgData[msgData.length - 1]?.messageType}`,\n    //   opp_userChatHistoryId: generateId,\n    //   opp_userId: user?.data?.user_id,\n    //   opp_username: user?.data?.name,\n    //   opp_userprofile: user?.data?.photo,\n    // }\n    // set(oopNewMsgRef, oppChatHistoryObj);\n\n    // ----------------- create chat Room --------------------------------\n\n    const chatRoomRef = ref(db, `chatroom/`);\n    const newChatRoomRef = child(chatRoomRef, generateId);\n\n    if (chatData.map((item) => item.chatHistoryId !== generateId)) {\n      let chatRoomObj = {\n        channel_Id: generateId,\n        opp_userId: item?.user_id,\n        user_id: user?.data?.user_id,\n      }\n      update(newChatRoomRef, chatRoomObj);\n    } else {\n      let chatRoomObj = {\n        channel_Id: generateId,\n        opp_userId: item?.user_id,\n        user_id: user?.data?.user_id,\n      }\n      set(newChatRoomRef, chatRoomObj);\n    }\n\n    // -------------------- For get messages ------------------------\n\n    setHandleUserListPopup(false)\n    setChatRoom(false)\n    setHandleState(true);\n    setNewUserData(item)\n\n    const dbRef = ref(db, `messages/${generateId}`);\n    onValue(dbRef, (snapshot) => {\n      let msgArr: any[] = []\n      snapshot.forEach((childSnapshot) => {\n        const childKey = childSnapshot.key;\n        const childData = childSnapshot.val();\n        msgArr.push(childData)\n      });\n      setMsgData(msgArr)\n    });\n    navigate(`/messages/${generateId}`)\n  }\n\n  // -------------- get user chat history data ----------\n\n  const getChatHistoryData = () => {\n    setLoading(true);\n    const dbRef = query(ref(db, `chathistory/${user?.data?.user_id}`), orderByChild(\"createdAt\"));\n    onValue(dbRef, (snapshot) => {\n      let chatArr: any[] = []\n      snapshot.forEach((childSnapshot) => {\n        const childKey = childSnapshot.key;\n        const childData = childSnapshot.val();\n        chatArr.push(childData)\n      });\n      // orderByChild(`${user?.data?.user_id}/createdAt`)\n      setLoading(false);\n      // console.log(\"chatArr\", chatArr)\n      setChatData(chatArr.reverse())\n      if (chatroomId) {\n        let idx = chatArr.findIndex((obj: any) => obj?.chatRoomId === chatroomId);\n        setUserData(chatArr[idx])\n      }\n    },);\n  }\n\n  // -------------- chat room open click ---------------\n\n  const handleChatRoom = (item: any) => {\n    navigate(`/messages/${item?.chatRoomId}`)\n    setUserData(item)\n    setChatRoom(false)\n    setHandleState(false);\n    const dbRef = ref(db, `messages/${item?.chatRoomId}`);\n    onValue(dbRef, (snapshot) => {\n      let msgArr: any[] = []\n      snapshot.forEach((childSnapshot) => {\n        const childKey = childSnapshot.key;\n        const childData = childSnapshot.val();\n        msgArr.push(childData)\n      });\n      // setChildKey(item.chatRoomId)\n      setMsgData(msgArr)\n    });\n  }\n\n  // ---------- preview Image and Video click -------------\n\n  const previewClick = (item: any) => {\n    setPreviewUrl(item)\n    if (item?.chatPostID) {\n      setToggleDetails(!toggleDetails)\n    } else {\n      setPreviewClickToggle(!previewClickToggle)\n    }\n  }\n  // ----------------- edit Msg Toggle ----------------\n\n  const handleEditMsgToggle = (item: any) => {\n    setEditMsgId(item?.id)\n    setEditReaction(item?.arrReaction)\n    setEditMsgToggle(!editMsgToggle)\n  }\n  // ----------------- reaction Toggle ----------------\n\n  const handleReactionToggle = (item: any) => {\n    setReactionId(item?.id)\n    setReactionPopup(!reactionPopup)\n    setNewItem(item)\n  }\n\n  // ------------------- Reaction Click ------------------\n\n  const reactionClick = (reactionName?: string, item?: any) => {\n    // console.log(\"reactionName\", reactionName, newItem, userData);\n    setReactionPopup(!reactionPopup);\n\n    let oppUserId = userData?.opp_userId;\n    let myUserId = user?.data?.user_id;\n    let chatRoomId = userData?.chatRoomId;\n\n    // check if reaction array is available or not\n    if (newItem?.arrReaction) {\n      // find my reaction index & opp reaction index\n      let myReactionIdx = newItem?.arrReaction?.findIndex((item: any) => item?.sendBy === myUserId);\n      let oppReactionIdx = newItem?.arrReaction?.findIndex((item: any) => item?.sendBy === oppUserId);\n      // check if my reaction is available or not\n      const reactionRef = ref(db, `messages/${chatRoomId}/${newItem?.id}`);\n      if (myReactionIdx !== -1) {\n        // if my reaction is available then check if same reaction is there or not\n        if (newItem?.arrReaction[myReactionIdx]?.reaction === reactionName) {\n          // if same reaction is there then remove my reaction\n          update(reactionRef, { arrReaction: [{ reaction: \"\", sendBy: myUserId }, { reaction: newItem?.arrReaction[oppReactionIdx]?.reaction, sendBy: oppUserId }] });          \n        } else {\n          // if same reaction is not there then update my reaction\n          update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: newItem?.arrReaction[oppReactionIdx]?.reaction, sendBy: oppUserId }] });          \n        }\n      } // if my reaction is not available then check if opp reaction is available or not\n      else {\n        // if opp reaction is available then update opp reaction\n        if (oppReactionIdx !== -1) {\n          update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: newItem?.arrReaction[oppReactionIdx]?.reaction, sendBy: oppUserId }] });\n        }\n        // if opp reaction is not available then add my reaction\n        else {\n          update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: \"\", sendBy: oppUserId }] });\n        }\n      }\n    } else {\n      // if reaction array is not available then add reaction\n      const reactionRef = ref(db, `messages/${chatRoomId}/${newItem?.id}`);\n      update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: \"\", sendBy: oppUserId }] });\n    }\n    return;\n  };\n\n  // --------------- send msg ------------------------\n\n  const sendMsg = (thumUrl?: string, fileUrl?: string, fileType?: string) => {\n    setFileTypeForN(fileType === \"image/jpeg\" ? \"image\" : \"video\")\n    if (editMsgId) {\n      const msgListRef = ref(db, `messages/${userData?.chatRoomId}/${editMsgId}`);\n\n      let updatedMsgObj =\n        editReaction?.length > 0 ?\n          {\n            arrReaction: editReaction[1] !== false ? [{ reaction: editReaction[0]?.reaction, sendBy: editReaction[0]?.sendBy }] : [{ reaction: editReaction[0]?.reaction, sendBy: editReaction[0]?.sendBy }, { reaction: editReaction[1]?.reaction, sendBy: editReaction[1]?.sendBy }],\n            chatroomId: userData?.chatRoomId,\n            createdAt: `${Date.now().toString()}`,\n            id: editMsgId,\n            messageBy: user?.data?.user_id,\n            messageType: \"text\",\n            messagerName: userData?.opp_username,\n            text: textMsg,\n          } :\n          {\n            chatroomId: userData?.chatRoomId,\n            createdAt: `${Date.now().toString()}`,\n            id: editMsgId,\n            messageBy: user?.data?.user_id,\n            messageType: \"text\",\n            messagerName: userData?.opp_username,\n            text: textMsg,\n          }\n\n      update(msgListRef, updatedMsgObj);\n      setTextMsg(\"\");\n      setEditMsgId(\"\");\n      setEditReaction([])\n    } else {\n      let sendMsgObj =\n        fileType === \"image/jpeg\" ?\n          {\n            // arrReaction: [{ reaction: \"\", sendBy: \"\" }],\n            chatImageURL: fileUrl,\n            chatroomId: userData?.chatRoomId,\n            createdAt: `${Date.now().toString()}`,\n            id: uniqueId,\n            messageBy: user?.data?.user_id,\n            messageType: \"image\",\n            messagerName: userData?.opp_username,\n            text: \"\",\n          }\n          : fileType === \"video/mp4\" ?\n            {\n              // arrReaction: [{ reaction: \"\", sendBy: \"\" }],              \n              chatVideoThumbnail: thumUrl,\n              chatVideoURL: fileUrl,\n              chatroomId: userData?.chatRoomId,\n              createdAt: `${Date.now().toString()}`,\n              id: uniqueId,\n              messageBy: user?.data?.user_id,\n              messageType: \"video\" || \"post\",\n              messagerName: userData?.opp_username,\n              text: \"\",\n            }\n            :\n            {\n              // arrReaction: [{ reaction: \"\", sendBy: \"\" }],\n              chatroomId: userData?.chatRoomId,\n              createdAt: `${Date.now().toString()}`,\n              id: uniqueId,\n              messageBy: user?.data?.user_id,\n              messageType: \"text\",\n              messagerName: userData?.opp_username,\n              text: textMsg,\n            }\n      set(newMsgRef, sendMsgObj);\n      setTextMsg(\"\");\n      setUploading(false);\n    }\n    setNewFileUrl(fileUrl)\n    setNewThumbnail(thumUrl)\n    sendChatPush()\n\n    let generateId = getUniqueChatId(userData?.opp_userId)\n\n    const msgListRef = ref(db, `chathistory/${user?.data?.user_id}`);\n    const newChatRef = child(msgListRef, generateId);\n\n    let chatHistoryObj = {\n      chatHistoryId: generateId,\n      chatRoomId: generateId,\n      createdAt: `${Date.now().toString()}`,\n      last_message: textMsg || (fileType === \"image/jpeg\" ? \"image\" : \"video\"),\n      opp_userChatHistoryId: generateId,\n      opp_userId: userData?.opp_userId,\n      opp_username: userData?.opp_username,\n      opp_userprofile: userData?.opp_userprofile,\n    }\n    update(newChatRef, chatHistoryObj);\n\n    // setHandleUserListPopup(false)\n    // setChatRoom(false)\n    // setHandleState(true);\n    // setNewUserData(item)\n\n    // ---------------- opp user set chat history ---------------\n\n    const oppMsgListRef = ref(db, `chathistory/${userData?.opp_userId}`);\n    const oopNewMsgRef = child(oppMsgListRef, generateId);\n\n    let oppChatHistoryObj = {\n      chatHistoryId: generateId,\n      chatRoomId: generateId,\n      createdAt: `${Date.now().toString()}`,\n      last_message: textMsg || (fileType === \"image/jpeg\" ? \"image\" : \"video\"),\n      opp_userChatHistoryId: generateId,\n      opp_userId: user?.data?.user_id,\n      opp_username: user?.data?.name,\n      opp_userprofile: user?.data?.photo,\n    }\n    update(oopNewMsgRef, oppChatHistoryObj);\n  }\n  // --------------- edit msg ----------------------\n\n  const editMsg = (item?: any) => {\n    setEditMsgToggle(!editMsgToggle)\n    setTextMsg(item?.text)\n  }\n\n  const openEmojiBoard = () => {\n    setToggleEmojiBtn(!toggleEmojiBtn)\n  }\n\n  const focusHandle = () => {\n    setToggleEmojiBtn(false)\n  }\n  const backBtnClick = () => {\n    setChatRoom(!chatRoom)\n    navigate(\"/messages\")\n    setMsgData([])\n  }\n  return (\n    <section className=\"flex flex-col pt-14\">\n      {/* <div className=\"discover-box\"> */}\n      {/* <div className=\"discover-header\">Messages</div> */}\n      {/* <div className=\"discover-border__\"> */}\n      {/* {chatRoom === false ? (\n            <div\n              className=\"discover-follow-list-box\"\n              onClick={() => {\n                setChatRoom(true);\n              }}\n            >\n              <div className=\"discover-follow-list\">\n                <div className=\"discover-follow-list-flex\">\n                  <img src={DEF_USER} alt=\"Profile\" className=\"profile-size\" />\n                  <div className=\"user_name\">\n                    <span>Mohit Seth</span>\n                    <span className=\"notification-font_\">Hiii</span>\n                  </div>\n                </div>\n                <div className=\"notification-font_\">07:12PM</div>\n              </div>\n            </div>\n          ) : (\n            <>\n              <div className=\"messages_flex\">\n                <img\n                  src={BACK_ICON}\n                  alt=\"Profile\"\n                  onClick={() => {\n                    setChatRoom(false);\n                  }}\n                />\n                <div className=\"messages_user_name\">\n                  <span className=\"messages_name_text\">Mohit Seth</span>\n                </div>\n              </div>\n             \n            </>\n          )} */}\n      <div className=\"min-w-screen  h-[100%]\">\n        <div className=\"min-w-full rounded lg:grid lg:grid-cols-3 \">\n\n          <div\n            className={`border-r border-gray-300 lg:col-span-1  ${chatRoom ? \"\" : \" lg:flex xl:flex  sm:hidden md:hidden xs:hidden\"\n              }`}\n          >\n            {/* <div className=\"mx-3 my-3\">\n              <div className=\"relative text-gray-600\">\n                <span className=\"absolute inset-y-0 left-0 flex items-center pl-2\">\n                  <svg fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" className=\"w-6 h-6 text-gray-300\">\n                    <path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                  </svg>\n                </span>\n                <input type=\"search\" className=\"block w-full py-2 pl-10 bg-gray-100 rounded outline-none\" name=\"search\" placeholder=\"Search\" required />\n              </div>\n            </div> */}\n            <ul className=\"overflow-auto min-h-[calc(100vh-60px)] w-full flex flex-col\">\n              <>\n                <div className=\"w-full my-2 mb-2 flex justify-between items-center \" >\n                  <h2 className=\"ml-2 text-lg text-gray-600\">Chats</h2>\n                  <img src={ADD_ICON} alt=\"ADD_ICON\" className=\"w-[35px]\" onClick={handleUserList} />\n                </div>\n                {!loading ? (\n                  chatData.length > 0 ? (\n                    chatData.map((item: any, index: any) => {\n                      return (\n                        <li key={index} >\n                          <span\n                            onClick={() => handleChatRoom(item)}\n                            className={`${userData?.opp_username === item?.opp_username ? \"bg-gray-100\" : \"\"}  flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 cursor-pointer hover:bg-gray-100 focus:outline-none`}\n                          >\n                            <img\n                              className=\"object-cover w-10 h-10 rounded-full\"\n                              src={item?.opp_userprofile || DEF_USER}\n                              alt=\"username\"\n                              crossOrigin=\"anonymous\"\n                            />\n                            <div className=\"w-full pb-2\">\n                              <div className=\"flex justify-between\">\n                                <span className=\"block ml-2 font-semibold text-gray-600\">\n                                  {item?.opp_username}\n                                </span>\n                                <span className=\"block ml-2 text-sm text-gray-600\">\n                                  {moment.unix(item?.createdAt / 1000).format(\"LT\")}\n                                </span>\n                              </div>\n                              <span className=\"block ml-2 text-sm text-gray-600\">\n                                {item?.last_message}\n                              </span>\n                            </div>\n                          </span>\n                        </li>\n                      )\n                    })\n                  ) : (\n                    <div className=\"no-msg center flex flex-1 justify-center items-center flex-col min-h-full \">\n                      <img src={MSG_ICON} alt=\"msg\" />\n                      <span className=\"block text-sm text-gray-600\">\n                        No Messages\n                      </span>\n                    </div>\n                  )) : <Loading />\n                }\n              </>\n            </ul>\n          </div>\n          {!chatRoom || chatroomId ? (\n            <div className={`${chatRoom ? \"lg:flex xl:flex sm:hidden md:hidden xs:hidden\" : \"\"} lg:col-span-2 lg:block`}              >\n              <div className=\"relative w-full mt-2\">\n                <div className=\"relative flex items-center px-3 border-b border-gray-300 \">\n                  <img src={BACK_ICON} alt=\"Profile\" className=\"mb-2 block lg:hidden\" onClick={backBtnClick} />\n                  <img\n                    className={`object-cover w-10 h-10 rounded-full mb-2 ml-6 lg:ml-3 ${userData?.opp_userId ? \"cursor-pointer\" : \"\"}`}\n                    src={(handleState ? newUserData.photo : userData?.opp_userprofile) || DEF_USER}\n                    alt=\"username\"\n                    onClick={() => userData?.opp_userId && navigate(`/userprofile/${userData?.opp_userId}`)}\n                    crossOrigin=\"anonymous\"\n                  />\n                  <span className=\"block ml-2 font-bold text-gray-600 mb-2\">\n                    {handleState ? newUserData?.name : userData?.opp_username}\n                  </span>\n                </div>\n                <div className=\"relative w-full px-6 overflow-y-auto h-[calc(100vh-12rem)]\">\n                  <ul className=\"space-y-2\">\n                    {/* ============================== VIDEO VIEW ================================== */}\n                    {msgData.map((item: any, index: number) => {\n                      return (<Fragment key={index} >\n                        {\n                          (item?.messageType === \"post\" || item?.messageType === \"video\" || item?.messageType === \"image\") ?\n                            item?.messageBy !== user?.data?.user_id ?\n                              (<li className=\"flex justify-start relative\">\n                                <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xs text-black bg-gray-100 rounded-t-xl rounded-r-xl min-w-[12rem] min-h-[12rem]  `}> {/* my IMG msg */}\n                                  <img\n                                    className=\"block rounded-t-lg h-[200px] w-[200px] object-cover\"\n                                    crossOrigin=\"anonymous\"\n                                    src={item?.chatVideoThumbnail || item?.chatImageURL}\n                                    alt=\"IMG\"\n                                    onClick={() => previewClick(item)}\n                                  />\n                                  {item?.messageType === \"image\" ? null\n                                    : (\n                                      <img\n                                        className=\"block cursor-pointer rounded-t-lg absolute top-[calc(50%-21px)] left-[calc(50%-21px)]\"\n                                        src={PLAY_ICON}\n                                        alt=\"IMG\"\n                                        onClick={() => previewClick(item)}\n                                        crossOrigin=\"anonymous\"\n                                      />\n                                    )}\n                                  <div className=\"flex justify-between align-baseline \" >\n                                    <span className=\"text-gray-500 text-xs text-left pl-2 flex justify-center flex-col mr-2 \">\n                                      {moment.unix(item?.createdAt / 1000).format(\"LT\")}\n                                    </span>\n                                    <img src={EMOJI_ICON} alt=\"EMOJI_ICON\" className=\"w-5 cursor-pointer mr-2 text-white \" onClick={() => handleReactionToggle(item)} />\n                                  </div>\n                                  {reactionPopup && (reactionId === item?.id) &&\n                                    <div role=\"tooltip\" className=\"absolute bottom-5 left-0  z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\n                                      <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\n                                        <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">👍</span>\n                                        <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">❤️</span>\n                                        <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">🔥</span>\n                                        <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">👏</span>\n                                        <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">😂</span>\n                                      </div>\n                                    </div>}\n                                  {\n                                    item?.arrReaction &&\n                                    <div className={`${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10 right-0`}>\n                                      {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Heart\" && <span>❤️</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Fire\" && <span>🔥</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Claps\" && <span>👏</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n\n                                      {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Heart\" && <span>❤️</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Fire\" && <span>🔥</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Claps\" && <span>👏</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n                                    </div>\n                                  }\n                                </div>\n                              </li>)\n                              :\n                              (<li className=\"flex justify-end \">\n                                <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xs text-white bg-black min-w-[12rem] min-h-[12rem] rounded-t-xl rounded-l-xl shadow text-right`}> {/* other IMG msg */}\n                                  <img\n                                    className=\"block rounded-t-lg h-[200px] w-[200px] object-cover\"\n                                    crossOrigin=\"anonymous\"\n                                    src={item?.chatVideoThumbnail || item?.chatImageURL}\n                                    alt=\"IMG\"\n                                    onClick={() => previewClick(item)}\n                                  />\n                                  {item?.messageType === \"image\" ? null\n                                    : <img\n                                      className=\"block cursor-pointer rounded-t-lg absolute top-[calc(50%-21px)] left-[calc(50%-21px)]\"\n                                      src={PLAY_ICON}\n                                      alt=\"IMG\"\n                                      onClick={() => previewClick(item)}\n                                      crossOrigin=\"anonymous\"\n                                    />}\n                                  <div className=\"flex justify-between align-baseline \" >\n                                    {/* <img src={EMOJI_ICON} alt=\"EMOJI_ICON\" className=\"w-5 \" /> */}\n                                    <div onClick={() => handleReactionToggle(item)} >\n                                      <svg\n                                        xmlns=\"http://www.w3.org/2000/svg\"\n                                        className=\"w-5 h-5 text-white cursor-pointer ml-2 \"\n                                        fill=\"none\"\n                                        viewBox=\"0 0 24 24\"\n                                        stroke=\"currentColor\"\n                                      >\n                                        <path\n                                          strokeLinecap=\"round\"\n                                          strokeLinejoin=\"round\"\n                                          strokeWidth=\"2\"\n                                          d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                        />\n                                      </svg>\n                                    </div>\n                                    <span className=\"text-white text-xs text-right flex justify-center flex-col mr-2 \">\n                                      {moment.unix(item?.createdAt / 1000).format(\"LT\")}\n                                    </span>\n                                  </div>\n                                  {reactionPopup && (reactionId === item?.id) &&\n                                    <div role=\"tooltip\" className=\"absolute bottom-5 left-0 z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\n                                      <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\n                                        <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">👍</span>\n                                        <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">❤️</span>\n                                        <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">🔥</span>\n                                        <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">👏</span>\n                                        <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">😂</span>\n                                      </div>\n                                    </div>}\n                                  {\n                                    item?.arrReaction &&\n                                    <div className={`${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10`}>\n                                      {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Heart\" && <span>❤️</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Fire\" && <span>🔥</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Claps\" && <span>👏</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n\n                                      {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Heart\" && <span>❤️</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Fire\" && <span>🔥</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Claps\" && <span>👏</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n                                    </div>\n                                  }\n                                </div>\n                              </li>)\n                            : item?.messageBy !== user?.data?.user_id ?\n                              (<li className=\"flex justify-start\">\n                                <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xl px-4 py-2 text-black bg-gray-100 rounded-t-xl rounded-r-xl `}> {/* my txt msg */}\n                                  <span className=\"block\">{item?.text}</span>\n                                  <div className=\"flex justify-between align-baseline \" >\n                                    <span className=\"text-gray-500 text-xs text-right flex justify-center flex-col mr-3\">\n                                      {moment.unix(item?.createdAt / 1000).format(\"LT\")}\n                                    </span>\n                                    <img src={EMOJI_ICON} alt=\"EMOJI_ICON\" className=\"w-5 cursor-pointer text-gray-500 \" onClick={() => handleReactionToggle(item)} />\n                                  </div>\n                                  {reactionPopup && (reactionId === item?.id) &&\n                                    <div role=\"tooltip\" className=\"absolute bottom-5 left-0  z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\n                                      <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\n                                        <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">👍</span>\n                                        <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">❤️</span>\n                                        <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">🔥</span>\n                                        <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">👏</span>\n                                        <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">😂</span>\n                                      </div>\n                                    </div>}\n                                  {item?.arrReaction &&\n                                    <div className={`${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10 right-0`} >\n                                      {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Heart\" && <span>❤️</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Fire\" && <span>🔥</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Claps\" && <span>👏</span>}\n                                      {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n\n                                      {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Heart\" && <span>❤️</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Fire\" && <span>🔥</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Claps\" && <span>👏</span>}\n                                      {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n                                    </div>\n                                  }\n                                </div>\n                              </li>)\n                              :\n                              (\n                                <>\n                                  <li className=\"flex justify-end\">\n                                    <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xl px-4 py-2 text-white bg-black rounded-t-xl rounded-l-xl shadow text-right`}> {/* my txt msg */}\n                                      <div className=\"flex justify-end \" >\n                                        <span className=\"block text-left \">{item?.text}</span>\n                                        <img src={WHITE_MORE_ICON} alt=\"more\" className=\"object-contain h-5 cursor-pointer w-4 ml-2 \" onClick={() => handleEditMsgToggle(item)} />\n                                      </div>\n                                      <div className=\"flex justify-end align-baseline \" >\n                                        <div onClick={() => handleReactionToggle(item)} >\n\n                                          <svg\n                                            xmlns=\"http://www.w3.org/2000/svg\"\n                                            className=\"w-5 h-5 text-white cursor-pointer \"\n                                            fill=\"none\"\n                                            viewBox=\"0 0 24 24\"\n                                            stroke=\"currentColor\"\n                                          >\n                                            <path\n                                              strokeLinecap=\"round\"\n                                              strokeLinejoin=\"round\"\n                                              strokeWidth=\"2\"\n                                              d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                                            />\n                                          </svg>\n                                        </div>\n                                        <span className=\"text-white text-xs text-right flex justify-center flex-col ml-3 \">\n                                          {moment.unix(item?.createdAt / 1000).format(\"LT\")}\n                                        </span>\n                                      </div>\n                                      {editMsgToggle && (editMsgId === item?.id) &&\n                                        <div role=\"tooltip\" className=\"absolute top-20px left-0 z-40 inline-block w-32 text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\n                                          <button onClick={() => editMsg(item)} className=\"flex items-center justify-center w-full px-3 py-2 text-center bg-gray-100 cursor-pointer select-none rounded-xl rounded-t-xl hover:bg-gray-200\">\n                                            <h3 className=\"font-bold text-black font-lato\">Edit</h3>\n                                          </button>\n                                        </div>}\n                                      {reactionPopup && (reactionId === item?.id) &&\n                                        <div role=\"tooltip\" className=\"absolute bottom-5 -left-16 z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\n                                          <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\n                                            <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">👍</span>\n                                            <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">❤️</span>\n                                            <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">🔥</span>\n                                            <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">👏</span>\n                                            <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">😂</span>\n                                          </div>\n                                        </div>}\n                                      {\n                                        item?.arrReaction &&\n                                        <div className={`px-2 py-0.5 ${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10`}>\n                                          {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                          {item?.arrReaction[0]?.reaction === \"Heart\" && <span>❤️</span>}\n                                          {item?.arrReaction[0]?.reaction === \"Fire\" && <span>🔥</span>}\n                                          {item?.arrReaction[0]?.reaction === \"Claps\" && <span>👏</span>}\n                                          {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n\n                                          {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>👍</span>}\n                                          {item?.arrReaction[1]?.reaction === \"Heart\" && <span>❤️</span>}\n                                          {item?.arrReaction[1]?.reaction === \"Fire\" && <span>🔥</span>}\n                                          {item?.arrReaction[1]?.reaction === \"Claps\" && <span>👏</span>}\n                                          {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>😂</span>}\n                                        </div>\n                                      }\n                                    </div>\n                                    {/* <div className=\"relative max-w-xl px-4 py-2 text-white bg-black shadow text-right\">\n                                    </div> */}\n                                  </li>\n                                </>\n                              )\n                        }\n                        <div ref={bottomRef} />\n                      </Fragment>)\n                    })}\n\n                    {/* <li className=\"flex justify-end\">\n                        <div className=\"relative max-w-xl px-4 py-2 text-white bg-black rounded-t-xl rounded-l-xl shadow text-right\">\n                          <span className=\"block\">Hiiii</span>\n                          <span className=\"text-white text-xs text-right\">\n                            10:37 AM\n                          </span>\n                        </div>\n                      </li> */}\n\n                    {/* <li className=\"flex justify-start\">\n                      <div className=\"relative max-w-xl px-4 py-2 text-black bg-gray-100 rounded-t-xl rounded-r-xl \">\n                        <span className=\"block\">\n                          Lorem ipsum dolor sit, amet consectetur adipisicing\n                          elit.\n                        </span>\n                        <span className=\"text-gray-500 text-xs text-left\">\n                          10:37 AM\n                        </span>\n                      </div>\n                      </li> */}\n                    {/* ============================== IMG VIEW ================================== */}\n                    {/* <li className=\"flex justify-start\">\n                      <div className=\"relative max-w-xs text-black bg-gray-100 rounded-t-xl rounded-r-xl\">\n                        <img\n                          className=\"block rounded-t-lg\"\n                          src={BLACK_LOGO}\n                          alt=\"IMG\"\n                        />\n                        <span className=\"text-gray-500 text-xs text-left pl-2\">\n                          10:37 AM\n                        </span>\n                      </div>\n                      </li> */}\n                    {/* ============================== VIDEO VIEW ================================== */}\n                  </ul>\n                </div>\n                {/* <ChatScreen userData={userData} /> */}\n                <div className=\"relative flex items-center justify-between w-full p-3 border-t border-gray-300\">\n                  {toggleEmojiBtn && <div className=\"absolute -top-[450px]\" > <EmojiBoard addEmoji={addEmoji} /></div>}\n                  <button onClick={openEmojiBoard} >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                    </svg>\n                  </button>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Message\"\n                    className=\"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-full outline-none focus:text-gray-700\"\n                    name=\"message\"\n                    autoComplete=\"off\"\n                    required\n                    value={textMsg}\n                    onChange={(e) => setTextMsg(e.target.value)}\n                    onKeyDown={(e) => { if (e.key === 'Enter') { sendMsg() } }}\n                    onFocus={focusHandle}\n                  />\n                  <div className=\"file-msg cursor-pointer \">\n                    <input type={\"file\"} className=\"file-msg-input\" onChange={handleFileChange} />\n                  </div>\n\n                  <button disabled={textMsg === \"\"} type=\"submit\" onClick={() => sendMsg()} >\n                    <svg className=\"w-5 h-5 text-gray-500 origin-center transform rotate-90\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className={\n              `${chatRoom ? \"lg:flex xl:flex sm:hidden md:hidden xs:hidden\" : \"\"} lg:col-span-2 lg:block justify-center items-center font-semibold flex-col text-lg`\n            }>\n              <img src={ADD_ICON} alt=\"ADD_ICON\" className=\"w-12 mt-3 mb-11\" onClick={handleUserList} />\n              {\"Start a conversation\"}\n              <span className=\"flex justify-center items-center text-sm mt-4\">\n                by clicking on the + icon\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n      {/* ================================================= */}\n      {handleUserListPopup && <UserListPopup visible={handleUserListPopup} onClose={setHandleUserListPopup} goChat={goChat} sendMsg={sendMsg} />}\n      <Modal subClass=\" bg-white rounded-xl shadow-2xl  sm:w-1/5 xs:8/12 mx-0 flex justify-center\" visible={uploading} onClose={() => { }} hideClose >\n        <div className=\"flex flex-col items-center justify-center text-center\">\n          <div className=\"flex items-center justify-center rounded-full\">\n            <SpinningLoader\n              isLoading\n              colClass={`text-black m-auto`}\n              size={10}\n              className=\"w-full flex justify-center items-center\"\n            />\n          </div>\n          <p className=\"text-lg font-medium text-gray-500\">Uploading...</p>\n        </div>\n      </Modal>\n      {\n        previewClickToggle && (\n          <div className={\"fixed text-black flex items-center justify-center overflow-auto z-40 bg-black bg-opacity-40 left-0 right-0 top-0 bottom-0 transition-all duration-300\"}>\n            <Modal toggleSpace={true} visible={previewClickToggle} hideClose onClose={setPreviewClickToggle} subClass=\"w-[100%] mx-1 sm:mx-10 relative min-w-[15rem] min-h-[15rem]\">\n              {/* <div className={\" relative bg-white rounded-xl shadow-2xl py-2 sm:h-4/5 sm:mx-10 sx:h-4/5  xs:w-8/12 mx-10 flex flex-col overflow-hidden \"}> */}\n              <img\n                src={CLOSE_ICON}\n                alt=\"Close\"\n                className=\"absolute top-0 right-0 bg-black p-2 rounded-bl-3xl bg-opacity-50 cursor-pointer z-40\"\n                onClick={() => setPreviewClickToggle(!previewClickToggle)}\n              />\n              {\n                previewUrl?.chatVideoURL ?\n                  <video crossOrigin=\"anonymous\" className=\"object-contain w-full h-full\" autoPlay>\n                    <source src={previewUrl?.chatVideoURL as string} type=\"video/mp4\" />\n                  </video> :\n                  <img src={previewUrl?.chatImageURL} alt=\"video and image\" className=\"object-contain  w-full h-full \" />\n              }\n              {/* </div> */}\n            </Modal>\n          </div>)\n      }\n      {toggleDetails && (\n        <PostDetails\n          key={previewUrl?.chatPostID}\n          closeToggle={setToggleDetails}\n          chatPostID={previewUrl?.chatPostID}\n        />\n      )}\n    </section >\n  );\n}\nexport default Messages;\n\n\n\n// private fun mergeVideoAndAudio(videoSource: String, audioSource: String, output: String) {\n//   try {\n//       val dialogloding = showLoading()\n//       val retriever = MediaMetadataRetriever()\n//       retriever.setDataSource(videoSource)\n//       val width =\n//           Integer.valueOf(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_WIDTH))\n//       val height =\n//           Integer.valueOf(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_HEIGHT))\n//       retriever.release()\n\n//       val cmd =\n//           \"-i $videoSource -stream_loop -1 -i $audioSource -shortest -map 0:v:0 -map 1:a:0 -c:v copy -c:a libmp3lame -q:a 1 -y -s $width*$height $output\"\n\n// //            FFmpeg.execute(cmd)\n//       FFmpeg.executeAsync(cmd) { executionId, returnCode ->\n//           when (returnCode) {\n//               RETURN_CODE_SUCCESS -> {\n//                   dialogloding.dismiss()\n//                   videoUrl = output\n//                   setDataInResult()\n//               }\n//               RETURN_CODE_CANCEL -> {\n//                   Log.i(\"VideoPreviewActivity\", \"Async command execution cancelled by user.\");\n//               }\n//               else -> {\n//                   Log.i(\"VideoPreviewActivity\", String.format(\"Async command execution failed with returnCode=%d.\", returnCode));\n//               }\n//           }\n//       }\n//   } catch (e: Exception) {\n//       e.printStackTrace()\n//   }\n// }\n\n// -------- my firebase console ------------\n\n// VITE_FIRE_API_KEY = \"AIzaSyDZYTMGvFNHDENKPu9V8loN6BN0PENeNUM\"\n// VITE_FIRE_AUTH_DOM = \"chats-fb0df.firebaseapp.com\"\n// VITE_FIRE_DB_URL = \"https://chats-fb0df-default-rtdb.firebaseio.com\"\n// VITE_FIRE_PRJ_ID = \"chats-fb0df\"\n// VITE_FIRE_STG_BKT = \"chats-fb0df.appspot.com\"\n// VITE_FIRE_MSG_ID = \"948794299545\"\n// VITE_FIRE_APP_ID = \"1:948794299545:web:8ae4153496a77676555408\"\n// VITE_FIRE_MESG_ID = \"G-FWW0MN31Y5\"\n\n// -------- live console ------------\n\n// VITE_FIRE_API_KEY = \"AIzaSyAmUQrwx57wwbgMTeu71CnJg8acp2Sllhk\"\n// VITE_FIRE_AUTH_DOM = \"newworldorder-46319.firebaseapp.com\"\n// VITE_FIRE_DB_URL = \"https://newworldorder-46319-default-rtdb.firebaseio.com\"\n// VITE_FIRE_PRJ_ID = \"newworldorder-46319\"\n// VITE_FIRE_STG_BKT = \"newworldorder-46319.appspot.com\"\n// VITE_FIRE_MSG_ID = \"65383464540\"\n// VITE_FIRE_APP_ID = \"1:65383464540:web:a81a75e6c7b8cb8166b099\"\n// VITE_FIRE_MESG_ID = \"G-QZGJ2KEYYL\""],"names":["MSG_ICON","EMOJI_ICON","PLAY_ICON","ADD_ICON","Messages","storage","getStorage","navigate","useNavigate","chatroomId","useParams","user","useSelector","state","token","chatRoom","setChatRoom","useState","loading","setLoading","handleState","setHandleState","handleUserListPopup","setHandleUserListPopup","chatData","setChatData","msgData","setMsgData","userData","setUserData","newUserData","setNewUserData","textMsg","setTextMsg","uploading","setUploading","reactionPopup","setReactionPopup","reactionId","setReactionId","editMsgToggle","setEditMsgToggle","editMsgId","setEditMsgId","editReaction","setEditReaction","previewClickToggle","setPreviewClickToggle","toggleDetails","setToggleDetails","previewUrl","setPreviewUrl","newFileUrl","setNewFileUrl","newThumbnail","setNewThumbnail","newItem","setNewItem","fileTypeForN","setFileTypeForN","toggleEmojiBtn","setToggleEmojiBtn","msgListRef","ref","db","newMsgRef","push","uniqueId","bottomRef","useRef","useEffect","_a","getChatHistoryData","dbRef","onValue","snapshot","msgArr","childSnapshot","childData","sendChatPush","obj","_b","res","response","getUniqueChatId","otherUserId","intUserId","intOtherUserId","addEmoji","emoji","handleFileChange","e","reader","isVid","fileType","thumbnail64","generateVideoThumbnailBase64","sendFile","file","resolve","reject","canvas","video","ctx","uploadThumbnail","vidUri","thumbBase64","newStorageRef","storageRef","uploadString","getDownloadURL","url","sendMsg","toast","error","img","handleUserList","goChat","item","generateId","child","chatHistoryObj","set","oppMsgListRef","oopNewMsgRef","oppChatHistoryObj","_c","chatRoomRef","newChatRoomRef","chatRoomObj","update","query","orderByChild","chatArr","idx","handleChatRoom","previewClick","handleEditMsgToggle","handleReactionToggle","reactionClick","reactionName","oppUserId","myUserId","chatRoomId","myReactionIdx","oppReactionIdx","reactionRef","_d","_e","_f","_g","thumUrl","fileUrl","updatedMsgObj","_h","sendMsgObj","_i","_j","_k","_l","newChatRef","_m","_n","_o","editMsg","openEmojiBoard","focusHandle","backBtnClick","jsxs","jsx","Fragment","Loading","index","DEF_USER","moment","BACK_ICON","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_A","_B","_C","_D","_E","_F","_G","_H","_I","_J","_K","_L","_M","_N","_O","_P","_Q","_R","_S","_T","WHITE_MORE_ICON","_U","_V","_W","_X","_Y","_Z","__","_$","_aa","_ba","_ca","_da","EmojiBoard","UserListPopup","Modal","SpinningLoader","CLOSE_ICON","PostDetails"],"mappings":"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"}