{"version":3,"file":"DeleteAccount-f8736a54.js","sources":["../../src/pages/DeleteAccount.tsx"],"sourcesContent":["import { useContext, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { App_state, LogoutUser, LogoutUserPost } from \"~/reduxState\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport PopUp from \"../components/PopUp\";\nimport { BTN } from \"~/components\";\nimport { AppContext, resetUser } from \"~/context\";\n\nconst DeleteAccount = () => {\n  const { user } = useSelector((s: App_state) => s.UserLogin);\n  const token = user?.token;\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { dispatch: disp } = useContext(AppContext);\n\n  const [loading, setLoading] = useState<boolean>(false);\n  const [popup, setPopup] = useState<boolean>(false);\n\n  const openDeletePopup = () => setPopup(!popup);\n  const CloseDeletePopup = () => setPopup(!popup);\n\n  const handleDeleteAccountBtn = () => {\n    const obj = {\n      method: \"delete_user\",\n      user_id: user?.data?.user_id,\n    };\n    setLoading(true);\n    fetch(`${import.meta.env.VITE_API_URL}user`, {\n      method: \"POST\",\n      headers: {\n        accept: \"application/json\",\n        contentType: \"application/json\",\n        version: \"1.0.0\",\n        token: `Bearer ${token}`,\n      },\n      body: JSON.stringify(obj),\n    }).then((res) => {\n      res.json().then((response) => {\n        if (response.status === 1) {\n          setLoading(false);\n          setPopup(!popup);\n          toast.success(\"account deleted successfully...\", {\n            position: \"top-center\",\n            autoClose: 1000,\n          });\n          dispatch(LogoutUser());\n          dispatch(LogoutUserPost());\n          navigate(\"/\");\n          resetUser(disp);\n        } else {\n          // console.log(\"else\", response);\n        }\n      });\n    });\n  };\n  return (\n    <>\n      <div className=\"edup-content\">\n        {popup && (\n          <PopUp\n            message=\"Are you sure want to Delete your account ?\"\n            btnMsg=\"Delete\"\n            functionHandle={handleDeleteAccountBtn}\n            closePopup={CloseDeletePopup}\n            loading={loading}\n          />\n        )}\n        <div className=\"delete-ac-content\">\n          <div className=\"text-center delete-ac-content-inner\">\n            <span style={{ color: \"#857e7e\", fontSize: \"1.5rem\" }}>\n              \"you want to delete account? once you delete the account you can\n              not access your account again\"\n            </span>\n          </div>\n          <div className=\"mx-auto mt-8 \">\n            <BTN\n              className=\"px-32\"\n              onP={openDeletePopup}\n              title=\" Delete Account\"\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default DeleteAccount;\n"],"names":["DeleteAccount","user","useSelector","s","token","navigate","useNavigate","dispatch","useDispatch","disp","useContext","AppContext","loading","setLoading","useState","popup","setPopup","jsx","Fragment","jsxs","PopUp","obj","_a","res","response","toast","LogoutUser","LogoutUserPost","resetUser","BTN"],"mappings":"gNASA,MAAMA,EAAgB,IAAM,CAC1B,KAAM,CAAE,KAAAC,CAAK,EAAIC,EAAaC,GAAiBA,EAAE,SAAS,EACpDC,EAAQH,GAAA,YAAAA,EAAM,MACdI,EAAWC,IACXC,EAAWC,IACX,CAAE,SAAUC,CAAK,EAAIC,aAAWC,CAAU,EAE1C,CAACC,EAASC,CAAU,EAAIC,WAAkB,EAAK,EAC/C,CAACC,EAAOC,CAAQ,EAAIF,WAAkB,EAAK,EAuCjD,OAEIG,EAAAC,EAAA,CAAA,SAAAC,EAAC,MAAI,CAAA,UAAU,eACZ,SAAA,CACCJ,GAAAE,EAACG,EAAA,CACC,QAAQ,6CACR,OAAO,SACP,eAzCqB,IAAM,OACnC,MAAMC,EAAM,CACV,OAAQ,cACR,SAASC,EAAArB,GAAA,YAAAA,EAAM,OAAN,YAAAqB,EAAY,OAAA,EAEvBT,EAAW,EAAI,EACT,MAAA,yCAAuC,CAC3C,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,YAAa,mBACb,QAAS,QACT,MAAO,UAAUT,GACnB,EACA,KAAM,KAAK,UAAUiB,CAAG,CAAA,CACzB,EAAE,KAAME,GAAQ,CACfA,EAAI,KAAK,EAAE,KAAMC,GAAa,CACxBA,EAAS,SAAW,IACtBX,EAAW,EAAK,EAChBG,EAAS,CAACD,CAAK,EACfU,EAAM,QAAQ,kCAAmC,CAC/C,SAAU,aACV,UAAW,GAAA,CACZ,EACDlB,EAASmB,GAAY,EACrBnB,EAASoB,GAAgB,EACzBtB,EAAS,GAAG,EACZuB,EAAUnB,CAAI,EAGhB,CACD,CAAA,CACF,CAAA,EAUO,WA5Ce,IAAMO,EAAS,CAACD,CAAK,EA6CpC,QAAAH,CAAA,CACF,EAEFO,EAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAF,EAAC,MAAI,CAAA,UAAU,sCACb,SAAAA,EAAC,OAAK,CAAA,MAAO,CAAE,MAAO,UAAW,SAAU,QAAS,EAAG,0GAGvD,CAAA,EACF,EACAA,EAAC,MAAI,CAAA,UAAU,gBACb,SAAAA,EAACY,EAAA,CACC,UAAU,QACV,IA3DY,IAAMb,EAAS,CAACD,CAAK,EA4DjC,MAAM,iBAAA,CAAA,EAEV,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ"}