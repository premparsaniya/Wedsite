import{r as p,a as e,j as n}from"./jsx-runtime-911a162d.js";import{a as T,aG as H,aV as F,l as M,aW as N,y as k,aH as g,aI as D,aX as V}from"./EmojiBoard-9ff11c42.js";import{I as A}from"./index-79255bbd.js";import{W as d}from"./web3.min-e56af654.js";const Y="/assets/receive_icon-df1a3729.svg",z="/assets/sent_icon-70efa295.svg",R=()=>{const{state:{myWallet:t},dispatch:y}=p.useContext(T),{address:c,isMainNet:l,privateKey:v}=t,[r,w]=p.useState([]),[S,C]=p.useState(!0),[$,b]=p.useState(!1),u=()=>b(!1),[a,i]=p.useState({});p.useEffect(()=>{(v||c)===null?H({myWallet:t,dispatch:y}):j()},[c]);const j=async()=>{c&&F({wAddress:c,pg:1,offset:1e3,isMainNet:l}).then(({data:s,err:o})=>{o===null&&(s==null?void 0:s.status)==="1"?w((s==null?void 0:s.result)||[]):console.error(o)}).catch(s=>console.error(s)).finally(()=>C(!1))},h=s=>s==="Confirmed"?"text-green-400":s==="Failed"?"text-rose-500":s==="Pending"?"text-lime-300":"text-black",x=s=>s==="1"?"Confirmed":s==="0"?"Failed":s===""||s===null?"Pending":"Unknown",_=s=>{i(s),b(!0),l&&V(s==null?void 0:s.hash,l).then(({data:o,err:f})=>{if(f===null&&(o==null?void 0:o.status)==="1"){const E=(o==null?void 0:o.result)||{status:""};i({...s,...E})}else console.error(f)}).catch(o=>console.error(o))};return e("div",{className:"flex flex-col items-center flex-1 min-h-screen py-16 min-w-screen",children:[n("span",{className:"block text-4xl font-semibold text-center text-black font-lato",children:"History"}),S?n(M,{isLoading:!0,colClass:"text-black",size:10,className:"mt-[15%]"}):(r==null?void 0:r.length)===0?n("span",{className:"block text-lg font-semibold text-center text-black font-lato mt-[15%]",children:"No NFTs found!"}):r==null?void 0:r.map((s,o)=>{const f=`${(s==null?void 0:s.from)===c?"Sent":"Received"} ${l?s==null?void 0:s.tokenSymbol:"ETH"}`;return e("button",{onClick:()=>_({...s,_title:f}),className:`flex flex-row items-center justify-center w-[100%] sm:w-[92%] lg:max-w-[70%] p-1 md:p-4 mx-[4%] ${(r==null?void 0:r.length)-1===o?"":"border-b-2 border-zinc-100"}`,children:[n("img",{src:(s==null?void 0:s.from)===c?z:Y,alt:"NFT",className:"min-w-[50px] h-[50px]"}),e("div",{className:"flex flex-col justify-between w-[100%] px-4 min-h-[60px]",children:[e("div",{className:"flex flex-row items-center justify-between w-[100%]",children:[n("span",{className:"block text-[14px] font-semibold text-black lg:text-xl font-lato",children:l?s!=null&&s.tokenSymbol?f:"--":f}),n("span",{className:"block text-[14px] font-semibold text-black md:text-xl font-lato",children:s!=null&&s.value?`${t!=null&&t.isMainNet?N(s==null?void 0:s.value,s==null?void 0:s.tokenDecimal):d.utils.fromWei(s==null?void 0:s.value,"ether")} ${l?s==null?void 0:s.tokenSymbol:"ETH"}`:"--"})]}),e("div",{className:"flex flex-row items-center justify-between w-[100%]",children:[n("span",{className:`block text-[14px] md:text-lg font-lato ${h(x(l?s==null?void 0:s.status:s==null?void 0:s.txreceipt_status))}`,children:l?s!=null&&s.status?`${x(s==null?void 0:s.status)} `:"--":s!=null&&s.txreceipt_status?`${x(s==null?void 0:s.txreceipt_status)} `:"--"},o),n("span",{className:"block text-[14px] md:text-lg text-zinc-700 font-lato",children:s!=null&&s.timeStamp?k.unix(s==null?void 0:s.timeStamp).fromNow():"--"})]})]})]},o)}),e(A,{visible:$,onClose:u,hideClose:!0,saveBtnTxt:"Close",onSave:u,title:a==null?void 0:a._title,subClass:"w-[100%] mx-1 sm:mx-10 ",children:[e("div",{className:"flex justify-between border-t-[1px] border-gray-300 px-4 pt-4",children:[n("span",{className:"text-sm text-gray-600 md:text-base",children:"Status"}),n("span",{className:"text-sm text-gray-600 md:text-base",children:"Date"})]}),e("div",{className:"flex justify-between px-4 pt-2",children:[n("span",{className:`block text-[14px] md:text-lg font-lato ${h(x(l?a==null?void 0:a.status:a==null?void 0:a.txreceipt_status))}`,children:l?a!=null&&a.status?`${x(a==null?void 0:a.status)} `:"--":a!=null&&a.txreceipt_status?`${x(a==null?void 0:a.txreceipt_status)} `:"--"}),n("span",{className:"block text-[14px] md:text-lg font-lato text-black",children:a!=null&&a.timeStamp?k.unix(a==null?void 0:a.timeStamp).format("MMM DD YYYY [at] hh:mm A"):"--"})]}),e("div",{className:"flex justify-between px-4 pt-4 border-t-[1px] border-black mt-4",children:[n("span",{className:"text-sm text-gray-600 md:text-base",children:"From"}),n("span",{className:"text-sm text-gray-600 md:text-base",children:"To"})]}),e("div",{className:"flex justify-between px-4",children:[n("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all mr-[3%] text-left select-none cursor-copy",onClick:()=>g(a==null?void 0:a.from),children:a!=null&&a.from?a==null?void 0:a.from:"--"}),n("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all ml-[3%] text-right select-none cursor-copy",onClick:()=>g(a==null?void 0:a.to),children:a!=null&&a.to?a==null?void 0:a.to:"--"})]}),n("div",{className:"flex justify-between px-4 pt-4 border-t-[1px] border-black mt-4",children:n("span",{className:"text-sm text-agray-600 md:text-base",children:"NONCE"})}),n("div",{className:"flex justify-between px-4",children:n("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all",children:(a==null?void 0:a.nonce)||"--"})}),n("div",{className:"self-center",children:n("button",{className:"transparent-secondary-btn",onClick:()=>{D(`https://${t!=null&&t.isMainNet?"etherscan.io":"ropsten.etherscan.io"}/tx/${a==null?void 0:a.hash}`)},children:"View on EtherScan"})}),e("div",{className:"flex justify-between p-3 mt-5 border-2 border-black rounded-xl",children:[n("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all",children:"Amount"}),n("span",{className:"block text-[14px] md:text-lg font-lato text-black break-all",children:a!=null&&a.value?`${t!=null&&t.isMainNet?N(a==null?void 0:a.value,a==null?void 0:a.tokenDecimal):d.utils.fromWei(a==null?void 0:a.value,"ether")} ${l?a==null?void 0:a.tokenSymbol:"ETH"}`:"--"})]})]})]})};export{R as default};
//# sourceMappingURL=History-17fb043c.js.map
