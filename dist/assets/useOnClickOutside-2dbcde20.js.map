{"version":3,"file":"useOnClickOutside-2dbcde20.js","sources":["../../src/hooks/useEventListener.ts","../../src/hooks/useIsomorphicLayoutEffect.ts","../../src/hooks/useOnClickOutside.ts"],"sourcesContent":["import { RefObject, useEffect, useRef } from 'react';\nimport { useIsomorphicLayoutEffect } from '~/hooks';\n\n// MediaQueryList Event based useEventListener interface\nfunction useEventListener<K extends keyof MediaQueryListEventMap>(\n    eventName: K,\n    handler: (event: MediaQueryListEventMap[K]) => void,\n    element: RefObject<MediaQueryList>,\n    options?: boolean | AddEventListenerOptions,\n): void\n\n// Window Event based useEventListener interface\nfunction useEventListener<K extends keyof WindowEventMap>(\n    eventName: K,\n    handler: (event: WindowEventMap[K]) => void,\n    element?: undefined,\n    options?: boolean | AddEventListenerOptions,\n): void\n\n// Element Event based useEventListener interface\nfunction useEventListener<\n    K extends keyof HTMLElementEventMap,\n    T extends HTMLElement = HTMLDivElement,\n>(\n    eventName: K,\n    handler: (event: HTMLElementEventMap[K]) => void,\n    element: RefObject<T>,\n    options?: boolean | AddEventListenerOptions,\n): void\n\n// Document Event based useEventListener interface\nfunction useEventListener<K extends keyof DocumentEventMap>(\n    eventName: K,\n    handler: (event: DocumentEventMap[K]) => void,\n    element: RefObject<Document>,\n    options?: boolean | AddEventListenerOptions,\n): void\n\nfunction useEventListener<\n    KW extends keyof WindowEventMap,\n    KH extends keyof HTMLElementEventMap,\n    KM extends keyof MediaQueryListEventMap,\n    T extends HTMLElement | MediaQueryList | void = void,\n>(\n    eventName: KW | KH | KM,\n    handler: (\n        event:\n            | WindowEventMap[KW]\n            | HTMLElementEventMap[KH]\n            | MediaQueryListEventMap[KM]\n            | Event,\n    ) => void,\n    element?: RefObject<T>,\n    options?: boolean | AddEventListenerOptions,\n) {\n    // Create a ref that stores handler\n    const savedHandler = useRef(handler)\n\n    useIsomorphicLayoutEffect(() => {\n        savedHandler.current = handler\n    }, [handler])\n\n    useEffect(() => {\n        // Define the listening target\n        const targetElement: T | Window = element?.current ?? window\n\n        if (!(targetElement && targetElement.addEventListener)) return\n\n        // Create event listener that calls handler function stored in ref\n        const listener: typeof handler = event => savedHandler.current(event)\n\n        targetElement.addEventListener(eventName, listener, options)\n\n        // Remove event listener on cleanup\n        return () => {\n            targetElement.removeEventListener(eventName, listener, options)\n        }\n    }, [eventName, element, options])\n}\n\nexport default useEventListener;","import { useEffect, useLayoutEffect } from 'react';\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport default useIsomorphicLayoutEffect;","import { RefObject } from 'react';\nimport { useEventListener } from '~/hooks'\n\n\ntype Handler = (event: MouseEvent) => void\n\nfunction useOnClickOutside<T extends HTMLElement = HTMLElement>(\n    ref: RefObject<T>,\n    handler: Handler,\n    mouseEvent: 'mousedown' | 'mouseup' = 'mousedown',\n): void {\n    useEventListener(mouseEvent, event => {\n        const el = ref?.current\n\n        // Do nothing if clicking ref's element or descendent elements\n        if (!el || el.contains(event.target as Node)) {\n            return\n        }\n\n        handler(event)\n    })\n}\n\nexport default useOnClickOutside;"],"names":["useEventListener","eventName","handler","element","options","savedHandler","useRef","useIsomorphicLayoutEffect","useEffect","targetElement","listener","event","useLayoutEffect","useOnClickOutside","ref","mouseEvent","el"],"mappings":"8CAsCA,SAASA,EAMLC,EACAC,EAOAC,EACAC,EACF,CAEQ,MAAAC,EAAeC,SAAOJ,CAAO,EAEnCK,EAA0B,IAAM,CAC5BF,EAAa,QAAUH,CAAA,EACxB,CAACA,CAAO,CAAC,EAEZM,EAAAA,UAAU,IAAM,CAEN,MAAAC,GAA4BN,GAAA,YAAAA,EAAS,UAAW,OAElD,GAAA,EAAEM,GAAiBA,EAAc,kBAAmB,OAGxD,MAAMC,EAA2BC,GAASN,EAAa,QAAQM,CAAK,EAEtD,OAAAF,EAAA,iBAAiBR,EAAWS,EAAUN,CAAO,EAGpD,IAAM,CACKK,EAAA,oBAAoBR,EAAWS,EAAUN,CAAO,CAAA,CAEnE,EAAA,CAACH,EAAWE,EAASC,CAAO,CAAC,CACpC,CC5EA,MAAMG,EAA4B,OAAO,OAAW,IAAcK,EAAkB,gBAAAJ,EAAA,UCIpF,SAASK,EACLC,EACAZ,EACAa,EAAsC,YAClC,CACJf,EAAiBe,EAAqBJ,GAAA,CAClC,MAAMK,EAAKF,GAAA,YAAAA,EAAK,QAGZ,CAACE,GAAMA,EAAG,SAASL,EAAM,MAAc,GAI3CT,EAAQS,CAAK,CAAA,CAChB,CACL"}