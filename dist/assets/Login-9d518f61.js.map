{"version":3,"file":"Login-9d518f61.js","sources":["../../src/pages/Login.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { BTN, DownBox } from \"../components/index\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { LoginUser } from \"../reduxState/action\";\r\n// import MyLoading from \"../components/MyLoading\";\r\nimport { BLACK_LOGO } from \"../assets\";\r\n\r\nconst Login = () => {\r\n  // const { user } = useSelector((state: any) => state.UserLogin);\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [un, setUN] = useState<string>(\"\");\r\n  const [pass, setPass] = useState<string>(\"\");\r\n  const [error, setError] = useState<string>(\"\");\r\n  const [terms, setTerms] = useState<boolean>(false);\r\n  const [myLoading, setMyLoading] = useState<boolean>(false);\r\n\r\n  const goHome = () => {\r\n    setError(\"\");\r\n    if (un !== \"\" && pass !== \"\") {\r\n      const loginUserObj = {\r\n        username: un,\r\n        password: pass,\r\n        method: \"do_login\",\r\n      };\r\n      setMyLoading(true);\r\n      fetch(`${import.meta.env.VITE_PUBLIC_URL}login`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-type\": \"application/json\",\r\n          version: \"1.0.0\",\r\n          // token: `Bearer ${token}`,\r\n          // 'Access-Control-Allow-Origin' : \"*\",\r\n        },\r\n        body: JSON.stringify(loginUserObj),\r\n      })\r\n        .then((result) => {\r\n          result.json().then((response) => {\r\n            if (response.status === 1) {\r\n              // setNavBAck(\"1\");\r\n              convertResponse(response);\r\n              // console.log(\"Responce IF\", response);\r\n            } else {\r\n              setError(response.message);\r\n            }\r\n            setMyLoading(false);\r\n          });\r\n        })\r\n        .catch(() => {\r\n          setMyLoading(false);\r\n          setError(\"Check your Network...\");\r\n        });\r\n    }\r\n  };\r\n\r\n  const convertResponse = (res: any) => {\r\n    const obj = {\r\n      data: {\r\n        name: res?.data.name,\r\n        email: res?.data.email,\r\n        bio: res?.data.bio,\r\n        dob: res?.data.dob,\r\n        gender: res?.data.gender,\r\n        mobile: res?.data.mobile,\r\n        profile_status: res?.data.profile_status,\r\n        token: res?.extra.token,\r\n        photo: res?.data.photo,\r\n        user_id: res?.data.user_id,\r\n        user_type: res?.data.user_type,\r\n        status: res?.data.status,\r\n        is_password_set: res?.data.is_password_set,\r\n        total_followers: res?.data.total_followers,\r\n        total_followings: res?.data.total_followings,\r\n        total_follow_requests: res?.data.total_follow_requests,\r\n        noti_badge_count: res?.data.noti_badge_count,\r\n        settings: {\r\n          profile: res?.data.settings.profile,\r\n          notification: res?.data.settings.notification,\r\n          preference: res?.data.settings.preference,\r\n          activity: res?.data.settings.activity,\r\n          check_in: res?.data.settings.check_in,\r\n          level: res?.data.settings.level,\r\n          phase: res?.data.settings.phase,\r\n          streak_days: res?.data.settings.streak_days,\r\n        },\r\n        activity_instructions: res?.data.activity_instructions,\r\n        posts: [\r\n          {\r\n            // total_post: res?.data.posts.total_post,\r\n            reference_post: [],\r\n          },\r\n        ],\r\n      },\r\n      token: res?.extra.token,\r\n      session_id: res?.session_id,\r\n      message: res?.message,\r\n      status: res?.status,\r\n    };\r\n    dispatch(LoginUser(obj));\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const forgot = () => {\r\n    navigate(\"/reset\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <section className=\"login-main-sec\">\r\n        <div className=\"root-container\">\r\n          <div className=\"box-l\">\r\n            <div className=\"insta-logo \">\r\n              <img src={BLACK_LOGO} className=\"login-logo\" alt=\"hh\"></img>\r\n            </div>\r\n            <div\r\n              className=\"login-inp d-f\"\r\n              style={{ justifyContent: \"space-between\" }}\r\n            >\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"Email \"\r\n                onChange={(e) => {\r\n                  setUN(e.target.value), setError(\"\");\r\n                }}\r\n                value={un}\r\n                className=\"u-inp\"\r\n              />\r\n              <input\r\n                type=\"password\"\r\n                placeholder=\"Password\"\r\n                onChange={(e) => {\r\n                  setPass(e.target.value), setError(\"\");\r\n                }}\r\n                value={pass}\r\n                className=\"p-inp my-2.5\"\r\n              />\r\n              <div className=\"login-forgot-psw\">\r\n                <span style={{ fontSize: \"15px\" }}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={terms}\r\n                    className=\"login-checkbox\"\r\n                    onChange={({ target }) => { setTerms(target.checked); setError(\"\"); }}\r\n                    onKeyDown={(e) => { if (e.key === 'Enter') { goHome() } }}\r\n                  />{\" \"}\r\n                  <Link className=\"ml-2\" to=\"/Terms_and_Conditions\">Terms and Conditions</Link>\r\n                </span>\r\n                <span\r\n                  className=\"login-fp-span\"\r\n                  style={{ fontSize: \"15px\" }}\r\n                  onClick={() => forgot()}\r\n                >\r\n                  Forgot Password?\r\n                </span>\r\n              </div>\r\n              <BTN\r\n                className=\"px-32\"\r\n                onP={goHome}\r\n                loading={myLoading}\r\n                title=\"Log In\"\r\n                disabled={\r\n                  myLoading || (un !== \"\" && pass !== \"\" && terms)\r\n                    ? false\r\n                    : true\r\n                }\r\n              />\r\n            </div>\r\n          </div>\r\n          <DownBox\r\n            text={`Don't have an account?`}\r\n            className={\"l-under-box\"}\r\n            linkName={`Sign Up`}\r\n            page={`/signup`}\r\n          />\r\n          {error ? (\r\n            <div className=\"login-error-box\">\r\n              <h1>{error}</h1>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["Login","dispatch","useDispatch","navigate","useNavigate","un","setUN","useState","pass","setPass","error","setError","terms","setTerms","myLoading","setMyLoading","goHome","loginUserObj","result","response","convertResponse","res","obj","LoginUser","forgot","jsx","Fragment","jsxs","BLACK_LOGO","e","target","Link","BTN","DownBox"],"mappings":"gSAQA,MAAMA,EAAQ,IAAM,CAGlB,MAAMC,EAAWC,IACXC,EAAWC,IACX,CAACC,EAAIC,CAAK,EAAIC,WAAiB,EAAE,EACjC,CAACC,EAAMC,CAAO,EAAIF,WAAiB,EAAE,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,WAAiB,EAAE,EACvC,CAACK,EAAOC,CAAQ,EAAIN,WAAkB,EAAK,EAC3C,CAACO,EAAWC,CAAY,EAAIR,WAAkB,EAAK,EAEnDS,EAAS,IAAM,CAEf,GADJL,EAAS,EAAE,EACPN,IAAO,IAAMG,IAAS,GAAI,CAC5B,MAAMS,EAAe,CACnB,SAAUZ,EACV,SAAUG,EACV,OAAQ,UAAA,EAEVO,EAAa,EAAI,EACX,MAAA,0CAA2C,CAC/C,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,eAAgB,mBAChB,QAAS,OAGX,EACA,KAAM,KAAK,UAAUE,CAAY,CAAA,CAClC,EACE,KAAMC,GAAW,CAChBA,EAAO,KAAK,EAAE,KAAMC,GAAa,CAC3BA,EAAS,SAAW,EAEtBC,EAAgBD,CAAQ,EAGxBR,EAASQ,EAAS,OAAO,EAE3BJ,EAAa,EAAK,CAAA,CACnB,CAAA,CACF,EACA,MAAM,IAAM,CACXA,EAAa,EAAK,EAClBJ,EAAS,uBAAuB,CAAA,CACjC,CACL,CAAA,EAGIS,EAAmBC,GAAa,CACpC,MAAMC,EAAM,CACV,KAAM,CACJ,KAAMD,GAAA,YAAAA,EAAK,KAAK,KAChB,MAAOA,GAAA,YAAAA,EAAK,KAAK,MACjB,IAAKA,GAAA,YAAAA,EAAK,KAAK,IACf,IAAKA,GAAA,YAAAA,EAAK,KAAK,IACf,OAAQA,GAAA,YAAAA,EAAK,KAAK,OAClB,OAAQA,GAAA,YAAAA,EAAK,KAAK,OAClB,eAAgBA,GAAA,YAAAA,EAAK,KAAK,eAC1B,MAAOA,GAAA,YAAAA,EAAK,MAAM,MAClB,MAAOA,GAAA,YAAAA,EAAK,KAAK,MACjB,QAASA,GAAA,YAAAA,EAAK,KAAK,QACnB,UAAWA,GAAA,YAAAA,EAAK,KAAK,UACrB,OAAQA,GAAA,YAAAA,EAAK,KAAK,OAClB,gBAAiBA,GAAA,YAAAA,EAAK,KAAK,gBAC3B,gBAAiBA,GAAA,YAAAA,EAAK,KAAK,gBAC3B,iBAAkBA,GAAA,YAAAA,EAAK,KAAK,iBAC5B,sBAAuBA,GAAA,YAAAA,EAAK,KAAK,sBACjC,iBAAkBA,GAAA,YAAAA,EAAK,KAAK,iBAC5B,SAAU,CACR,QAASA,GAAA,YAAAA,EAAK,KAAK,SAAS,QAC5B,aAAcA,GAAA,YAAAA,EAAK,KAAK,SAAS,aACjC,WAAYA,GAAA,YAAAA,EAAK,KAAK,SAAS,WAC/B,SAAUA,GAAA,YAAAA,EAAK,KAAK,SAAS,SAC7B,SAAUA,GAAA,YAAAA,EAAK,KAAK,SAAS,SAC7B,MAAOA,GAAA,YAAAA,EAAK,KAAK,SAAS,MAC1B,MAAOA,GAAA,YAAAA,EAAK,KAAK,SAAS,MAC1B,YAAaA,GAAA,YAAAA,EAAK,KAAK,SAAS,WAClC,EACA,sBAAuBA,GAAA,YAAAA,EAAK,KAAK,sBACjC,MAAO,CACL,CAEE,eAAgB,CAAC,CACnB,CACF,CACF,EACA,MAAOA,GAAA,YAAAA,EAAK,MAAM,MAClB,WAAYA,GAAA,YAAAA,EAAK,WACjB,QAASA,GAAA,YAAAA,EAAK,QACd,OAAQA,GAAA,YAAAA,EAAK,MAAA,EAENpB,EAAAsB,EAAUD,CAAG,CAAC,EACvBnB,EAAS,GAAG,CAAA,EAGRqB,EAAS,IAAM,CACnBrB,EAAS,QAAQ,CAAA,EAIjB,OAAAsB,EAAAC,EAAA,CACE,WAAC,UAAQ,CAAA,UAAU,iBACjB,SAACC,EAAA,MAAA,CAAI,UAAU,iBACb,SAAA,CAACA,EAAA,MAAA,CAAI,UAAU,QACb,SAAA,CAACF,EAAA,MAAA,CAAI,UAAU,cACb,SAACA,EAAA,MAAA,CAAI,IAAKG,EAAY,UAAU,aAAa,IAAI,IAAK,CAAA,EACxD,EACAD,EAAC,MAAA,CACC,UAAU,gBACV,MAAO,CAAE,eAAgB,eAAgB,EAEzC,SAAA,CAAAF,EAAC,QAAA,CACC,KAAK,QACL,YAAY,SACZ,SAAWI,GAAM,CACfvB,EAAMuB,EAAE,OAAO,KAAK,EAAGlB,EAAS,EAAE,CACpC,EACA,MAAON,EACP,UAAU,OAAA,CACZ,EACAoB,EAAC,QAAA,CACC,KAAK,WACL,YAAY,WACZ,SAAWI,GAAM,CACfpB,EAAQoB,EAAE,OAAO,KAAK,EAAGlB,EAAS,EAAE,CACtC,EACA,MAAOH,EACP,UAAU,cAAA,CACZ,EACAmB,EAAC,MAAI,CAAA,UAAU,mBACb,SAAA,CAAAA,EAAC,OAAK,CAAA,MAAO,CAAE,SAAU,MACvB,EAAA,SAAA,CAAAF,EAAC,QAAA,CACC,KAAK,WACL,QAASb,EACT,UAAU,iBACV,SAAU,CAAC,CAAE,OAAAkB,KAAa,CAAEjB,EAASiB,EAAO,OAAO,EAAGnB,EAAS,EAAE,CAAG,EACpE,UAAYkB,GAAM,CAAMA,EAAE,MAAQ,SAAkBb,GAAI,CAAA,CAC1D,EAAG,MACFe,EAAK,CAAA,UAAU,OAAO,GAAG,wBAAwB,SAAoB,uBAAA,CAAA,EACxE,EACAN,EAAC,OAAA,CACC,UAAU,gBACV,MAAO,CAAE,SAAU,MAAO,EAC1B,QAAS,IAAMD,EAAO,EACvB,SAAA,kBAAA,CAED,CAAA,EACF,EACAC,EAACO,EAAA,CACC,UAAU,QACV,IAAKhB,EACL,QAASF,EACT,MAAM,SACN,SACE,EAAAA,GAAcT,IAAO,IAAMG,IAAS,IAAMI,EAEtC,CAER,CAAA,CAAA,CACF,CAAA,EACF,EACAa,EAACQ,EAAA,CACC,KAAM,yBACN,UAAW,cACX,SAAU,UACV,KAAM,SAAA,CACR,EACCvB,IACE,MAAI,CAAA,UAAU,kBACb,SAACe,EAAA,KAAA,CAAI,SAAMf,CAAA,CAAA,CAAA,CACb,EACE,IAAA,EACN,EACF,CACF,CAAA,CAEJ"}