import{r as i,a as U,j as c}from"./jsx-runtime-911a162d.js";import{e as _,c as R,a as A,u as j,s as N,Q as E,L as H,h as I,j as T,k as $,at as y,l as z}from"./EmojiBoard-9ff11c42.js";import"./web3.min-e56af654.js";const Q=()=>{const o=_(),b=R(),[n,p]=i.useState(1),[l,d]=i.useState(!1),{dispatch:S}=i.useContext(A),{user:r}=j(e=>e==null?void 0:e.UserLogin),a=j(e=>e==null?void 0:e.PostListReducer),[g,v]=i.useState(!1),[m,h]=i.useState(!1),x=10,C=r==null?void 0:r.token;i.useEffect(()=>{f()},[n]);const f=()=>{n===1&&h(!0),d(!0);const e={method:"get_post_list",page:n,limit:x,user_id:r.data.user_id};fetch("https://nwo.capital/app/state/api/post",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",version:"1.0.0",token:`Bearer ${C}`},body:JSON.stringify(e)}).then(s=>{s.json().then(t=>{var L;if(t.status===1){h(!1);let w=x,O=(L=t==null?void 0:t.data)==null?void 0:L.length;if(v(O>=w),n===1)o(N(t==null?void 0:t.data));else{let P=[...a];t!=null&&t.data&&P.push(...t==null?void 0:t.data),o(N(P))}}t.status===2&&(E.error("Your session is expired. Please login to access your account",{position:"top-center"}),o(H()),o(I()),b("/"),T(S))}).finally(()=>d(!1))}).catch(()=>{console.log("error")})},u=i.useRef(),k=i.useCallback(e=>{l||(u.current&&u.current.disconnect(),u.current=new IntersectionObserver(s=>{s[0].isIntersecting&&g&&p(t=>t+1)}),e&&u.current.observe(e))},[l,g]);return U("div",{className:"home-main d-f",children:[m?c("div",{className:"w-full h-[100%] flex justify-center items-center",children:c($,{})}):(a==null?void 0:a.length)>0?a==null?void 0:a.map((e,s)=>(a==null?void 0:a.length)===s+1?c(y,{ref:k,index:s,item:e,getPostList:f},s):c(y,{index:s,item:e,getPostList:f},s)):!l&&c("p",{className:"flex items-center justify-center w-full text-xl text-center text-gray-500 h-52 text-bold",children:"No Post yet !!"}),l&&!m&&c(z,{isLoading:!0,colClass:"text-black",size:10,className:"flex items-center justify-center w-full mb-4"})]})};export{Q as default};
//# sourceMappingURL=Home-5fe92510.js.map
