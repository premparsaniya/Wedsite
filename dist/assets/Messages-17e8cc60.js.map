{"version":3,"file":"Messages-17e8cc60.js","sources":["../../src/assets/svg/MSG_ICON.svg","../../src/assets/svg/emoji_icon.svg","../../src/assets/svg/play.svg","../../src/assets/svg/ADD_ICON.svg","../../src/pages/Messages.tsx"],"sourcesContent":["export default \"__VITE_ASSET__b9a6175f__\"","export default \"__VITE_ASSET__ce365ea9__\"","export default \"__VITE_ASSET__455d0c18__\"","export default \"__VITE_ASSET__d3b400df__\"","import { Fragment, useEffect, useRef, useState } from \"react\";\r\nimport { db, ref, set, onValue, push, child, getStorage, storageRef, uploadString, getDownloadURL, update, orderByKey } from \"~/utils\";\r\nimport { ADD_ICON, BACK_ICON, BLACK_LOGO, CLOSE_ICON, DEF_USER, EMOJI_ICON, MSG_ICON, PLAY_ICON, WHITE_MORE_ICON } from \"~/assets\";\r\nimport { EmojiBoard, Loading, Modal, SpinningLoader, UserListPopup } from \"~/components\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport moment from \"moment\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport { limitToFirst, limitToLast, orderByChild, query } from \"firebase/database\";\r\nimport PostDetails from \"~/pages/PostDetails\";\r\n\r\nfunction Messages() {\r\n  const storage = getStorage();\r\n  const navigate = useNavigate();\r\n  const { chatroomId } = useParams()\r\n  const { user } = useSelector((state: any) => state.UserLogin);\r\n  const token = user?.token;\r\n  const [chatRoom, setChatRoom] = useState<boolean>(true);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [handleState, setHandleState] = useState<boolean>(false);\r\n  const [handleUserListPopup, setHandleUserListPopup] = useState<boolean>(false);\r\n  const [chatData, setChatData] = useState<any[]>([]);\r\n  const [msgData, setMsgData] = useState<any[]>([]);\r\n  const [userData, setUserData] = useState<any>(null);\r\n  const [newUserData, setNewUserData] = useState<any>(null);\r\n  const [textMsg, setTextMsg] = useState<string>(\"\")\r\n  const [uploading, setUploading] = useState<boolean>(false);\r\n  const [reactionPopup, setReactionPopup] = useState<boolean>(false);\r\n  const [reactionId, setReactionId] = useState<string>(\"\")\r\n  // const [reactionTitle, setReactionTitle] = useState<any>(\"\")\r\n  const [editMsgToggle, setEditMsgToggle] = useState<boolean>(false);\r\n  const [editMsgId, setEditMsgId] = useState<string>(\"\")\r\n  const [editReaction, setEditReaction] = useState<any[]>([])\r\n  const [previewClickToggle, setPreviewClickToggle] = useState<boolean>(false);\r\n  const [toggleDetails, setToggleDetails] = useState<boolean>(false);\r\n  const [previewUrl, setPreviewUrl] = useState<any>(null)\r\n  const [newFileUrl, setNewFileUrl] = useState<any>(\"\")\r\n  const [newThumbnail, setNewThumbnail] = useState<any>(\"\")\r\n  const [newItem, setNewItem] = useState<any>()\r\n  const [fileTypeForN, setFileTypeForN] = useState<string>(\"\")\r\n  const [selectedEmoji, setSelectedEmoji] = useState<string>(\"\");\r\n\r\n  const [toggleEmojiBtn, setToggleEmojiBtn] = useState<boolean>(false);\r\n\r\n  const msgListRef = ref(db, `messages/${userData?.chatRoomId}`);\r\n  const newMsgRef = push(msgListRef);\r\n  let uniqueId = newMsgRef.key\r\n\r\n  const bottomRef = useRef<HTMLDivElement>(null);\r\n\r\n  // ------------ for scroll ----------\r\n  useEffect(() => {\r\n    bottomRef.current?.scrollIntoView({ behavior: \"auto\" });\r\n  }, [msgData]);\r\n\r\n  useEffect(() => {\r\n    getChatHistoryData()\r\n  }, [chatroomId]);\r\n\r\n  useEffect(() => {\r\n    if (chatroomId) {\r\n      const dbRef = ref(db, `messages/${chatroomId}`);\r\n      onValue(dbRef, (snapshot) => {\r\n        let msgArr: any[] = []\r\n        snapshot.forEach((childSnapshot) => {\r\n          const childKey = childSnapshot.key;\r\n          const childData = childSnapshot.val();\r\n          msgArr.push(childData)\r\n        });\r\n        // setChildKey(item.chatRoomId)\r\n        setMsgData(msgArr)\r\n      });\r\n    }\r\n  }, [chatroomId])\r\n\r\n  // ---------------- send chat push API for generate notification -------------------\r\n\r\n  const sendChatPush = () => {\r\n    const obj = {\r\n      method: \"send_chat_push\",\r\n      chat_message: (fileTypeForN === \"\" ? textMsg : fileTypeForN),\r\n      receiver_id: userData?.opp_userId,\r\n      sender_user_name: user?.data?.name,\r\n      user_id: user?.data?.user_id,\r\n    };\r\n    fetch(`${import.meta.env.VITE_PUBLIC_URL}user`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        accept: \"application/json\",\r\n        contentType: \"application/json\",\r\n        version: \"1.0.0\",\r\n        token: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify(obj),\r\n    }).then((res) => {\r\n      res.json().then((response) => {\r\n        if (response.status === 1) {          \r\n        } else {\r\n          // console.log(\"else\", response);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  // ------------ generate unique id ----------------------\r\n  function getUniqueChatId(otherUserId: string) {\r\n    let intUserId = parseInt(user?.data?.user_id)\r\n    let intOtherUserId = parseInt(otherUserId)    \r\n    let result = (intUserId * intOtherUserId)    \r\n    return result.toString()\r\n  }\r\n  // ------------- text input onChange ---------------------\r\n  // const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>, emoji?: any) => {\r\n  //   setTextMsg(e.target.value + emoji)\r\n  // };\r\n\r\n  const addEmoji = (emoji: any) => {\r\n    setTextMsg(textMsg + emoji);\r\n  };\r\n\r\n  // ----------------- file input onChange --------------------\r\n\r\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files.length > 0) {\r\n      setUploading(true);\r\n      const reader = new FileReader();\r\n      // check before / string is video or image in file type\r\n      let isVid = e.target.files[0].type.split(\"/\")[0] === \"video\"\r\n\r\n      const fileType = e?.target?.files[0].type;\r\n      const thumbnail64 = isVid ? (await generateVideoThumbnailBase64(e.target.files[0])) as string : \"\";\r\n      reader.addEventListener('load', () => {\r\n        sendFile(thumbnail64, reader.result, fileType)\r\n      });\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n  }\r\n  // ------------------- generate video base64 thumbnail ---------------\r\n  const generateVideoThumbnailBase64 = (file: any) => {\r\n    return new Promise((resolve, reject) => {\r\n      const canvas = document.createElement(\"canvas\");\r\n      const video = document.createElement(\"video\");\r\n\r\n      // this is important\r\n      video.autoplay = true;\r\n      video.muted = true;\r\n      video.src = URL.createObjectURL(file);\r\n\r\n      video.onloadeddata = () => {\r\n        let ctx = canvas.getContext(\"2d\");\r\n\r\n        canvas.width = video.videoWidth;\r\n        canvas.height = video.videoHeight;\r\n\r\n        ctx?.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\r\n        video.pause();\r\n        return resolve(canvas.toDataURL(\"image/jpg\"));\r\n      };\r\n    });\r\n  };\r\n\r\n  function uploadThumbnail(vidUri: string, thumbBase64: string, fileType: string) {\r\n    const newStorageRef = storageRef(storage, `videos/${uniqueId}.jpeg`);\r\n\r\n    uploadString(newStorageRef, thumbBase64, 'data_url').then((snapshot) => {\r\n      getDownloadURL(storageRef(storage, `videos/${uniqueId}.jpeg`))\r\n        .then((url) => {          \r\n          sendMsg(url, vidUri, fileType);\r\n          toast.success(\"Video uploaded successful\", { position: \"top-center\" });\r\n        })\r\n        .catch((error) => {\r\n          // Handle any errors          \r\n          toast.error(\"thumbnail error\", { position: \"top-center\" });\r\n        });\r\n    })\r\n  }\r\n  // --------------------- send file function -------------------\r\n  // fileType === \"video/mp4\" ? thumbnail :\r\n  const sendFile = (thumbBase64: string, img: string | ArrayBuffer | null, fileType: string) => {\r\n    // setFileTypeForN(fileType === \"image/jpeg\" ? \"image\" : \"video\")\r\n    if (img === null) { setUploading(false); return; }\r\n    const newStorageRef = storageRef(storage, fileType === \"image/jpeg\" ? `images/${uniqueId}.jpeg` : `videos/${uniqueId}.mp4`);\r\n\r\n    uploadString(newStorageRef, img as string, 'data_url').then((snapshot) => {\r\n\r\n      getDownloadURL(storageRef(storage, fileType === \"image/jpeg\" ? `images/${uniqueId}.jpeg` : `videos/${uniqueId}.mp4`))\r\n        .then((url) => {          \r\n          // uploadThumbnail(url, thumbBase64, fileType);\r\n          if (fileType === \"image/jpeg\") {\r\n            sendMsg(\"\", url, fileType); setUploading(false);\r\n            toast.success(\"Image uploaded successful\", { position: \"top-center\" });\r\n            sendChatPush()\r\n          } else { uploadThumbnail(url, thumbBase64, fileType) };\r\n        })\r\n        .catch((error) => {\r\n          // Handle any errors\r\n          setUploading(false); console.error(error);\r\n          toast.error(\"Error while uploading file\", { position: \"top-center\" });\r\n        });\r\n    })\r\n  };\r\n\r\n  // ---------------- user list popup handle ----------------\r\n  const handleUserList = () => {\r\n    setHandleUserListPopup(!handleUserListPopup)\r\n  }\r\n\r\n  // --------------------- go chat click --------------------\r\n  const goChat = (item: any) => {\r\n\r\n    let generateId = getUniqueChatId(item?.user_id)\r\n    const msgListRef = ref(db, `chathistory/${user?.data?.user_id}`);\r\n    const newMsgRef = child(msgListRef, generateId);\r\n\r\n    onValue(newMsgRef, (snapshot) => {\r\n      if (!snapshot.exists()) {\r\n\r\n        let chatHistoryObj = {\r\n          chatHistoryId: generateId,\r\n          chatRoomId: generateId,\r\n          createdAt: `${Date.now().toString()}`,\r\n          last_message: \"\",\r\n          opp_userChatHistoryId: generateId,\r\n          opp_userId: item?.user_id,\r\n          opp_username: item?.name,\r\n          opp_userprofile: item?.photo,\r\n        }\r\n        set(newMsgRef, chatHistoryObj);\r\n\r\n        // ---------------- opp user set chat history ---------------\r\n\r\n        const oppMsgListRef = ref(db, `chathistory/${item?.user_id}`);\r\n        const oopNewMsgRef = child(oppMsgListRef, generateId);\r\n\r\n        let oppChatHistoryObj = {\r\n          chatHistoryId: generateId,\r\n          chatRoomId: generateId,\r\n          createdAt: `${Date.now().toString()}`,\r\n          last_message: \"\",\r\n          opp_userChatHistoryId: generateId,\r\n          opp_userId: user?.data?.user_id,\r\n          opp_username: user?.data?.name,\r\n          opp_userprofile: user?.data?.photo,\r\n        }\r\n        set(oopNewMsgRef, oppChatHistoryObj);\r\n\r\n      }\r\n    });\r\n\r\n    // let chatHistoryObj = {\r\n    //   chatHistoryId: generateId,\r\n    //   chatRoomId: generateId,\r\n    //   createdAt: `${Date.now().toString()}`,\r\n    //   last_message: \"\" || `${msgData[msgData.length - 1]?.text || msgData[msgData.length - 1]?.messageType}`,\r\n    //   opp_userChatHistoryId: generateId,\r\n    //   opp_userId: item?.user_id,\r\n    //   opp_username: item?.name,\r\n    //   opp_userprofile: item?.photo,\r\n    // }\r\n    // set(newMsgRef, chatHistoryObj);\r\n    // setHandleUserListPopup(false)\r\n    // setChatRoom(false)\r\n    // setHandleState(true);\r\n    // setNewUserData(item)\r\n\r\n    // ---------------- opp user set chat history ---------------\r\n\r\n    // const oppMsgListRef = ref(db, `chathistory/${item?.user_id}`);\r\n    // const oopNewMsgRef = child(oppMsgListRef, generateId);\r\n\r\n    // let oppChatHistoryObj = {\r\n    //   chatHistoryId: generateId,\r\n    //   chatRoomId: generateId,\r\n    //   createdAt: `${Date.now().toString()}`,\r\n    //   last_message: \"\" || `${msgData[msgData.length - 1]?.text || msgData[msgData.length - 1]?.messageType}`,\r\n    //   opp_userChatHistoryId: generateId,\r\n    //   opp_userId: user?.data?.user_id,\r\n    //   opp_username: user?.data?.name,\r\n    //   opp_userprofile: user?.data?.photo,\r\n    // }\r\n    // set(oopNewMsgRef, oppChatHistoryObj);\r\n\r\n    // ----------------- create chat Room --------------------------------\r\n\r\n    const chatRoomRef = ref(db, `chatroom/`);\r\n    const newChatRoomRef = child(chatRoomRef, generateId);\r\n\r\n    if (chatData.map((item) => item.chatHistoryId !== generateId)) {\r\n      let chatRoomObj = {\r\n        channel_Id: generateId,\r\n        opp_userId: item?.user_id,\r\n        user_id: user?.data?.user_id,\r\n      }\r\n      update(newChatRoomRef, chatRoomObj);\r\n    } else {\r\n      let chatRoomObj = {\r\n        channel_Id: generateId,\r\n        opp_userId: item?.user_id,\r\n        user_id: user?.data?.user_id,\r\n      }\r\n      set(newChatRoomRef, chatRoomObj);\r\n    }\r\n\r\n    // -------------------- For get messages ------------------------\r\n\r\n    setHandleUserListPopup(false)\r\n    setChatRoom(false)\r\n    setHandleState(true);\r\n    setNewUserData(item)\r\n\r\n    const dbRef = ref(db, `messages/${generateId}`);\r\n    onValue(dbRef, (snapshot) => {\r\n      let msgArr: any[] = []\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childKey = childSnapshot.key;\r\n        const childData = childSnapshot.val();\r\n        msgArr.push(childData)\r\n      });\r\n      setMsgData(msgArr)\r\n    });\r\n    navigate(`/messages/${generateId}`)\r\n  }\r\n\r\n  // -------------- get user chat history data ----------\r\n\r\n  const getChatHistoryData = () => {\r\n    setLoading(true);\r\n    const dbRef = query(ref(db, `chathistory/${user?.data?.user_id}`), orderByChild(\"createdAt\"));\r\n    onValue(dbRef, (snapshot) => {\r\n      let chatArr: any[] = []\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childKey = childSnapshot.key;\r\n        const childData = childSnapshot.val();\r\n        chatArr.push(childData)\r\n      });\r\n      // orderByChild(`${user?.data?.user_id}/createdAt`)\r\n      setLoading(false);\r\n      // console.log(\"chatArr\", chatArr)\r\n      setChatData(chatArr.reverse())\r\n      if (chatroomId) {\r\n        let idx = chatArr.findIndex((obj: any) => obj?.chatRoomId === chatroomId);\r\n        setUserData(chatArr[idx])\r\n      }\r\n    },);\r\n  }\r\n\r\n  // -------------- chat room open click ---------------\r\n\r\n  const handleChatRoom = (item: any) => {\r\n    navigate(`/messages/${item?.chatRoomId}`)\r\n    setUserData(item)\r\n    setChatRoom(false)\r\n    setHandleState(false);\r\n    const dbRef = ref(db, `messages/${item?.chatRoomId}`);\r\n    onValue(dbRef, (snapshot) => {\r\n      let msgArr: any[] = []\r\n      snapshot.forEach((childSnapshot) => {\r\n        const childKey = childSnapshot.key;\r\n        const childData = childSnapshot.val();\r\n        msgArr.push(childData)\r\n      });\r\n      // setChildKey(item.chatRoomId)\r\n      setMsgData(msgArr)\r\n    });\r\n  }\r\n\r\n  // ---------- preview Image and Video click -------------\r\n\r\n  const previewClick = (item: any) => {\r\n    setPreviewUrl(item)\r\n    if (item?.chatPostID) {\r\n      setToggleDetails(!toggleDetails)\r\n    } else {\r\n      setPreviewClickToggle(!previewClickToggle)\r\n    }\r\n  }\r\n  // ----------------- edit Msg Toggle ----------------\r\n\r\n  const handleEditMsgToggle = (item: any) => {\r\n    setEditMsgId(item?.id)\r\n    setEditReaction(item?.arrReaction)\r\n    setEditMsgToggle(!editMsgToggle)\r\n  }\r\n  // ----------------- reaction Toggle ----------------\r\n\r\n  const handleReactionToggle = (item: any) => {\r\n    setReactionId(item?.id)\r\n    setReactionPopup(!reactionPopup)\r\n    setNewItem(item)\r\n  }\r\n\r\n  // ------------------- Reaction Click ------------------\r\n\r\n  const reactionClick = (reactionName?: string, item?: any) => {\r\n    // console.log(\"reactionName\", reactionName, newItem, userData);\r\n    setReactionPopup(!reactionPopup);\r\n\r\n    let oppUserId = userData?.opp_userId;\r\n    let myUserId = user?.data?.user_id;\r\n    let chatRoomId = userData?.chatRoomId;\r\n\r\n    // check if reaction array is available or not\r\n    if (newItem?.arrReaction) {\r\n      // find my reaction index & opp reaction index\r\n      let myReactionIdx = newItem?.arrReaction?.findIndex((item: any) => item?.sendBy === myUserId);\r\n      let oppReactionIdx = newItem?.arrReaction?.findIndex((item: any) => item?.sendBy === oppUserId);\r\n      // check if my reaction is available or not\r\n      const reactionRef = ref(db, `messages/${chatRoomId}/${newItem?.id}`);\r\n      if (myReactionIdx !== -1) {\r\n        // if my reaction is available then check if same reaction is there or not\r\n        if (newItem?.arrReaction[myReactionIdx]?.reaction === reactionName) {\r\n          // if same reaction is there then remove my reaction\r\n          update(reactionRef, { arrReaction: [{ reaction: \"\", sendBy: myUserId }, { reaction: newItem?.arrReaction[oppReactionIdx]?.reaction, sendBy: oppUserId }] });          \r\n        } else {\r\n          // if same reaction is not there then update my reaction\r\n          update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: newItem?.arrReaction[oppReactionIdx]?.reaction, sendBy: oppUserId }] });          \r\n        }\r\n      } // if my reaction is not available then check if opp reaction is available or not\r\n      else {\r\n        // if opp reaction is available then update opp reaction\r\n        if (oppReactionIdx !== -1) {\r\n          update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: newItem?.arrReaction[oppReactionIdx]?.reaction, sendBy: oppUserId }] });\r\n        }\r\n        // if opp reaction is not available then add my reaction\r\n        else {\r\n          update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: \"\", sendBy: oppUserId }] });\r\n        }\r\n      }\r\n    } else {\r\n      // if reaction array is not available then add reaction\r\n      const reactionRef = ref(db, `messages/${chatRoomId}/${newItem?.id}`);\r\n      update(reactionRef, { arrReaction: [{ reaction: reactionName, sendBy: myUserId }, { reaction: \"\", sendBy: oppUserId }] });\r\n    }\r\n    return;\r\n  };\r\n\r\n  // --------------- send msg ------------------------\r\n\r\n  const sendMsg = (thumUrl?: string, fileUrl?: string, fileType?: string) => {\r\n    setFileTypeForN(fileType === \"image/jpeg\" ? \"image\" : \"video\")\r\n    if (editMsgId) {\r\n      const msgListRef = ref(db, `messages/${userData?.chatRoomId}/${editMsgId}`);\r\n\r\n      let updatedMsgObj =\r\n        editReaction?.length > 0 ?\r\n          {\r\n            arrReaction: editReaction[1] !== false ? [{ reaction: editReaction[0]?.reaction, sendBy: editReaction[0]?.sendBy }] : [{ reaction: editReaction[0]?.reaction, sendBy: editReaction[0]?.sendBy }, { reaction: editReaction[1]?.reaction, sendBy: editReaction[1]?.sendBy }],\r\n            chatroomId: userData?.chatRoomId,\r\n            createdAt: `${Date.now().toString()}`,\r\n            id: editMsgId,\r\n            messageBy: user?.data?.user_id,\r\n            messageType: \"text\",\r\n            messagerName: userData?.opp_username,\r\n            text: textMsg,\r\n          } :\r\n          {\r\n            chatroomId: userData?.chatRoomId,\r\n            createdAt: `${Date.now().toString()}`,\r\n            id: editMsgId,\r\n            messageBy: user?.data?.user_id,\r\n            messageType: \"text\",\r\n            messagerName: userData?.opp_username,\r\n            text: textMsg,\r\n          }\r\n\r\n      update(msgListRef, updatedMsgObj);\r\n      setTextMsg(\"\");\r\n      setEditMsgId(\"\");\r\n      setEditReaction([])\r\n    } else {\r\n      let sendMsgObj =\r\n        fileType === \"image/jpeg\" ?\r\n          {\r\n            // arrReaction: [{ reaction: \"\", sendBy: \"\" }],\r\n            chatImageURL: fileUrl,\r\n            chatroomId: userData?.chatRoomId,\r\n            createdAt: `${Date.now().toString()}`,\r\n            id: uniqueId,\r\n            messageBy: user?.data?.user_id,\r\n            messageType: \"image\",\r\n            messagerName: userData?.opp_username,\r\n            text: \"\",\r\n          }\r\n          : fileType === \"video/mp4\" ?\r\n            {\r\n              // arrReaction: [{ reaction: \"\", sendBy: \"\" }],              \r\n              chatVideoThumbnail: thumUrl,\r\n              chatVideoURL: fileUrl,\r\n              chatroomId: userData?.chatRoomId,\r\n              createdAt: `${Date.now().toString()}`,\r\n              id: uniqueId,\r\n              messageBy: user?.data?.user_id,\r\n              messageType: \"video\" || \"post\",\r\n              messagerName: userData?.opp_username,\r\n              text: \"\",\r\n            }\r\n            :\r\n            {\r\n              // arrReaction: [{ reaction: \"\", sendBy: \"\" }],\r\n              chatroomId: userData?.chatRoomId,\r\n              createdAt: `${Date.now().toString()}`,\r\n              id: uniqueId,\r\n              messageBy: user?.data?.user_id,\r\n              messageType: \"text\",\r\n              messagerName: userData?.opp_username,\r\n              text: textMsg,\r\n            }\r\n      set(newMsgRef, sendMsgObj);\r\n      setTextMsg(\"\");\r\n      setUploading(false);\r\n    }\r\n    setNewFileUrl(fileUrl)\r\n    setNewThumbnail(thumUrl)\r\n    sendChatPush()\r\n\r\n    let generateId = getUniqueChatId(userData?.opp_userId)\r\n\r\n    const msgListRef = ref(db, `chathistory/${user?.data?.user_id}`);\r\n    const newChatRef = child(msgListRef, generateId);\r\n\r\n    let chatHistoryObj = {\r\n      chatHistoryId: generateId,\r\n      chatRoomId: generateId,\r\n      createdAt: `${Date.now().toString()}`,\r\n      last_message: textMsg || (fileType === \"image/jpeg\" ? \"image\" : \"video\"),\r\n      opp_userChatHistoryId: generateId,\r\n      opp_userId: userData?.opp_userId,\r\n      opp_username: userData?.opp_username,\r\n      opp_userprofile: userData?.opp_userprofile,\r\n    }\r\n    update(newChatRef, chatHistoryObj);\r\n\r\n    // setHandleUserListPopup(false)\r\n    // setChatRoom(false)\r\n    // setHandleState(true);\r\n    // setNewUserData(item)\r\n\r\n    // ---------------- opp user set chat history ---------------\r\n\r\n    const oppMsgListRef = ref(db, `chathistory/${userData?.opp_userId}`);\r\n    const oopNewMsgRef = child(oppMsgListRef, generateId);\r\n\r\n    let oppChatHistoryObj = {\r\n      chatHistoryId: generateId,\r\n      chatRoomId: generateId,\r\n      createdAt: `${Date.now().toString()}`,\r\n      last_message: textMsg || (fileType === \"image/jpeg\" ? \"image\" : \"video\"),\r\n      opp_userChatHistoryId: generateId,\r\n      opp_userId: user?.data?.user_id,\r\n      opp_username: user?.data?.name,\r\n      opp_userprofile: user?.data?.photo,\r\n    }\r\n    update(oopNewMsgRef, oppChatHistoryObj);\r\n  }\r\n  // --------------- edit msg ----------------------\r\n\r\n  const editMsg = (item?: any) => {\r\n    setEditMsgToggle(!editMsgToggle)\r\n    setTextMsg(item?.text)\r\n  }\r\n\r\n  const openEmojiBoard = () => {\r\n    setToggleEmojiBtn(!toggleEmojiBtn)\r\n  }\r\n\r\n  const focusHandle = () => {\r\n    setToggleEmojiBtn(false)\r\n  }\r\n  const backBtnClick = () => {\r\n    setChatRoom(!chatRoom)\r\n    navigate(\"/messages\")\r\n    setMsgData([])\r\n  }\r\n  return (\r\n    <section className=\"flex flex-col pt-14\">\r\n      {/* <div className=\"discover-box\"> */}\r\n      {/* <div className=\"discover-header\">Messages</div> */}\r\n      {/* <div className=\"discover-border__\"> */}\r\n      {/* {chatRoom === false ? (\r\n            <div\r\n              className=\"discover-follow-list-box\"\r\n              onClick={() => {\r\n                setChatRoom(true);\r\n              }}\r\n            >\r\n              <div className=\"discover-follow-list\">\r\n                <div className=\"discover-follow-list-flex\">\r\n                  <img src={DEF_USER} alt=\"Profile\" className=\"profile-size\" />\r\n                  <div className=\"user_name\">\r\n                    <span>Mohit Seth</span>\r\n                    <span className=\"notification-font_\">Hiii</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"notification-font_\">07:12PM</div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"messages_flex\">\r\n                <img\r\n                  src={BACK_ICON}\r\n                  alt=\"Profile\"\r\n                  onClick={() => {\r\n                    setChatRoom(false);\r\n                  }}\r\n                />\r\n                <div className=\"messages_user_name\">\r\n                  <span className=\"messages_name_text\">Mohit Seth</span>\r\n                </div>\r\n              </div>\r\n             \r\n            </>\r\n          )} */}\r\n      <div className=\"min-w-screen  h-[100%]\">\r\n        <div className=\"min-w-full rounded lg:grid lg:grid-cols-3 \">\r\n\r\n          <div\r\n            className={`border-r border-gray-300 lg:col-span-1  ${chatRoom ? \"\" : \" lg:flex xl:flex  sm:hidden md:hidden xs:hidden\"\r\n              }`}\r\n          >\r\n            {/* <div className=\"mx-3 my-3\">\r\n              <div className=\"relative text-gray-600\">\r\n                <span className=\"absolute inset-y-0 left-0 flex items-center pl-2\">\r\n                  <svg fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" className=\"w-6 h-6 text-gray-300\">\r\n                    <path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\r\n                  </svg>\r\n                </span>\r\n                <input type=\"search\" className=\"block w-full py-2 pl-10 bg-gray-100 rounded outline-none\" name=\"search\" placeholder=\"Search\" required />\r\n              </div>\r\n            </div> */}\r\n            <ul className=\"overflow-auto min-h-[calc(100vh-60px)] w-full flex flex-col\">\r\n              <>\r\n                <div className=\"w-full my-2 mb-2 flex justify-between items-center \" >\r\n                  <h2 className=\"ml-2 text-lg text-gray-600\">Chats</h2>\r\n                  <img src={ADD_ICON} alt=\"ADD_ICON\" className=\"w-[35px]\" onClick={handleUserList} />\r\n                </div>\r\n                {!loading ? (\r\n                  chatData.length > 0 ? (\r\n                    chatData.map((item: any, index: any) => {\r\n                      return (\r\n                        <li key={index} >\r\n                          <span\r\n                            onClick={() => handleChatRoom(item)}\r\n                            className={`${userData?.opp_username === item?.opp_username ? \"bg-gray-100\" : \"\"}  flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 cursor-pointer hover:bg-gray-100 focus:outline-none`}\r\n                          >\r\n                            <img\r\n                              className=\"object-cover w-10 h-10 rounded-full\"\r\n                              src={item?.opp_userprofile || DEF_USER}\r\n                              alt=\"username\"\r\n                              crossOrigin=\"anonymous\"\r\n                            />\r\n                            <div className=\"w-full pb-2\">\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"block ml-2 font-semibold text-gray-600\">\r\n                                  {item?.opp_username}\r\n                                </span>\r\n                                <span className=\"block ml-2 text-sm text-gray-600\">\r\n                                  {moment.unix(item?.createdAt / 1000).format(\"LT\")}\r\n                                </span>\r\n                              </div>\r\n                              <span className=\"block ml-2 text-sm text-gray-600\">\r\n                                {item?.last_message}\r\n                              </span>\r\n                            </div>\r\n                          </span>\r\n                        </li>\r\n                      )\r\n                    })\r\n                  ) : (\r\n                    <div className=\"no-msg center flex flex-1 justify-center items-center flex-col min-h-full \">\r\n                      <img src={MSG_ICON} alt=\"msg\" />\r\n                      <span className=\"block text-sm text-gray-600\">\r\n                        No Messages\r\n                      </span>\r\n                    </div>\r\n                  )) : <Loading />\r\n                }\r\n              </>\r\n            </ul>\r\n          </div>\r\n          {!chatRoom || chatroomId ? (\r\n            <div className={`${chatRoom ? \"lg:flex xl:flex sm:hidden md:hidden xs:hidden\" : \"\"} lg:col-span-2 lg:block`}              >\r\n              <div className=\"relative w-full mt-2\">\r\n                <div className=\"relative flex items-center px-3 border-b border-gray-300 \">\r\n                  <img src={BACK_ICON} alt=\"Profile\" className=\"mb-2 block lg:hidden\" onClick={backBtnClick} />\r\n                  <img\r\n                    className={`object-cover w-10 h-10 rounded-full mb-2 ml-6 lg:ml-3 ${userData?.opp_userId ? \"cursor-pointer\" : \"\"}`}\r\n                    src={(handleState ? newUserData.photo : userData?.opp_userprofile) || DEF_USER}\r\n                    alt=\"username\"\r\n                    onClick={() => userData?.opp_userId && navigate(`/userprofile/${userData?.opp_userId}`)}\r\n                    crossOrigin=\"anonymous\"\r\n                  />\r\n                  <span className=\"block ml-2 font-bold text-gray-600 mb-2\">\r\n                    {handleState ? newUserData?.name : userData?.opp_username}\r\n                  </span>\r\n                </div>\r\n                <div className=\"relative w-full px-6 overflow-y-auto h-[calc(100vh-12rem)]\">\r\n                  <ul className=\"space-y-2\">\r\n                    {/* ============================== VIDEO VIEW ================================== */}\r\n                    {msgData.map((item: any, index: number) => {\r\n                      return (<Fragment key={index} >\r\n                        {\r\n                          (item?.messageType === \"post\" || item?.messageType === \"video\" || item?.messageType === \"image\") ?\r\n                            item?.messageBy !== user?.data?.user_id ?\r\n                              (<li className=\"flex justify-start relative\">\r\n                                <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xs text-black bg-gray-100 rounded-t-xl rounded-r-xl min-w-[12rem] min-h-[12rem]  `}> {/* my IMG msg */}\r\n                                  <img\r\n                                    className=\"block rounded-t-lg h-[200px] w-[200px] object-cover\"\r\n                                    crossOrigin=\"anonymous\"\r\n                                    src={item?.chatVideoThumbnail || item?.chatImageURL}\r\n                                    alt=\"IMG\"\r\n                                    onClick={() => previewClick(item)}\r\n                                  />\r\n                                  {item?.messageType === \"image\" ? null\r\n                                    : (\r\n                                      <img\r\n                                        className=\"block cursor-pointer rounded-t-lg absolute top-[calc(50%-21px)] left-[calc(50%-21px)]\"\r\n                                        src={PLAY_ICON}\r\n                                        alt=\"IMG\"\r\n                                        onClick={() => previewClick(item)}\r\n                                        crossOrigin=\"anonymous\"\r\n                                      />\r\n                                    )}\r\n                                  <div className=\"flex justify-between align-baseline \" >\r\n                                    <span className=\"text-gray-500 text-xs text-left pl-2 flex justify-center flex-col mr-2 \">\r\n                                      {moment.unix(item?.createdAt / 1000).format(\"LT\")}\r\n                                    </span>\r\n                                    <img src={EMOJI_ICON} alt=\"EMOJI_ICON\" className=\"w-5 cursor-pointer mr-2 text-white \" onClick={() => handleReactionToggle(item)} />\r\n                                  </div>\r\n                                  {reactionPopup && (reactionId === item?.id) &&\r\n                                    <div role=\"tooltip\" className=\"absolute bottom-5 left-0  z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\r\n                                      <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\r\n                                        <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">üëç</span>\r\n                                        <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">‚ù§Ô∏è</span>\r\n                                        <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üî•</span>\r\n                                        <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üëè</span>\r\n                                        <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">üòÇ</span>\r\n                                      </div>\r\n                                    </div>}\r\n                                  {\r\n                                    item?.arrReaction &&\r\n                                    <div className={`${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10 right-0`}>\r\n                                      {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n\r\n                                      {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n                                    </div>\r\n                                  }\r\n                                </div>\r\n                              </li>)\r\n                              :\r\n                              (<li className=\"flex justify-end \">\r\n                                <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xs text-white bg-black min-w-[12rem] min-h-[12rem] rounded-t-xl rounded-l-xl shadow text-right`}> {/* other IMG msg */}\r\n                                  <img\r\n                                    className=\"block rounded-t-lg h-[200px] w-[200px] object-cover\"\r\n                                    crossOrigin=\"anonymous\"\r\n                                    src={item?.chatVideoThumbnail || item?.chatImageURL}\r\n                                    alt=\"IMG\"\r\n                                    onClick={() => previewClick(item)}\r\n                                  />\r\n                                  {item?.messageType === \"image\" ? null\r\n                                    : <img\r\n                                      className=\"block cursor-pointer rounded-t-lg absolute top-[calc(50%-21px)] left-[calc(50%-21px)]\"\r\n                                      src={PLAY_ICON}\r\n                                      alt=\"IMG\"\r\n                                      onClick={() => previewClick(item)}\r\n                                      crossOrigin=\"anonymous\"\r\n                                    />}\r\n                                  <div className=\"flex justify-between align-baseline \" >\r\n                                    {/* <img src={EMOJI_ICON} alt=\"EMOJI_ICON\" className=\"w-5 \" /> */}\r\n                                    <div onClick={() => handleReactionToggle(item)} >\r\n                                      <svg\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        className=\"w-5 h-5 text-white cursor-pointer ml-2 \"\r\n                                        fill=\"none\"\r\n                                        viewBox=\"0 0 24 24\"\r\n                                        stroke=\"currentColor\"\r\n                                      >\r\n                                        <path\r\n                                          strokeLinecap=\"round\"\r\n                                          strokeLinejoin=\"round\"\r\n                                          strokeWidth=\"2\"\r\n                                          d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n                                        />\r\n                                      </svg>\r\n                                    </div>\r\n                                    <span className=\"text-white text-xs text-right flex justify-center flex-col mr-2 \">\r\n                                      {moment.unix(item?.createdAt / 1000).format(\"LT\")}\r\n                                    </span>\r\n                                  </div>\r\n                                  {reactionPopup && (reactionId === item?.id) &&\r\n                                    <div role=\"tooltip\" className=\"absolute bottom-5 left-0 z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\r\n                                      <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\r\n                                        <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">üëç</span>\r\n                                        <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">‚ù§Ô∏è</span>\r\n                                        <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üî•</span>\r\n                                        <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üëè</span>\r\n                                        <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">üòÇ</span>\r\n                                      </div>\r\n                                    </div>}\r\n                                  {\r\n                                    item?.arrReaction &&\r\n                                    <div className={`${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10`}>\r\n                                      {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n\r\n                                      {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n                                    </div>\r\n                                  }\r\n                                </div>\r\n                              </li>)\r\n                            : item?.messageBy !== user?.data?.user_id ?\r\n                              (<li className=\"flex justify-start\">\r\n                                <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xl px-4 py-2 text-black bg-gray-100 rounded-t-xl rounded-r-xl `}> {/* my txt msg */}\r\n                                  <span className=\"block\">{item?.text}</span>\r\n                                  <div className=\"flex justify-between align-baseline \" >\r\n                                    <span className=\"text-gray-500 text-xs text-right flex justify-center flex-col mr-3\">\r\n                                      {moment.unix(item?.createdAt / 1000).format(\"LT\")}\r\n                                    </span>\r\n                                    <img src={EMOJI_ICON} alt=\"EMOJI_ICON\" className=\"w-5 cursor-pointer text-gray-500 \" onClick={() => handleReactionToggle(item)} />\r\n                                  </div>\r\n                                  {reactionPopup && (reactionId === item?.id) &&\r\n                                    <div role=\"tooltip\" className=\"absolute bottom-5 left-0  z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\r\n                                      <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\r\n                                        <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">üëç</span>\r\n                                        <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">‚ù§Ô∏è</span>\r\n                                        <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üî•</span>\r\n                                        <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üëè</span>\r\n                                        <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">üòÇ</span>\r\n                                      </div>\r\n                                    </div>}\r\n                                  {item?.arrReaction &&\r\n                                    <div className={`${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10 right-0`} >\r\n                                      {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                      {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n\r\n                                      {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                      {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n                                    </div>\r\n                                  }\r\n                                </div>\r\n                              </li>)\r\n                              :\r\n                              (\r\n                                <>\r\n                                  <li className=\"flex justify-end\">\r\n                                    <div className={`${(item?.arrReaction && (item?.arrReaction[0]?.reaction !== \"\" || item?.arrReaction[1]?.reaction !== \"\")) && \"mb-6\"} relative max-w-xl px-4 py-2 text-white bg-black rounded-t-xl rounded-l-xl shadow text-right`}> {/* my txt msg */}\r\n                                      <div className=\"flex justify-end \" >\r\n                                        <span className=\"block text-left \">{item?.text}</span>\r\n                                        <img src={WHITE_MORE_ICON} alt=\"more\" className=\"object-contain h-5 cursor-pointer w-4 ml-2 \" onClick={() => handleEditMsgToggle(item)} />\r\n                                      </div>\r\n                                      <div className=\"flex justify-end align-baseline \" >\r\n                                        <div onClick={() => handleReactionToggle(item)} >\r\n\r\n                                          <svg\r\n                                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                                            className=\"w-5 h-5 text-white cursor-pointer \"\r\n                                            fill=\"none\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            stroke=\"currentColor\"\r\n                                          >\r\n                                            <path\r\n                                              strokeLinecap=\"round\"\r\n                                              strokeLinejoin=\"round\"\r\n                                              strokeWidth=\"2\"\r\n                                              d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n                                            />\r\n                                          </svg>\r\n                                        </div>\r\n                                        <span className=\"text-white text-xs text-right flex justify-center flex-col ml-3 \">\r\n                                          {moment.unix(item?.createdAt / 1000).format(\"LT\")}\r\n                                        </span>\r\n                                      </div>\r\n                                      {editMsgToggle && (editMsgId === item?.id) &&\r\n                                        <div role=\"tooltip\" className=\"absolute top-20px left-0 z-40 inline-block w-32 text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\r\n                                          <button onClick={() => editMsg(item)} className=\"flex items-center justify-center w-full px-3 py-2 text-center bg-gray-100 cursor-pointer select-none rounded-xl rounded-t-xl hover:bg-gray-200\">\r\n                                            <h3 className=\"font-bold text-black font-lato\">Edit</h3>\r\n                                          </button>\r\n                                        </div>}\r\n                                      {reactionPopup && (reactionId === item?.id) &&\r\n                                        <div role=\"tooltip\" className=\"absolute bottom-5 -left-16 z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl \">\r\n                                          <div className=\"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl \">\r\n                                            <span onClick={() => reactionClick(\"Thumbs Up\", item)} className=\"font-bold text-black font-lato text-xl mr-2 \">üëç</span>\r\n                                            <span onClick={() => reactionClick(\"Heart\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">‚ù§Ô∏è</span>\r\n                                            <span onClick={() => reactionClick(\"Fire\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üî•</span>\r\n                                            <span onClick={() => reactionClick(\"Claps\", item)} className=\"font-bold text-black font-lato text-xl mx-2 \">üëè</span>\r\n                                            <span onClick={() => reactionClick(\"Tears of Joy\", item)} className=\"font-bold text-black font-lato text-xl ml-2 \">üòÇ</span>\r\n                                          </div>\r\n                                        </div>}\r\n                                      {\r\n                                        item?.arrReaction &&\r\n                                        <div className={`px-2 py-0.5 ${(item?.arrReaction[0]?.reaction === \"\") && (item?.arrReaction[1]?.reaction === \"\") ? \"hidden\" : \"\"} bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10`}>\r\n                                          {item?.arrReaction[0]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                          {item?.arrReaction[0]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                          {item?.arrReaction[0]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                          {item?.arrReaction[0]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                          {item?.arrReaction[0]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n\r\n                                          {item?.arrReaction[1]?.reaction === \"Thumbs Up\" && <span>üëç</span>}\r\n                                          {item?.arrReaction[1]?.reaction === \"Heart\" && <span>‚ù§Ô∏è</span>}\r\n                                          {item?.arrReaction[1]?.reaction === \"Fire\" && <span>üî•</span>}\r\n                                          {item?.arrReaction[1]?.reaction === \"Claps\" && <span>üëè</span>}\r\n                                          {item?.arrReaction[1]?.reaction === \"Tears of Joy\" && <span>üòÇ</span>}\r\n                                        </div>\r\n                                      }\r\n                                    </div>\r\n                                    {/* <div className=\"relative max-w-xl px-4 py-2 text-white bg-black shadow text-right\">\r\n                                    </div> */}\r\n                                  </li>\r\n                                </>\r\n                              )\r\n                        }\r\n                        <div ref={bottomRef} />\r\n                      </Fragment>)\r\n                    })}\r\n\r\n                    {/* <li className=\"flex justify-end\">\r\n                        <div className=\"relative max-w-xl px-4 py-2 text-white bg-black rounded-t-xl rounded-l-xl shadow text-right\">\r\n                          <span className=\"block\">Hiiii</span>\r\n                          <span className=\"text-white text-xs text-right\">\r\n                            10:37 AM\r\n                          </span>\r\n                        </div>\r\n                      </li> */}\r\n\r\n                    {/* <li className=\"flex justify-start\">\r\n                      <div className=\"relative max-w-xl px-4 py-2 text-black bg-gray-100 rounded-t-xl rounded-r-xl \">\r\n                        <span className=\"block\">\r\n                          Lorem ipsum dolor sit, amet consectetur adipisicing\r\n                          elit.\r\n                        </span>\r\n                        <span className=\"text-gray-500 text-xs text-left\">\r\n                          10:37 AM\r\n                        </span>\r\n                      </div>\r\n                      </li> */}\r\n                    {/* ============================== IMG VIEW ================================== */}\r\n                    {/* <li className=\"flex justify-start\">\r\n                      <div className=\"relative max-w-xs text-black bg-gray-100 rounded-t-xl rounded-r-xl\">\r\n                        <img\r\n                          className=\"block rounded-t-lg\"\r\n                          src={BLACK_LOGO}\r\n                          alt=\"IMG\"\r\n                        />\r\n                        <span className=\"text-gray-500 text-xs text-left pl-2\">\r\n                          10:37 AM\r\n                        </span>\r\n                      </div>\r\n                      </li> */}\r\n                    {/* ============================== VIDEO VIEW ================================== */}\r\n                  </ul>\r\n                </div>\r\n                {/* <ChatScreen userData={userData} /> */}\r\n                <div className=\"relative flex items-center justify-between w-full p-3 border-t border-gray-300\">\r\n                  {toggleEmojiBtn && <div className=\"absolute -top-[450px]\" > <EmojiBoard addEmoji={addEmoji} /></div>}\r\n                  <button onClick={openEmojiBoard} >\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-6 h-6 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                  </button>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Message\"\r\n                    className=\"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-full outline-none focus:text-gray-700\"\r\n                    name=\"message\"\r\n                    autoComplete=\"off\"\r\n                    required\r\n                    value={textMsg}\r\n                    onChange={(e) => setTextMsg(e.target.value)}\r\n                    onKeyDown={(e) => { if (e.key === 'Enter') { sendMsg() } }}\r\n                    onFocus={focusHandle}\r\n                  />\r\n                  <div className=\"file-msg cursor-pointer \">\r\n                    <input type={\"file\"} className=\"file-msg-input\" onChange={handleFileChange} />\r\n                  </div>\r\n\r\n                  <button disabled={textMsg === \"\"} type=\"submit\" onClick={() => sendMsg()} >\r\n                    <svg className=\"w-5 h-5 text-gray-500 origin-center transform rotate-90\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                      <path d=\"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z\" />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className={\r\n              `${chatRoom ? \"lg:flex xl:flex sm:hidden md:hidden xs:hidden\" : \"\"} lg:col-span-2 lg:block justify-center items-center font-semibold flex-col text-lg`\r\n            }>\r\n              <img src={ADD_ICON} alt=\"ADD_ICON\" className=\"w-12 mt-3 mb-11\" onClick={handleUserList} />\r\n              {\"Start a conversation\"}\r\n              <span className=\"flex justify-center items-center text-sm mt-4\">\r\n                by clicking on the + icon\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* ================================================= */}\r\n      {handleUserListPopup && <UserListPopup visible={handleUserListPopup} onClose={setHandleUserListPopup} goChat={goChat} sendMsg={sendMsg} />}\r\n      <Modal subClass=\" bg-white rounded-xl shadow-2xl  sm:w-1/5 xs:8/12 mx-0 flex justify-center\" visible={uploading} onClose={() => { }} hideClose >\r\n        <div className=\"flex flex-col items-center justify-center text-center\">\r\n          <div className=\"flex items-center justify-center rounded-full\">\r\n            <SpinningLoader\r\n              isLoading\r\n              colClass={`text-black m-auto`}\r\n              size={10}\r\n              className=\"w-full flex justify-center items-center\"\r\n            />\r\n          </div>\r\n          <p className=\"text-lg font-medium text-gray-500\">Uploading...</p>\r\n        </div>\r\n      </Modal>\r\n      {\r\n        previewClickToggle && (\r\n          <div className={\"fixed text-black flex items-center justify-center overflow-auto z-40 bg-black bg-opacity-40 left-0 right-0 top-0 bottom-0 transition-all duration-300\"}>\r\n            <Modal toggleSpace={true} visible={previewClickToggle} hideClose onClose={setPreviewClickToggle} subClass=\"w-[100%] mx-1 sm:mx-10 relative min-w-[15rem] min-h-[15rem]\">\r\n              {/* <div className={\" relative bg-white rounded-xl shadow-2xl py-2 sm:h-4/5 sm:mx-10 sx:h-4/5  xs:w-8/12 mx-10 flex flex-col overflow-hidden \"}> */}\r\n              <img\r\n                src={CLOSE_ICON}\r\n                alt=\"Close\"\r\n                className=\"absolute top-0 right-0 bg-black p-2 rounded-bl-3xl bg-opacity-50 cursor-pointer z-40\"\r\n                onClick={() => setPreviewClickToggle(!previewClickToggle)}\r\n              />\r\n              {\r\n                previewUrl?.chatVideoURL ?\r\n                  <video crossOrigin=\"anonymous\" className=\"object-contain w-full h-full\" autoPlay>\r\n                    <source src={previewUrl?.chatVideoURL as string} type=\"video/mp4\" />\r\n                  </video> :\r\n                  <img src={previewUrl?.chatImageURL} alt=\"video and image\" className=\"object-contain  w-full h-full \" />\r\n              }\r\n              {/* </div> */}\r\n            </Modal>\r\n          </div>)\r\n      }\r\n      {toggleDetails && (\r\n        <PostDetails\r\n          key={previewUrl?.chatPostID}\r\n          closeToggle={setToggleDetails}\r\n          chatPostID={previewUrl?.chatPostID}\r\n        />\r\n      )}\r\n    </section >\r\n  );\r\n}\r\nexport default Messages;\r\n\r\n\r\n\r\n// private fun mergeVideoAndAudio(videoSource: String, audioSource: String, output: String) {\r\n//   try {\r\n//       val dialogloding = showLoading()\r\n//       val retriever = MediaMetadataRetriever()\r\n//       retriever.setDataSource(videoSource)\r\n//       val width =\r\n//           Integer.valueOf(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_WIDTH))\r\n//       val height =\r\n//           Integer.valueOf(retriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_HEIGHT))\r\n//       retriever.release()\r\n\r\n//       val cmd =\r\n//           \"-i $videoSource -stream_loop -1 -i $audioSource -shortest -map 0:v:0 -map 1:a:0 -c:v copy -c:a libmp3lame -q:a 1 -y -s $width*$height $output\"\r\n\r\n// //            FFmpeg.execute(cmd)\r\n//       FFmpeg.executeAsync(cmd) { executionId, returnCode ->\r\n//           when (returnCode) {\r\n//               RETURN_CODE_SUCCESS -> {\r\n//                   dialogloding.dismiss()\r\n//                   videoUrl = output\r\n//                   setDataInResult()\r\n//               }\r\n//               RETURN_CODE_CANCEL -> {\r\n//                   Log.i(\"VideoPreviewActivity\", \"Async command execution cancelled by user.\");\r\n//               }\r\n//               else -> {\r\n//                   Log.i(\"VideoPreviewActivity\", String.format(\"Async command execution failed with returnCode=%d.\", returnCode));\r\n//               }\r\n//           }\r\n//       }\r\n//   } catch (e: Exception) {\r\n//       e.printStackTrace()\r\n//   }\r\n// }\r\n\r\n// -------- my firebase console ------------\r\n\r\n// VITE_FIRE_API_KEY = \"AIzaSyDZYTMGvFNHDENKPu9V8loN6BN0PENeNUM\"\r\n// VITE_FIRE_AUTH_DOM = \"chats-fb0df.firebaseapp.com\"\r\n// VITE_FIRE_DB_URL = \"https://chats-fb0df-default-rtdb.firebaseio.com\"\r\n// VITE_FIRE_PRJ_ID = \"chats-fb0df\"\r\n// VITE_FIRE_STG_BKT = \"chats-fb0df.appspot.com\"\r\n// VITE_FIRE_MSG_ID = \"948794299545\"\r\n// VITE_FIRE_APP_ID = \"1:948794299545:web:8ae4153496a77676555408\"\r\n// VITE_FIRE_MESG_ID = \"G-FWW0MN31Y5\"\r\n\r\n// -------- live console ------------\r\n\r\n// VITE_FIRE_API_KEY = \"AIzaSyAmUQrwx57wwbgMTeu71CnJg8acp2Sllhk\"\r\n// VITE_FIRE_AUTH_DOM = \"newworldorder-46319.firebaseapp.com\"\r\n// VITE_FIRE_DB_URL = \"https://newworldorder-46319-default-rtdb.firebaseio.com\"\r\n// VITE_FIRE_PRJ_ID = \"newworldorder-46319\"\r\n// VITE_FIRE_STG_BKT = \"newworldorder-46319.appspot.com\"\r\n// VITE_FIRE_MSG_ID = \"65383464540\"\r\n// VITE_FIRE_APP_ID = \"1:65383464540:web:a81a75e6c7b8cb8166b099\"\r\n// VITE_FIRE_MESG_ID = \"G-QZGJ2KEYYL\""],"names":["MSG_ICON","EMOJI_ICON","PLAY_ICON","ADD_ICON","Messages","storage","getStorage","navigate","useNavigate","chatroomId","useParams","user","useSelector","state","token","chatRoom","setChatRoom","useState","loading","setLoading","handleState","setHandleState","handleUserListPopup","setHandleUserListPopup","chatData","setChatData","msgData","setMsgData","userData","setUserData","newUserData","setNewUserData","textMsg","setTextMsg","uploading","setUploading","reactionPopup","setReactionPopup","reactionId","setReactionId","editMsgToggle","setEditMsgToggle","editMsgId","setEditMsgId","editReaction","setEditReaction","previewClickToggle","setPreviewClickToggle","toggleDetails","setToggleDetails","previewUrl","setPreviewUrl","newFileUrl","setNewFileUrl","newThumbnail","setNewThumbnail","newItem","setNewItem","fileTypeForN","setFileTypeForN","toggleEmojiBtn","setToggleEmojiBtn","msgListRef","ref","db","newMsgRef","push","uniqueId","bottomRef","useRef","useEffect","_a","getChatHistoryData","dbRef","onValue","snapshot","msgArr","childSnapshot","childData","sendChatPush","obj","_b","res","response","getUniqueChatId","otherUserId","intUserId","intOtherUserId","addEmoji","emoji","handleFileChange","e","reader","isVid","fileType","thumbnail64","generateVideoThumbnailBase64","sendFile","file","resolve","reject","canvas","video","ctx","uploadThumbnail","vidUri","thumbBase64","newStorageRef","storageRef","uploadString","getDownloadURL","url","sendMsg","toast","error","img","handleUserList","goChat","item","generateId","child","chatHistoryObj","set","oppMsgListRef","oopNewMsgRef","oppChatHistoryObj","_c","chatRoomRef","newChatRoomRef","chatRoomObj","update","query","orderByChild","chatArr","idx","handleChatRoom","previewClick","handleEditMsgToggle","handleReactionToggle","reactionClick","reactionName","oppUserId","myUserId","chatRoomId","myReactionIdx","oppReactionIdx","reactionRef","_d","_e","_f","_g","thumUrl","fileUrl","updatedMsgObj","_h","sendMsgObj","_i","_j","_k","_l","newChatRef","_m","_n","_o","editMsg","openEmojiBoard","focusHandle","backBtnClick","jsxs","jsx","Fragment","Loading","index","DEF_USER","moment","BACK_ICON","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_A","_B","_C","_D","_E","_F","_G","_H","_I","_J","_K","_L","_M","_N","_O","_P","_Q","_R","_S","_T","WHITE_MORE_ICON","_U","_V","_W","_X","_Y","_Z","__","_$","_aa","_ba","_ca","_da","EmojiBoard","UserListPopup","Modal","SpinningLoader","CLOSE_ICON","PostDetails"],"mappings":"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"}