import{r as h,a as t,j as e,F as ie}from"./jsx-runtime-911a162d.js";import{aY as We,c as qe,b as Ke,u as Ye,p as R,q as N,aZ as Qe,v as K,a_ as Ze,a$ as Xe,D as ge,y as Y,k as De,aw as me,b0 as ao,b1 as eo,b2 as oo,l as so,aB as no,P as ro,b3 as ra,b4 as xe,b5 as fe,Q as la,t as Q,b6 as $,w as ca}from"./EmojiBoard-9ff11c42.js";import"./web3.min-e56af654.js";import{I as ue}from"./index-79255bbd.js";const lo="/assets/MSG_ICON-a77b8fc8.svg",be="/assets/emoji_icon-9c7d260b.svg",ye="/assets/play-23fc5ae7.svg",Re="/assets/ADD_ICON-5a73d578.svg";function xo(){const Z=We(),X=qe(),{chatroomId:S}=Ke(),{user:s}=Ye(a=>a.UserLogin),Ne=s==null?void 0:s.token,[H,ta]=h.useState(!0),[ke,xa]=h.useState(!1),[fa,ua]=h.useState(!1),[da,ha]=h.useState(!1),[pa,ve]=h.useState([]),[ba,D]=h.useState([]),[o,ya]=h.useState(null),[m,we]=h.useState(null),[I,E]=h.useState(""),[Ce,U]=h.useState(!1),[B,Ra]=h.useState(!1),[aa,_e]=h.useState(""),[ia,Na]=h.useState(!1),[A,ka]=h.useState(""),[v,va]=h.useState([]),[ea,ga]=h.useState(!1),[wa,Ca]=h.useState(!1),[f,Ie]=h.useState(null),[co,je]=h.useState(""),[to,Te]=h.useState(""),[p,$e]=h.useState(),[_a,Se]=h.useState("");h.useState("");const[Ia,ja]=h.useState(!1),Me=R(N,`messages/${o==null?void 0:o.chatRoomId}`),Ta=Qe(Me);let j=Ta.key;const $a=h.useRef(null);h.useEffect(()=>{var a;(a=$a.current)==null||a.scrollIntoView({behavior:"auto"})},[ba]),h.useEffect(()=>{Ae()},[S]),h.useEffect(()=>{if(S){const a=R(N,`messages/${S}`);K(a,r=>{let l=[];r.forEach(n=>{n.key;const c=n.val();l.push(c)}),D(l)})}},[S]);const Sa=()=>{var r,l;const a={method:"send_chat_push",chat_message:_a===""?I:_a,receiver_id:o==null?void 0:o.opp_userId,sender_user_name:(r=s==null?void 0:s.data)==null?void 0:r.name,user_id:(l=s==null?void 0:s.data)==null?void 0:l.user_id};fetch("https://nwo.capital/app/state/api/user",{method:"POST",headers:{accept:"application/json",contentType:"application/json",version:"1.0.0",token:`Bearer ${Ne}`},body:JSON.stringify(a)}).then(n=>{n.json().then(c=>{c.status})})};function Ma(a){var c;let r=parseInt((c=s==null?void 0:s.data)==null?void 0:c.user_id),l=parseInt(a);return(r*l).toString()}const Le=a=>{E(I+a)},Be=async a=>{var r;if(a.target.files&&a.target.files.length>0){U(!0);const l=new FileReader;let n=a.target.files[0].type.split("/")[0]==="video";const c=(r=a==null?void 0:a.target)==null?void 0:r.files[0].type,d=n?await Oe(a.target.files[0]):"";l.addEventListener("load",()=>{Ee(d,l.result,c)}),l.readAsDataURL(a.target.files[0])}},Oe=a=>new Promise((r,l)=>{const n=document.createElement("canvas"),c=document.createElement("video");c.autoplay=!0,c.muted=!0,c.src=URL.createObjectURL(a),c.onloadeddata=()=>{let d=n.getContext("2d");return n.width=c.videoWidth,n.height=c.videoHeight,d==null||d.drawImage(c,0,0,c.videoWidth,c.videoHeight),c.pause(),r(n.toDataURL("image/jpg"))}});function He(a,r,l){const n=ra(Z,`videos/${j}.jpeg`);xe(n,r,"data_url").then(c=>{fe(ra(Z,`videos/${j}.jpeg`)).then(d=>{F(d,a,l),la.success("Video uploaded successful",{position:"top-center"})}).catch(d=>{la.error("thumbnail error",{position:"top-center"})})})}const Ee=(a,r,l)=>{if(r===null){U(!1);return}const n=ra(Z,l==="image/jpeg"?`images/${j}.jpeg`:`videos/${j}.mp4`);xe(n,r,"data_url").then(c=>{fe(ra(Z,l==="image/jpeg"?`images/${j}.jpeg`:`videos/${j}.mp4`)).then(d=>{l==="image/jpeg"?(F("",d,l),U(!1),la.success("Image uploaded successful",{position:"top-center"}),Sa()):He(d,a,l)}).catch(d=>{U(!1),console.error(d),la.error("Error while uploading file",{position:"top-center"})})})},La=()=>{ha(!da)},Ue=a=>{var w,C,_;let r=Ma(a==null?void 0:a.user_id);const l=R(N,`chathistory/${(w=s==null?void 0:s.data)==null?void 0:w.user_id}`),n=Q(l,r);K(n,g=>{var y,x,u;if(!g.exists()){let k={chatHistoryId:r,chatRoomId:r,createdAt:`${Date.now().toString()}`,last_message:"",opp_userChatHistoryId:r,opp_userId:a==null?void 0:a.user_id,opp_username:a==null?void 0:a.name,opp_userprofile:a==null?void 0:a.photo};ca(n,k);const b=R(N,`chathistory/${a==null?void 0:a.user_id}`),M=Q(b,r);let L={chatHistoryId:r,chatRoomId:r,createdAt:`${Date.now().toString()}`,last_message:"",opp_userChatHistoryId:r,opp_userId:(y=s==null?void 0:s.data)==null?void 0:y.user_id,opp_username:(x=s==null?void 0:s.data)==null?void 0:x.name,opp_userprofile:(u=s==null?void 0:s.data)==null?void 0:u.photo};ca(M,L)}});const c=R(N,"chatroom/"),d=Q(c,r);if(pa.map(g=>g.chatHistoryId!==r)){let g={channel_Id:r,opp_userId:a==null?void 0:a.user_id,user_id:(C=s==null?void 0:s.data)==null?void 0:C.user_id};$(d,g)}else{let g={channel_Id:r,opp_userId:a==null?void 0:a.user_id,user_id:(_=s==null?void 0:s.data)==null?void 0:_.user_id};ca(d,g)}ha(!1),ta(!1),ua(!0),we(a);const T=R(N,`messages/${r}`);K(T,g=>{let y=[];g.forEach(x=>{x.key;const u=x.val();y.push(u)}),D(y)}),X(`/messages/${r}`)},Ae=()=>{var r;xa(!0);const a=Ze(R(N,`chathistory/${(r=s==null?void 0:s.data)==null?void 0:r.user_id}`),Xe("createdAt"));K(a,l=>{let n=[];if(l.forEach(c=>{c.key;const d=c.val();n.push(d)}),xa(!1),ve(n.reverse()),S){let c=n.findIndex(d=>(d==null?void 0:d.chatRoomId)===S);ya(n[c])}})},Fe=a=>{X(`/messages/${a==null?void 0:a.chatRoomId}`),ya(a),ta(!1),ua(!1);const r=R(N,`messages/${a==null?void 0:a.chatRoomId}`);K(r,l=>{let n=[];l.forEach(c=>{c.key;const d=c.val();n.push(d)}),D(n)})},oa=a=>{Ie(a),a!=null&&a.chatPostID?Ca(!wa):ga(!ea)},Pe=a=>{ka(a==null?void 0:a.id),va(a==null?void 0:a.arrReaction),Na(!ia)},sa=a=>{_e(a==null?void 0:a.id),Ra(!B),$e(a)},i=(a,r)=>{var d,T,w,C,_,g,y;Ra(!B);let l=o==null?void 0:o.opp_userId,n=(d=s==null?void 0:s.data)==null?void 0:d.user_id,c=o==null?void 0:o.chatRoomId;if(p!=null&&p.arrReaction){let x=(T=p==null?void 0:p.arrReaction)==null?void 0:T.findIndex(b=>(b==null?void 0:b.sendBy)===n),u=(w=p==null?void 0:p.arrReaction)==null?void 0:w.findIndex(b=>(b==null?void 0:b.sendBy)===l);const k=R(N,`messages/${c}/${p==null?void 0:p.id}`);x!==-1?((C=p==null?void 0:p.arrReaction[x])==null?void 0:C.reaction)===a?$(k,{arrReaction:[{reaction:"",sendBy:n},{reaction:(_=p==null?void 0:p.arrReaction[u])==null?void 0:_.reaction,sendBy:l}]}):$(k,{arrReaction:[{reaction:a,sendBy:n},{reaction:(g=p==null?void 0:p.arrReaction[u])==null?void 0:g.reaction,sendBy:l}]}):u!==-1?$(k,{arrReaction:[{reaction:a,sendBy:n},{reaction:(y=p==null?void 0:p.arrReaction[u])==null?void 0:y.reaction,sendBy:l}]}):$(k,{arrReaction:[{reaction:a,sendBy:n},{reaction:"",sendBy:l}]})}else{const x=R(N,`messages/${c}/${p==null?void 0:p.id}`);$(x,{arrReaction:[{reaction:a,sendBy:n},{reaction:"",sendBy:l}]})}},F=(a,r,l)=>{var g,y,x,u,k,b,M,L,P,z,J,V,G,W,q;if(Se(l==="image/jpeg"?"image":"video"),A){const O=R(N,`messages/${o==null?void 0:o.chatRoomId}/${A}`);let na=(v==null?void 0:v.length)>0?{arrReaction:v[1]!==!1?[{reaction:(g=v[0])==null?void 0:g.reaction,sendBy:(y=v[0])==null?void 0:y.sendBy}]:[{reaction:(x=v[0])==null?void 0:x.reaction,sendBy:(u=v[0])==null?void 0:u.sendBy},{reaction:(k=v[1])==null?void 0:k.reaction,sendBy:(b=v[1])==null?void 0:b.sendBy}],chatroomId:o==null?void 0:o.chatRoomId,createdAt:`${Date.now().toString()}`,id:A,messageBy:(M=s==null?void 0:s.data)==null?void 0:M.user_id,messageType:"text",messagerName:o==null?void 0:o.opp_username,text:I}:{chatroomId:o==null?void 0:o.chatRoomId,createdAt:`${Date.now().toString()}`,id:A,messageBy:(L=s==null?void 0:s.data)==null?void 0:L.user_id,messageType:"text",messagerName:o==null?void 0:o.opp_username,text:I};$(O,na),E(""),ka(""),va([])}else{let O=l==="image/jpeg"?{chatImageURL:r,chatroomId:o==null?void 0:o.chatRoomId,createdAt:`${Date.now().toString()}`,id:j,messageBy:(P=s==null?void 0:s.data)==null?void 0:P.user_id,messageType:"image",messagerName:o==null?void 0:o.opp_username,text:""}:l==="video/mp4"?{chatVideoThumbnail:a,chatVideoURL:r,chatroomId:o==null?void 0:o.chatRoomId,createdAt:`${Date.now().toString()}`,id:j,messageBy:(z=s==null?void 0:s.data)==null?void 0:z.user_id,messageType:"video",messagerName:o==null?void 0:o.opp_username,text:""}:{chatroomId:o==null?void 0:o.chatRoomId,createdAt:`${Date.now().toString()}`,id:j,messageBy:(J=s==null?void 0:s.data)==null?void 0:J.user_id,messageType:"text",messagerName:o==null?void 0:o.opp_username,text:I};ca(Ta,O),E(""),U(!1)}je(r),Te(a),Sa();let n=Ma(o==null?void 0:o.opp_userId);const c=R(N,`chathistory/${(V=s==null?void 0:s.data)==null?void 0:V.user_id}`),d=Q(c,n);let T={chatHistoryId:n,chatRoomId:n,createdAt:`${Date.now().toString()}`,last_message:I||(l==="image/jpeg"?"image":"video"),opp_userChatHistoryId:n,opp_userId:o==null?void 0:o.opp_userId,opp_username:o==null?void 0:o.opp_username,opp_userprofile:o==null?void 0:o.opp_userprofile};$(d,T);const w=R(N,`chathistory/${o==null?void 0:o.opp_userId}`),C=Q(w,n);let _={chatHistoryId:n,chatRoomId:n,createdAt:`${Date.now().toString()}`,last_message:I||(l==="image/jpeg"?"image":"video"),opp_userChatHistoryId:n,opp_userId:(G=s==null?void 0:s.data)==null?void 0:G.user_id,opp_username:(W=s==null?void 0:s.data)==null?void 0:W.name,opp_userprofile:(q=s==null?void 0:s.data)==null?void 0:q.photo};$(C,_)},ze=a=>{Na(!ia),E(a==null?void 0:a.text)},Je=()=>{ja(!Ia)},Ve=()=>{ja(!1)},Ge=()=>{ta(!H),X("/messages"),D([])};return t("section",{className:"flex flex-col pt-14",children:[e("div",{className:"min-w-screen  h-[100%]",children:t("div",{className:"min-w-full rounded lg:grid lg:grid-cols-3 ",children:[e("div",{className:`border-r border-gray-300 lg:col-span-1  ${H?"":" lg:flex xl:flex  sm:hidden md:hidden xs:hidden"}`,children:e("ul",{className:"overflow-auto min-h-[calc(100vh-60px)] w-full flex flex-col",children:t(ie,{children:[t("div",{className:"w-full my-2 mb-2 flex justify-between items-center ",children:[e("h2",{className:"ml-2 text-lg text-gray-600",children:"Chats"}),e("img",{src:Re,alt:"ADD_ICON",className:"w-[35px]",onClick:La})]}),ke?e(De,{}):pa.length>0?pa.map((a,r)=>e("li",{children:t("span",{onClick:()=>Fe(a),className:`${(o==null?void 0:o.opp_username)===(a==null?void 0:a.opp_username)?"bg-gray-100":""}  flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 cursor-pointer hover:bg-gray-100 focus:outline-none`,children:[e("img",{className:"object-cover w-10 h-10 rounded-full",src:(a==null?void 0:a.opp_userprofile)||ge,alt:"username",crossOrigin:"anonymous"}),t("div",{className:"w-full pb-2",children:[t("div",{className:"flex justify-between",children:[e("span",{className:"block ml-2 font-semibold text-gray-600",children:a==null?void 0:a.opp_username}),e("span",{className:"block ml-2 text-sm text-gray-600",children:Y.unix((a==null?void 0:a.createdAt)/1e3).format("LT")})]}),e("span",{className:"block ml-2 text-sm text-gray-600",children:a==null?void 0:a.last_message})]})]})},r)):t("div",{className:"no-msg center flex flex-1 justify-center items-center flex-col min-h-full ",children:[e("img",{src:lo,alt:"msg"}),e("span",{className:"block text-sm text-gray-600",children:"No Messages"})]})]})})}),!H||S?e("div",{className:`${H?"lg:flex xl:flex sm:hidden md:hidden xs:hidden":""} lg:col-span-2 lg:block`,children:t("div",{className:"relative w-full mt-2",children:[t("div",{className:"relative flex items-center px-3 border-b border-gray-300 ",children:[e("img",{src:me,alt:"Profile",className:"mb-2 block lg:hidden",onClick:Ge}),e("img",{className:`object-cover w-10 h-10 rounded-full mb-2 ml-6 lg:ml-3 ${o!=null&&o.opp_userId?"cursor-pointer":""}`,src:(fa?m.photo:o==null?void 0:o.opp_userprofile)||ge,alt:"username",onClick:()=>(o==null?void 0:o.opp_userId)&&X(`/userprofile/${o==null?void 0:o.opp_userId}`),crossOrigin:"anonymous"}),e("span",{className:"block ml-2 font-bold text-gray-600 mb-2",children:fa?m==null?void 0:m.name:o==null?void 0:o.opp_username})]}),e("div",{className:"relative w-full px-6 overflow-y-auto h-[calc(100vh-12rem)]",children:e("ul",{className:"space-y-2",children:ba.map((a,r)=>{var l,n,c,d,T,w,C,_,g,y,x,u,k,b,M,L,P,z,J,V,G,W,q,O,na,Ba,Oa,Ha,Ea,Ua,Aa,Fa,Pa,za,Ja,Va,Ga,Wa,qa,Ka,Ya,Qa,Za,Xa,Da,ma,ae,ee,oe,se,ne,re,le,ce,te,de,he,pe;return t(h.Fragment,{children:[(a==null?void 0:a.messageType)==="post"||(a==null?void 0:a.messageType)==="video"||(a==null?void 0:a.messageType)==="image"?(a==null?void 0:a.messageBy)!==((l=s==null?void 0:s.data)==null?void 0:l.user_id)?e("li",{className:"flex justify-start relative",children:t("div",{className:`${(a==null?void 0:a.arrReaction)&&(((n=a==null?void 0:a.arrReaction[0])==null?void 0:n.reaction)!==""||((c=a==null?void 0:a.arrReaction[1])==null?void 0:c.reaction)!=="")&&"mb-6"} relative max-w-xs text-black bg-gray-100 rounded-t-xl rounded-r-xl min-w-[12rem] min-h-[12rem]  `,children:[" ",e("img",{className:"block rounded-t-lg h-[200px] w-[200px] object-cover",crossOrigin:"anonymous",src:(a==null?void 0:a.chatVideoThumbnail)||(a==null?void 0:a.chatImageURL),alt:"IMG",onClick:()=>oa(a)}),(a==null?void 0:a.messageType)==="image"?null:e("img",{className:"block cursor-pointer rounded-t-lg absolute top-[calc(50%-21px)] left-[calc(50%-21px)]",src:ye,alt:"IMG",onClick:()=>oa(a),crossOrigin:"anonymous"}),t("div",{className:"flex justify-between align-baseline ",children:[e("span",{className:"text-gray-500 text-xs text-left pl-2 flex justify-center flex-col mr-2 ",children:Y.unix((a==null?void 0:a.createdAt)/1e3).format("LT")}),e("img",{src:be,alt:"EMOJI_ICON",className:"w-5 cursor-pointer mr-2 text-white ",onClick:()=>sa(a)})]}),B&&aa===(a==null?void 0:a.id)&&e("div",{role:"tooltip",className:"absolute bottom-5 left-0  z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl ",children:t("div",{className:"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl ",children:[e("span",{onClick:()=>i("Thumbs Up"),className:"font-bold text-black font-lato text-xl mr-2 ",children:"👍"}),e("span",{onClick:()=>i("Heart"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"❤️"}),e("span",{onClick:()=>i("Fire"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"🔥"}),e("span",{onClick:()=>i("Claps"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"👏"}),e("span",{onClick:()=>i("Tears of Joy"),className:"font-bold text-black font-lato text-xl ml-2 ",children:"😂"})]})}),(a==null?void 0:a.arrReaction)&&t("div",{className:`${((d=a==null?void 0:a.arrReaction[0])==null?void 0:d.reaction)===""&&((T=a==null?void 0:a.arrReaction[1])==null?void 0:T.reaction)===""?"hidden":""} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10 right-0`,children:[((w=a==null?void 0:a.arrReaction[0])==null?void 0:w.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((C=a==null?void 0:a.arrReaction[0])==null?void 0:C.reaction)==="Heart"&&e("span",{children:"❤️"}),((_=a==null?void 0:a.arrReaction[0])==null?void 0:_.reaction)==="Fire"&&e("span",{children:"🔥"}),((g=a==null?void 0:a.arrReaction[0])==null?void 0:g.reaction)==="Claps"&&e("span",{children:"👏"}),((y=a==null?void 0:a.arrReaction[0])==null?void 0:y.reaction)==="Tears of Joy"&&e("span",{children:"😂"}),((x=a==null?void 0:a.arrReaction[1])==null?void 0:x.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((u=a==null?void 0:a.arrReaction[1])==null?void 0:u.reaction)==="Heart"&&e("span",{children:"❤️"}),((k=a==null?void 0:a.arrReaction[1])==null?void 0:k.reaction)==="Fire"&&e("span",{children:"🔥"}),((b=a==null?void 0:a.arrReaction[1])==null?void 0:b.reaction)==="Claps"&&e("span",{children:"👏"}),((M=a==null?void 0:a.arrReaction[1])==null?void 0:M.reaction)==="Tears of Joy"&&e("span",{children:"😂"})]})]})}):e("li",{className:"flex justify-end ",children:t("div",{className:`${(a==null?void 0:a.arrReaction)&&(((L=a==null?void 0:a.arrReaction[0])==null?void 0:L.reaction)!==""||((P=a==null?void 0:a.arrReaction[1])==null?void 0:P.reaction)!=="")&&"mb-6"} relative max-w-xs text-white bg-black min-w-[12rem] min-h-[12rem] rounded-t-xl rounded-l-xl shadow text-right`,children:[" ",e("img",{className:"block rounded-t-lg h-[200px] w-[200px] object-cover",crossOrigin:"anonymous",src:(a==null?void 0:a.chatVideoThumbnail)||(a==null?void 0:a.chatImageURL),alt:"IMG",onClick:()=>oa(a)}),(a==null?void 0:a.messageType)==="image"?null:e("img",{className:"block cursor-pointer rounded-t-lg absolute top-[calc(50%-21px)] left-[calc(50%-21px)]",src:ye,alt:"IMG",onClick:()=>oa(a),crossOrigin:"anonymous"}),t("div",{className:"flex justify-between align-baseline ",children:[e("div",{onClick:()=>sa(a),children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-white cursor-pointer ml-2 ",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e("span",{className:"text-white text-xs text-right flex justify-center flex-col mr-2 ",children:Y.unix((a==null?void 0:a.createdAt)/1e3).format("LT")})]}),B&&aa===(a==null?void 0:a.id)&&e("div",{role:"tooltip",className:"absolute bottom-5 left-0 z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl ",children:t("div",{className:"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl ",children:[e("span",{onClick:()=>i("Thumbs Up"),className:"font-bold text-black font-lato text-xl mr-2 ",children:"👍"}),e("span",{onClick:()=>i("Heart"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"❤️"}),e("span",{onClick:()=>i("Fire"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"🔥"}),e("span",{onClick:()=>i("Claps"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"👏"}),e("span",{onClick:()=>i("Tears of Joy"),className:"font-bold text-black font-lato text-xl ml-2 ",children:"😂"})]})}),(a==null?void 0:a.arrReaction)&&t("div",{className:`${((z=a==null?void 0:a.arrReaction[0])==null?void 0:z.reaction)===""&&((J=a==null?void 0:a.arrReaction[1])==null?void 0:J.reaction)===""?"hidden":""} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10`,children:[((V=a==null?void 0:a.arrReaction[0])==null?void 0:V.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((G=a==null?void 0:a.arrReaction[0])==null?void 0:G.reaction)==="Heart"&&e("span",{children:"❤️"}),((W=a==null?void 0:a.arrReaction[0])==null?void 0:W.reaction)==="Fire"&&e("span",{children:"🔥"}),((q=a==null?void 0:a.arrReaction[0])==null?void 0:q.reaction)==="Claps"&&e("span",{children:"👏"}),((O=a==null?void 0:a.arrReaction[0])==null?void 0:O.reaction)==="Tears of Joy"&&e("span",{children:"😂"}),((na=a==null?void 0:a.arrReaction[1])==null?void 0:na.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((Ba=a==null?void 0:a.arrReaction[1])==null?void 0:Ba.reaction)==="Heart"&&e("span",{children:"❤️"}),((Oa=a==null?void 0:a.arrReaction[1])==null?void 0:Oa.reaction)==="Fire"&&e("span",{children:"🔥"}),((Ha=a==null?void 0:a.arrReaction[1])==null?void 0:Ha.reaction)==="Claps"&&e("span",{children:"👏"}),((Ea=a==null?void 0:a.arrReaction[1])==null?void 0:Ea.reaction)==="Tears of Joy"&&e("span",{children:"😂"})]})]})}):(a==null?void 0:a.messageBy)!==((Ua=s==null?void 0:s.data)==null?void 0:Ua.user_id)?e("li",{className:"flex justify-start",children:t("div",{className:`${(a==null?void 0:a.arrReaction)&&(((Aa=a==null?void 0:a.arrReaction[0])==null?void 0:Aa.reaction)!==""||((Fa=a==null?void 0:a.arrReaction[1])==null?void 0:Fa.reaction)!=="")&&"mb-6"} relative max-w-xl px-4 py-2 text-black bg-gray-100 rounded-t-xl rounded-r-xl `,children:[" ",e("span",{className:"block",children:a==null?void 0:a.text}),t("div",{className:"flex justify-between align-baseline ",children:[e("span",{className:"text-gray-500 text-xs text-right flex justify-center flex-col mr-3",children:Y.unix((a==null?void 0:a.createdAt)/1e3).format("LT")}),e("img",{src:be,alt:"EMOJI_ICON",className:"w-5 cursor-pointer text-gray-500 ",onClick:()=>sa(a)})]}),B&&aa===(a==null?void 0:a.id)&&e("div",{role:"tooltip",className:"absolute bottom-5 left-0  z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl ",children:t("div",{className:"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl ",children:[e("span",{onClick:()=>i("Thumbs Up"),className:"font-bold text-black font-lato text-xl mr-2 ",children:"👍"}),e("span",{onClick:()=>i("Heart"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"❤️"}),e("span",{onClick:()=>i("Fire"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"🔥"}),e("span",{onClick:()=>i("Claps"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"👏"}),e("span",{onClick:()=>i("Tears of Joy"),className:"font-bold text-black font-lato text-xl ml-2 ",children:"😂"})]})}),(a==null?void 0:a.arrReaction)&&t("div",{className:`${((Pa=a==null?void 0:a.arrReaction[0])==null?void 0:Pa.reaction)===""&&((za=a==null?void 0:a.arrReaction[1])==null?void 0:za.reaction)===""?"hidden":""} px-2 py-0.5 bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10 right-0`,children:[((Ja=a==null?void 0:a.arrReaction[0])==null?void 0:Ja.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((Va=a==null?void 0:a.arrReaction[0])==null?void 0:Va.reaction)==="Heart"&&e("span",{children:"❤️"}),((Ga=a==null?void 0:a.arrReaction[0])==null?void 0:Ga.reaction)==="Fire"&&e("span",{children:"🔥"}),((Wa=a==null?void 0:a.arrReaction[0])==null?void 0:Wa.reaction)==="Claps"&&e("span",{children:"👏"}),((qa=a==null?void 0:a.arrReaction[0])==null?void 0:qa.reaction)==="Tears of Joy"&&e("span",{children:"😂"}),((Ka=a==null?void 0:a.arrReaction[1])==null?void 0:Ka.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((Ya=a==null?void 0:a.arrReaction[1])==null?void 0:Ya.reaction)==="Heart"&&e("span",{children:"❤️"}),((Qa=a==null?void 0:a.arrReaction[1])==null?void 0:Qa.reaction)==="Fire"&&e("span",{children:"🔥"}),((Za=a==null?void 0:a.arrReaction[1])==null?void 0:Za.reaction)==="Claps"&&e("span",{children:"👏"}),((Xa=a==null?void 0:a.arrReaction[1])==null?void 0:Xa.reaction)==="Tears of Joy"&&e("span",{children:"😂"})]})]})}):e(ie,{children:e("li",{className:"flex justify-end",children:t("div",{className:`${(a==null?void 0:a.arrReaction)&&(((Da=a==null?void 0:a.arrReaction[0])==null?void 0:Da.reaction)!==""||((ma=a==null?void 0:a.arrReaction[1])==null?void 0:ma.reaction)!=="")&&"mb-6"} relative max-w-xl px-4 py-2 text-white bg-black rounded-t-xl rounded-l-xl shadow text-right`,children:[" ",t("div",{className:"flex justify-end ",children:[e("span",{className:"block text-left ",children:a==null?void 0:a.text}),e("img",{src:ao,alt:"more",className:"object-contain h-5 cursor-pointer w-4 ml-2 ",onClick:()=>Pe(a)})]}),t("div",{className:"flex justify-end align-baseline ",children:[e("div",{onClick:()=>sa(a),children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-white cursor-pointer ",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e("span",{className:"text-white text-xs text-right flex justify-center flex-col ml-3 ",children:Y.unix((a==null?void 0:a.createdAt)/1e3).format("LT")})]}),ia&&A===(a==null?void 0:a.id)&&e("div",{role:"tooltip",className:"absolute top-20px left-0 z-40 inline-block w-32 text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl ",children:e("button",{onClick:()=>ze(a),className:"flex items-center justify-center w-full px-3 py-2 text-center bg-gray-100 cursor-pointer select-none rounded-xl rounded-t-xl hover:bg-gray-200",children:e("h3",{className:"font-bold text-black font-lato",children:"Edit"})})}),B&&aa===(a==null?void 0:a.id)&&e("div",{role:"tooltip",className:"absolute bottom-5 -left-16 z-40 inline-block text-sm font-light text-gray-500 transition-opacity duration-300 bg-white border shadow-xl rounded-xl ",children:t("div",{className:"flex justify-between items-center w-full px-3 text-center bg-gray-100 border-gray-300 cursor-pointer select-none rounded-xl rounded-t-xl ",children:[e("span",{onClick:()=>i("Thumbs Up"),className:"font-bold text-black font-lato text-xl mr-2 ",children:"👍"}),e("span",{onClick:()=>i("Heart"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"❤️"}),e("span",{onClick:()=>i("Fire"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"🔥"}),e("span",{onClick:()=>i("Claps"),className:"font-bold text-black font-lato text-xl mx-2 ",children:"👏"}),e("span",{onClick:()=>i("Tears of Joy"),className:"font-bold text-black font-lato text-xl ml-2 ",children:"😂"})]})}),(a==null?void 0:a.arrReaction)&&t("div",{className:`px-2 py-0.5 ${((ae=a==null?void 0:a.arrReaction[0])==null?void 0:ae.reaction)===""&&((ee=a==null?void 0:a.arrReaction[1])==null?void 0:ee.reaction)===""?"hidden":""} bg-white shadow-xl rounded-xl rounded-t-xl absolute z-10`,children:[((oe=a==null?void 0:a.arrReaction[0])==null?void 0:oe.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((se=a==null?void 0:a.arrReaction[0])==null?void 0:se.reaction)==="Heart"&&e("span",{children:"❤️"}),((ne=a==null?void 0:a.arrReaction[0])==null?void 0:ne.reaction)==="Fire"&&e("span",{children:"🔥"}),((re=a==null?void 0:a.arrReaction[0])==null?void 0:re.reaction)==="Claps"&&e("span",{children:"👏"}),((le=a==null?void 0:a.arrReaction[0])==null?void 0:le.reaction)==="Tears of Joy"&&e("span",{children:"😂"}),((ce=a==null?void 0:a.arrReaction[1])==null?void 0:ce.reaction)==="Thumbs Up"&&e("span",{children:"👍"}),((te=a==null?void 0:a.arrReaction[1])==null?void 0:te.reaction)==="Heart"&&e("span",{children:"❤️"}),((de=a==null?void 0:a.arrReaction[1])==null?void 0:de.reaction)==="Fire"&&e("span",{children:"🔥"}),((he=a==null?void 0:a.arrReaction[1])==null?void 0:he.reaction)==="Claps"&&e("span",{children:"👏"}),((pe=a==null?void 0:a.arrReaction[1])==null?void 0:pe.reaction)==="Tears of Joy"&&e("span",{children:"😂"})]})]})})}),e("div",{ref:$a})]},r)})})}),t("div",{className:"relative flex items-center justify-between w-full p-3 border-t border-gray-300",children:[Ia&&t("div",{className:"absolute -top-[450px]",children:[" ",e(eo,{addEmoji:Le})]}),e("button",{onClick:Je,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e("input",{type:"text",placeholder:"Message",className:"block w-full py-2 pl-4 mx-3 bg-gray-100 rounded-full outline-none focus:text-gray-700",name:"message",autoComplete:"off",required:!0,value:I,onChange:a=>E(a.target.value),onKeyDown:a=>{a.key==="Enter"&&F()},onFocus:Ve}),e("div",{className:"file-msg cursor-pointer ",children:e("input",{type:"file",className:"file-msg-input",onChange:Be})}),e("button",{disabled:I==="",type:"submit",onClick:()=>F(),children:e("svg",{className:"w-5 h-5 text-gray-500 origin-center transform rotate-90",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})]})}):t("div",{className:`${H?"lg:flex xl:flex sm:hidden md:hidden xs:hidden":""} lg:col-span-2 lg:block justify-center items-center font-semibold flex-col text-lg`,children:[e("img",{src:Re,alt:"ADD_ICON",className:"w-12 mt-3 mb-11",onClick:La}),"Start a conversation",e("span",{className:"flex justify-center items-center text-sm mt-4",children:"by clicking on the + icon"})]})]})}),da&&e(oo,{visible:da,onClose:ha,goChat:Ue,sendMsg:F}),e(ue,{subClass:" bg-white rounded-xl shadow-2xl  sm:w-1/5 xs:8/12 mx-0 flex justify-center",visible:Ce,onClose:()=>{},hideClose:!0,children:t("div",{className:"flex flex-col items-center justify-center text-center",children:[e("div",{className:"flex items-center justify-center rounded-full",children:e(so,{isLoading:!0,colClass:"text-black m-auto",size:10,className:"w-full flex justify-center items-center"})}),e("p",{className:"text-lg font-medium text-gray-500",children:"Uploading..."})]})}),ea&&e("div",{className:"fixed text-black flex items-center justify-center overflow-auto z-40 bg-black bg-opacity-40 left-0 right-0 top-0 bottom-0 transition-all duration-300",children:t(ue,{toggleSpace:!0,visible:ea,hideClose:!0,onClose:ga,subClass:"w-[100%] mx-1 sm:mx-10 relative min-w-[15rem] min-h-[15rem]",children:[e("img",{src:no,alt:"Close",className:"absolute top-0 right-0 bg-black p-2 rounded-bl-3xl bg-opacity-50 cursor-pointer z-40",onClick:()=>ga(!ea)}),f!=null&&f.chatVideoURL?e("video",{crossOrigin:"anonymous",className:"object-contain w-full h-full",autoPlay:!0,children:e("source",{src:f==null?void 0:f.chatVideoURL,type:"video/mp4"})}):e("img",{src:f==null?void 0:f.chatImageURL,alt:"video and image",className:"object-contain  w-full h-full "})]})}),wa&&e(ro,{closeToggle:Ca,chatPostID:f==null?void 0:f.chatPostID},f==null?void 0:f.chatPostID)]})}export{xo as default};
//# sourceMappingURL=Messages-be590c9f.js.map
